(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},34883,e=>{"use strict";e.s(["default",()=>n]);var t=e.i(43476),s=e.i(71645),a=e.i(18566),i=e.i(23312);function n(){var e,n,l;let r=(0,a.useRouter)(),{state:c,markDeployed:o}=(0,i.useDeployment)(),[d,p]=(0,s.useState)(0),[g,u]=(0,s.useState)([{id:"validate",label:"Validating configuration",description:"Checking resources and dependencies",duration:2,status:"pending",logs:[]},{id:"provision",label:"Provisioning infrastructure",description:"Setting up servers and networking",duration:8,status:"pending",logs:[]},{id:"database",label:"Configuring database",description:"Creating PostgreSQL instance with backups",duration:6,status:"pending",logs:[]},{id:"cache",label:"Setting up cache",description:"Deploying Redis with persistence",duration:4,status:"pending",logs:[]},{id:"container",label:"Pulling container image",description:"Fetching and verifying image layers",duration:5,status:"pending",logs:[]},{id:"deploy",label:"Deploying application",description:"Starting containers across replicas",duration:7,status:"pending",logs:[]},{id:"loadbalancer",label:"Configuring load balancer",description:"Setting up SSL and routing rules",duration:4,status:"pending",logs:[]},{id:"health",label:"Running health checks",description:"Verifying application is responding",duration:5,status:"pending",logs:[]},{id:"complete",label:"Deployment complete",description:"Your application is live!",duration:1,status:"pending",logs:[]}]),[h,m]=(0,s.useState)(0),[x,b]=(0,s.useState)(!1);(0,s.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,s.useEffect)(()=>{c.cost||r.push("/")},[c.cost,r]),(0,s.useEffect)(()=>{let e;if(!c.cost||x)return;let t=[],s=[],a=async()=>{for(let e=0;e<g.length;e++)await new Promise(a=>{u(t=>t.map((t,s)=>s===e?{...t,status:"running"}:s<e?{...t,status:"completed"}:t)),p(e);let i=Array.from({length:f(g[e].id)},(t,s)=>v(g[e].id,s)),n=0,l=setInterval(()=>{n<i.length&&(u(t=>t.map((t,s)=>s===e&&"running"===t.status?{...t,logs:i.slice(0,n+1)}:t)),n++)},600);s.push(l);let r=setTimeout(()=>{clearInterval(l),u(t=>t.map((t,s)=>s===e?{...t,status:"completed"}:t)),a()},1e3*g[e].duration);t.push(r)});b(!0),o()};return e=setInterval(()=>{m(e=>e+1)},1e3),a(),()=>{t.forEach(e=>clearTimeout(e)),s.forEach(e=>clearInterval(e)),clearInterval(e)}},[c.cost,x,o]);let f=e=>(({validate:["✓ Configuration schema validated","✓ Resource quotas checked","✓ Dependencies resolved","✓ Security policies verified"],provision:["→ Allocating compute resources in FSN1","→ Creating virtual private network","→ Configuring firewall rules","✓ Infrastructure provisioned (CX43 instances)","✓ Network topology established"],database:["→ Creating PostgreSQL 16 instance","→ Allocating 20GB block storage","→ Enabling automated backups (7-day retention)","→ Configuring HA standby replica","✓ Database ready: postgresql://...unhazzle.io:5432"],cache:["→ Deploying Redis 7.2 container","→ Configuring 512MB memory limit","→ Enabling daily persistence (AOF)","✓ Cache ready: redis://...unhazzle.io:6379"],container:["→ Authenticating with ghcr.io","→ Pulling image layers (3/3)","→ Verifying image signature","✓ Image pulled: ghcr.io/acme/ecommerce-shop:v2.1.0"],deploy:["→ Injecting environment variables","→ Starting replica 1/2","→ Starting replica 2/2","→ Configuring auto-scaling (2-10 replicas)","✓ All replicas running and healthy"],loadbalancer:["→ Creating load balancer","→ Provisioning SSL certificate","→ Configuring health check: GET /health","✓ Load balancer active with HTTPS"],health:["→ Waiting for application to be ready","→ Health check passed (200 OK)","→ Testing SSL certificate","→ Verifying DNS resolution","✓ All health checks passed"],complete:["🎉 Deployment successful!"]})[e]||[]).length,v=(e,t)=>{let s={validate:["✓ Configuration schema validated","✓ Resource quotas checked","✓ Dependencies resolved","✓ Security policies verified"],provision:["→ Allocating compute resources in FSN1","→ Creating virtual private network","→ Configuring firewall rules","✓ Infrastructure provisioned (CX43 instances)","✓ Network topology established"],database:["→ Creating PostgreSQL 16 instance","→ Allocating 20GB block storage","→ Enabling automated backups (7-day retention)","→ Configuring HA standby replica","✓ Database ready: postgresql://...unhazzle.io:5432"],cache:["→ Deploying Redis 7.2 container","→ Configuring 512MB memory limit","→ Enabling daily persistence (AOF)","✓ Cache ready: redis://...unhazzle.io:6379"],container:["→ Authenticating with ghcr.io","→ Pulling image layers (3/3)","→ Verifying image signature","✓ Image pulled: ghcr.io/acme/ecommerce-shop:v2.1.0"],deploy:["→ Injecting environment variables","→ Starting replica 1/2","→ Starting replica 2/2","→ Configuring auto-scaling (2-10 replicas)","✓ All replicas running and healthy"],loadbalancer:["→ Creating load balancer","→ Provisioning SSL certificate","→ Configuring health check: GET /health","✓ Load balancer active with HTTPS"],health:["→ Waiting for application to be ready","→ Health check passed (200 OK)","→ Testing SSL certificate","→ Verifying DNS resolution","✓ All health checks passed"],complete:["🎉 Deployment successful!"]}[e]||[];return s[Math.min(t,s.length-1)]||"..."};if(!c.cost)return null;let j=g.filter(e=>"completed"===e.status).length,y=g.length,N=j/y*100;return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-12 px-4",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 bg-purple-100 text-purple-700 px-4 py-2 rounded-full text-sm font-medium mb-4",children:[(0,t.jsx)("span",{children:"🚀"}),(0,t.jsx)("span",{children:"Deployment in progress"})]}),(0,t.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-3",children:"Deploying Your Application"}),(0,t.jsx)("p",{className:"text-lg text-slate-600",children:"Sit back and relax. This typically takes 40-50 seconds."})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-3xl",children:"⏱️"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-slate-900",children:j===y?"Complete!":"Deploying..."}),(0,t.jsxs)("p",{className:"text-sm text-slate-600",children:[j," of ",y," steps completed"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:(e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))})(h)}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"elapsed"})]})]}),(0,t.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-3 overflow-hidden",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 h-3 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(N,"%")}})}),(0,t.jsxs)("p",{className:"text-right text-sm text-slate-600 mt-2",children:[Math.round(N),"%"]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-6",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"📋"}),(0,t.jsx)("span",{children:"Deployment Steps"})]}),(0,t.jsx)("div",{className:"space-y-6",children:g.map((e,s)=>(0,t.jsxs)("div",{className:"relative",children:[s<g.length-1&&(0,t.jsx)("div",{className:"absolute left-[11px] top-8 w-0.5 h-full ".concat("completed"===e.status?"bg-green-600":"bg-slate-200")}),(0,t.jsxs)("div",{className:"relative flex gap-4 p-4 rounded-lg transition-all ".concat("running"===e.status?"bg-purple-50 border-2 border-purple-600":"completed"===e.status?"bg-green-50 border border-green-200":"bg-slate-50 border border-slate-200"),children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-6 h-6 mt-1",children:(e=>{switch(e){case"completed":return(0,t.jsx)("span",{className:"text-green-600",children:"✓"});case"running":return(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 text-purple-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});case"error":return(0,t.jsx)("span",{className:"text-red-600",children:"✗"});default:return(0,t.jsx)("span",{className:"text-slate-300",children:"○"})}})(e.status)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("h4",{className:"font-semibold ".concat("running"===e.status?"text-purple-900":"completed"===e.status?"text-green-900":"text-slate-700"),children:e.label}),"running"===e.status&&(0,t.jsx)("span",{className:"text-xs bg-purple-600 text-white px-2 py-1 rounded-full font-medium",children:"In Progress"})]}),(0,t.jsx)("p",{className:"text-sm text-slate-600 mb-2",children:e.description}),e.logs&&e.logs.length>0&&(0,t.jsx)("div",{className:"bg-slate-900 rounded-lg p-3 font-mono text-xs mt-3",children:e.logs.map((e,s)=>(0,t.jsx)("div",{className:"text-green-400 mb-1",children:e},s))})]})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-100 mb-6",children:[(0,t.jsxs)("h4",{className:"font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"💡"}),(0,t.jsx)("span",{children:"What's happening behind the scenes"})]}),(0,t.jsxs)("ul",{className:"space-y-2 text-sm text-slate-700",children:[(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-purple-600 mt-0.5",children:"•"}),(0,t.jsx)("span",{children:"Spinning up enterprise-grade Hetzner servers in Germany"})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-purple-600 mt-0.5",children:"•"}),(0,t.jsx)("span",{children:"Configuring high-availability database with automated backups"})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-purple-600 mt-0.5",children:"•"}),(0,t.jsxs)("span",{children:["Setting up auto-scaling from ",null==(e=c.resources)?void 0:e.replicas.min," to ",null==(n=c.resources)?void 0:n.replicas.max," replicas"]})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-purple-600 mt-0.5",children:"•"}),(0,t.jsx)("span",{children:"Provisioning free SSL certificate for HTTPS"})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-purple-600 mt-0.5",children:"•"}),(0,t.jsxs)("span",{children:["Deploying to: ",(0,t.jsx)("code",{className:"bg-white px-2 py-0.5 rounded text-xs",children:null==(l=c.domain)?void 0:l.defaultSubdomain})]})]})]})]}),x&&(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-8 mb-6",children:[(0,t.jsx)("div",{className:"text-5xl mb-4",children:"🎉"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-green-900 mb-2",children:"Deployment Complete!"}),(0,t.jsx)("p",{className:"text-green-700 mb-6",children:"Your application is now live and running"}),(0,t.jsx)("button",{onClick:()=>r.push("/dashboard"),className:"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-medium",children:"View Operations Dashboard →"})]})})]})})}}]);