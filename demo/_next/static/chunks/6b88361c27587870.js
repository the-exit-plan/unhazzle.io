(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78928,e=>{"use strict";e.s(["default",()=>T],78928);var s=e.i(43476),t=e.i(71645),a=e.i(18566),l=e.i(23312),n=e.i(23876);function r(e){let{project:a,selected:l,onSelect:n}=e,[r,i]=(0,t.useState)(null);(0,t.useEffect)(()=>{"environment"===l.kind&&l.envId&&i(l.envId)},[l]);let[,c]=(0,t.useState)(0);(0,t.useEffect)(()=>{let e=setInterval(()=>{c(e=>e+1)},6e4);return()=>clearInterval(e)},[]);let d=e=>(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 bg-green-600 rounded-full"}),"Live"]}),o=a.environments.filter(e=>"standard"===e.type||"non-prod"===e.type||"prod"===e.type),x=a.environments.filter(e=>"pr"===e.type);return(0,s.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl p-4 space-y-4 sticky top-4 border border-slate-200",children:[(0,s.jsxs)("button",{onClick:()=>n({kind:"project-settings"}),className:"w-full bg-white rounded-lg p-4 shadow-sm border border-slate-200 hover:bg-slate-50 transition text-left ".concat("project-settings"===l.kind?"ring-2 ring-purple-500":""),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"üì¶"}),(0,s.jsx)("h3",{className:"font-bold text-slate-900 text-lg",children:a.name}),(0,s.jsx)("span",{className:"ml-auto",children:(0,s.jsxs)("svg",{className:"w-4 h-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),(0,s.jsxs)("div",{className:"text-xs text-slate-600 space-y-1",children:[(0,s.jsxs)("div",{children:[a.environments.length," environment",1!==a.environments.length?"s":""]}),x.length>0&&(0,s.jsxs)("div",{className:"text-blue-600 font-medium",children:[x.length,"/",a.prEnvs.maxEnvs," PR environments"]})]})]}),o.map(e=>{var t,a;let c=e.applications||[],o=!!e.database,x="environment"===l.kind&&l.envId===e.id,m=r===e.id;return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>{m?i(null):i(e.id),n({kind:"environment",envId:e.id})},className:"w-full bg-gradient-to-r from-purple-50 to-blue-50 px-4 py-3 hover:from-purple-100 hover:to-blue-100 transition text-left ".concat(x?"ring-2 ring-purple-500 ring-inset":""," ").concat(m?"border-b border-slate-200":"border-b-0"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-slate-500 transition-transform ".concat(m?"rotate-90":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,s.jsx)("span",{className:"text-lg",children:"üîß"}),(0,s.jsx)("span",{className:"font-bold text-slate-900",children:e.name}),"prod"===e.type&&(0,s.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-orange-100 text-orange-700 text-xs rounded font-medium",children:"PROD"}),"non-prod"===e.type&&(0,s.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded font-medium",children:"DEV"})]}),d(e)]}),(0,s.jsx)("div",{className:"text-xs text-slate-600 ml-6",children:e.baseDomain})]}),m&&(0,s.jsxs)("div",{className:"p-3 space-y-3 border-t border-slate-200",children:[c.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-xs font-semibold text-slate-600 mb-2 flex items-center gap-1",children:[(0,s.jsx)("span",{children:"üöÄ"}),(0,s.jsxs)("span",{children:["Applications (",c.length,")"]})]}),(0,s.jsx)("div",{className:"space-y-1",children:c.map((t,a)=>{var r;let i=t.name||(null==(r=t.imageUrl.split("/").pop())?void 0:r.split(":")[0])||"app-".concat(a+1),c="application"===l.kind&&l.id===t.id;return(0,s.jsxs)("button",{onClick:()=>n({kind:"application",id:t.id,envId:e.id}),className:"w-full text-left px-3 py-2 rounded-lg border transition ".concat(c?"border-purple-400 bg-purple-50 shadow-sm":"border-slate-200 hover:border-purple-300 hover:bg-slate-50"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-900 truncate",children:i}),"paused"===t.status&&(0,s.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 bg-amber-100 text-amber-700 rounded-full font-medium",children:"Paused"})]}),"public"===t.exposure&&(0,s.jsx)("div",{className:"text-xs text-slate-500",children:"Public"})]},t.id)})})]}),o&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-xs font-semibold text-slate-600 mb-2 flex items-center gap-1",children:[(0,s.jsx)("span",{children:"üíæ"}),(0,s.jsx)("span",{children:"Database"})]}),(0,s.jsx)("button",{onClick:()=>n({kind:"database",envId:e.id}),className:"w-full text-left px-3 py-2 rounded-lg border transition ".concat("database"===l.kind&&l.envId===e.id?"border-green-400 bg-green-50 shadow-sm":"border-slate-200 hover:border-green-300 hover:bg-slate-50"),children:(0,s.jsx)("div",{className:"text-sm font-medium text-slate-900",children:(null==(t=e.database)?void 0:t.engine)==="postgres"?"PostgreSQL":null==(a=e.database)?void 0:a.engine})})]}),(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-slate-200",children:(0,s.jsxs)("button",{onClick:()=>n({kind:"add-application",envId:e.id}),className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-300 hover:border-blue-400 hover:bg-blue-50 bg-white transition text-xs font-medium text-slate-700 hover:text-blue-700",children:[(0,s.jsx)("span",{className:"text-sm",children:"üì¶"}),(0,s.jsx)("span",{children:"Add Application"})]})})]})]},e.id)}),x.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"text-xs font-semibold text-slate-600 px-2 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"‚ö°"}),(0,s.jsx)("span",{children:"PR Environments"})]}),x.map(e=>{let t="environment"===l.kind&&l.envId===e.id,a=r===e.id,c=(e=>{if(!e)return"";let s=new Date().getTime(),t=new Date(e).getTime()-s;if(t<=0)return"Expired";let a=Math.floor(t/36e5),l=Math.floor(t%36e5/6e4);return a>0?"".concat(a,"h ").concat(l,"m"):"".concat(l,"m")})(e.expiresAt);return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>{a?i(null):i(e.id),n({kind:"environment",envId:e.id})},className:"w-full text-left p-3 hover:bg-blue-50 transition ".concat(t?"ring-2 ring-blue-500 ring-inset bg-blue-50":""),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-slate-500 transition-transform flex-shrink-0 ".concat(a?"rotate-90":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,s.jsx)("span",{className:"text-sm font-medium text-slate-900 truncate",children:e.name})]}),(e=>{if("pr"===e.type){var t;return(0,s.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded font-medium",children:["PR #",(null==(t=e.prSource)?void 0:t.prNumber)||"?"]})}return null})(e)]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs ml-6",children:[d(e),e.expiresAt&&(0,s.jsxs)("span",{className:"text-slate-600",children:["‚è±Ô∏è ",c]})]}),e.prSource&&!a&&(0,s.jsxs)("div",{className:"text-xs text-slate-600 mt-2 truncate ml-6",children:[e.prSource.repository," ‚Ä¢ ",e.prSource.branchName]})]}),a&&e.prSource&&(0,s.jsxs)("div",{className:"px-3 pb-3 space-y-2 border-t border-slate-200 pt-2",children:[(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsx)("div",{className:"text-slate-600",children:"Repository"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:e.prSource.repository})]}),(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsx)("div",{className:"text-slate-600",children:"Branch"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:e.prSource.branchName})]}),(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsx)("div",{className:"text-slate-600",children:"PR Title"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:e.prSource.prTitle})]})]})]},e.id)})]}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-200",children:(0,s.jsxs)("button",{onClick:()=>n({kind:"create-environment"}),className:"w-full flex items-center gap-2 px-4 py-2.5 rounded-lg border border-slate-300 hover:border-purple-400 hover:bg-purple-50 bg-white transition text-sm font-medium text-slate-700 hover:text-purple-700",children:[(0,s.jsx)("span",{className:"text-base",children:"üåç"}),(0,s.jsx)("span",{children:"Create Environment"})]})}),(0,s.jsx)("button",{onClick:()=>n({kind:"architecture"}),className:"w-full text-left px-4 py-3 rounded-lg border transition mt-4 ".concat("architecture"===l.kind?"border-purple-400 bg-purple-50 shadow-sm":"border-slate-200 hover:border-purple-300 hover:bg-slate-50 bg-white"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[(0,s.jsx)("span",{className:"text-xl",children:"üèóÔ∏è"}),(0,s.jsx)("span",{children:"Architecture Diagram"})]})})]})}function i(e){var l;let{environment:n,onClone:r,onPause:i,onResume:c,onAddApplication:d}=e,[o,x]=(0,t.useState)(!1);(0,a.useRouter)();let m=(()=>{if(0===n.applications.length)return 0;let e=0;return n.applications.forEach(s=>{let t=parseFloat(s.resources.cpu),a=parseFloat(s.resources.memory),l=(s.resources.replicas.min+s.resources.replicas.max)/2,n=4.99;(t>1||a>2)&&(n=5.49),(t>2||a>4)&&(n=9.49),(t>4||a>8)&&(n=17.49),e+=Math.ceil(l/2)*n,s.volume&&(e+=.044*s.volume.sizeGB)}),e+=22,e*=1.3})(),p="pr"===n.type,u=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-6",children:[(0,s.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold",children:n.name}),p&&(0,s.jsxs)("span",{className:"px-3 py-1 bg-white/20 backdrop-blur-sm rounded-lg text-sm font-medium",children:["PR #",null==(l=n.prSource)?void 0:l.prNumber]})]}),(0,s.jsxs)("div",{className:"text-purple-100 text-sm space-y-1",children:[(0,s.jsx)("div",{children:n.baseDomain}),n.publicApplications.length>0&&(0,s.jsxs)("div",{children:[n.publicApplications.length," public application",1!==n.publicApplications.length?"s":""]})]})]})}),(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-purple-100 text-sm mb-1",children:"Estimated Cost"}),(0,s.jsxs)("div",{className:"text-3xl font-bold",children:["‚Ç¨",p?"0.08":m.toFixed(2),(0,s.jsxs)("span",{className:"text-lg font-normal text-purple-100 ml-2",children:["/",p?"2 hours":"month"]})]})]}),p&&n.expiresAt&&(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-purple-100 text-sm mb-1",children:"Expires In"}),(0,s.jsx)("div",{className:"text-2xl font-bold",children:(()=>{if(!n.expiresAt)return null;let e=new Date().getTime(),s=new Date(n.expiresAt).getTime()-e;if(s<=0)return"Expired";let t=Math.floor(s/36e5),a=Math.floor(s%36e5/6e4);return t>0?"".concat(t,"h ").concat(a,"m"):"".concat(a,"m")})()})]})]})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[!p&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-3",children:(0,s.jsxs)("button",{onClick:d,className:"px-4 py-2 bg-purple-100 hover:bg-purple-200 text-purple-900 rounded-lg transition font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üì¶"}),(0,s.jsx)("span",{children:"Add Application"})]})}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsxs)("button",{onClick:i,className:"px-4 py-2 bg-amber-100 hover:bg-amber-200 text-amber-900 rounded-lg transition font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{children:"‚è∏Ô∏è"}),(0,s.jsx)("span",{children:"Pause All Apps"})]}),(0,s.jsxs)("button",{onClick:r,className:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-900 rounded-lg transition font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üìã"}),(0,s.jsx)("span",{children:"Clone"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Environment Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Type"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:"prod"===n.type?"Production":"non-prod"===n.type?"Non-Production":"pr"===n.type?"Pull Request":"Standard"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Created"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:u(n.createdAt)})]}),p&&n.expiresAt&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Expires"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:u(n.expiresAt)})]})]})]}),p&&n.prSource&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Pull Request Details"}),(0,s.jsxs)("div",{className:"space-y-3 bg-blue-50 rounded-lg p-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Repository"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:n.prSource.repository})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"PR Title"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:n.prSource.prTitle})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Branch"}),(0,s.jsx)("div",{className:"font-mono text-sm text-slate-900 bg-white px-2 py-1 rounded",children:n.prSource.branchName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Commit"}),(0,s.jsx)("div",{className:"font-mono text-sm text-slate-900 bg-white px-2 py-1 rounded",children:n.prSource.commitSha.substring(0,7)})]})]}),n.serviceOverride&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Override"}),(0,s.jsxs)("div",{className:"font-medium text-slate-900",children:["Application ",(0,s.jsx)("code",{className:"bg-white px-2 py-0.5 rounded text-sm",children:n.serviceOverride.serviceName})," using custom image"]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Resources"}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"üöÄ"}),(0,s.jsx)("span",{className:"font-medium text-slate-900",children:"Applications"})]}),(0,s.jsx)("span",{className:"text-slate-600",children:n.applications.length})]})})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"üí°"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-blue-900 mb-1",children:"pr"!==n.type?"Manage Applications":"View Only"}),(0,s.jsx)("div",{className:"text-sm text-blue-700",children:"pr"!==n.type?"Click on an application in the sidebar to edit its configuration. Applications can be deployed independently.":"PR environments are read-only. To edit configuration, update the unhazzle.yaml manifest."})]})]})})]})]})}let c=e=>{let s=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,t)=>t?t.toUpperCase():s.toLowerCase());return s.charAt(0).toUpperCase()+s.slice(1)},d=function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter((e,s,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let x=(0,t.forwardRef)((e,s)=>{let{color:a="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:c,iconNode:x,...m}=e;return(0,t.createElement)("svg",{ref:s,...o,width:l,height:l,stroke:a,strokeWidth:r?24*Number(n)/Number(l):n,className:d("lucide",i),...!c&&!(e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0})(m)&&{"aria-hidden":"true"},...m},[...x.map(e=>{let[s,a]=e;return(0,t.createElement)(s,a)}),...Array.isArray(c)?c:[c]])}),m=(e,s)=>{let a=(0,t.forwardRef)((a,l)=>{let{className:n,...r}=a;return(0,t.createElement)(x,{ref:l,iconNode:s,className:d("lucide-".concat(c(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),n),...r})});return a.displayName=c(e),a},p=m("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),u=m("github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),h=m("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);function b(e){var n,r,i,c,d,o,x,m,b,g,j,v,f,N;let{project:y,onSave:w,initialTab:k="general",onCreateEnvironment:C}=e,S=(0,a.useRouter)(),{getActiveEnvironment:A,setActiveEnvironment:P,deleteEnvironment:R}=(0,l.useDeployment)(),[E,z]=(0,t.useState)(y.name),[T,D]=(0,t.useState)(y.slug),[U,I]=(0,t.useState)(y.description||""),[L,M]=(0,t.useState)((null==(n=y.repository)?void 0:n.url)||""),[B,G]=(0,t.useState)((null==(r=y.repository)?void 0:r.branch)||"main"),[F,V]=(0,t.useState)((null==(i=y.repository)?void 0:i.configPath)||"unhazzle.yaml"),[H,O]=(0,t.useState)(null==(g=null==(c=y.repository)?void 0:c.autoDeployEnabled)||g),[q,W]=(0,t.useState)(y.githubPAT||""),[_,Y]=(0,t.useState)(!!y.githubPAT),[Z,$]=(0,t.useState)(null!=(j=null==(d=y.prEnvironmentSettings)?void 0:d.enabled)&&j),[J,Q]=(0,t.useState)(null==(v=null==(o=y.prEnvironmentSettings)?void 0:o.autoCreateOnPR)||v),[K,X]=(0,t.useState)(null==(f=null==(x=y.prEnvironmentSettings)?void 0:x.autoDeleteOnMerge)||f),[ee,es]=(0,t.useState)(null!=(N=null==(m=y.prEnvironmentSettings)?void 0:m.expirationHours)?N:72),[et,ea]=(0,t.useState)((null==(b=y.prEnvironmentSettings)?void 0:b.nameTemplate)||"pr-{number}"),[el,en]=(0,t.useState)(k),[er,ei]=(0,t.useState)(!1),[ec,ed]=(0,t.useState)(null);return(0,t.useEffect)(()=>{en(k)},[k]),(0,s.jsxs)("div",{className:"h-full flex flex-col bg-white",children:[(0,s.jsxs)("div",{className:"flex-none border-b border-gray-200 px-6 py-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Project Settings"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Configure project details, repository integration, and PR environment behavior"})]}),(0,s.jsx)("div",{className:"flex-none border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex space-x-8 px-6",children:[(0,s.jsx)("button",{onClick:()=>en("general"),className:"py-3 text-sm font-medium border-b-2 transition-colors ".concat("general"===el?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"General"}),(0,s.jsx)("button",{onClick:()=>en("environments"),className:"py-3 text-sm font-medium border-b-2 transition-colors ".concat("environments"===el?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Environments"}),(0,s.jsx)("button",{onClick:()=>en("repository"),className:"py-3 text-sm font-medium border-b-2 transition-colors ".concat("repository"===el?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Repository Integration"}),(0,s.jsx)("button",{onClick:()=>en("registry"),className:"py-3 text-sm font-medium border-b-2 transition-colors ".concat("registry"===el?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Container Registry"}),(0,s.jsx)("button",{onClick:()=>en("pr-environments"),className:"py-3 text-sm font-medium border-b-2 transition-colors ".concat("pr-environments"===el?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"PR Environments"})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,s.jsxs)("div",{className:"px-6 py-6 max-w-4xl",children:["environments"===el&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Environments"}),(0,s.jsxs)("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:[(0,s.jsx)("span",{className:"text-base",children:"üåç"}),(0,s.jsx)("span",{children:"Create Environment"})]})]}),(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Est. Cost"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:y.environments.map(e=>{let t=0;return e.applications.length>0&&(e.applications.forEach(e=>{let s=parseFloat(e.resources.cpu),a=parseFloat(e.resources.memory),l=(e.resources.replicas.min+e.resources.replicas.max)/2,n=4.99;(s>1||a>2)&&(n=5.49),(s>2||a>4)&&(n=9.49),(s>4||a>8)&&(n=17.49),t+=Math.ceil(l/2)*n,e.volume&&(t+=.044*e.volume.sizeGB)}),t+=22,t*=1.3),(0,s.jsxs)("tr",{onClick:()=>{P(e.id),S.push("/dashboard?selection=environment&env=".concat(e.id))},className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.baseDomain})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("prod"===e.type?"bg-purple-100 text-purple-800":"non-prod"===e.type?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:"prod"===e.type?"Production":"non-prod"===e.type?"Non-Prod":"Standard"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["‚Ç¨",t.toFixed(2),"/mo"]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsx)("button",{onClick:s=>{s.stopPropagation(),ed({id:e.id,name:e.name})},className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50 transition-colors",title:"Delete Environment",children:(0,s.jsx)(h,{className:"h-4 w-4"})})})]},e.id)})})]})})]}),ec&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Delete Environment?"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Are you sure you want to delete ",(0,s.jsx)("strong",{children:ec.name}),"? This action cannot be undone."]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,s.jsx)("button",{onClick:()=>ed(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{if(!ec)return;let e=y.environments.find(e=>e.id===ec.id);if((null==e?void 0:e.type)==="prod"&&!window.confirm("WARNING: You are about to delete a PRODUCTION environment (".concat(ec.name,"). This action cannot be undone. Are you sure?")))return void ed(null);R(ec.id),ed(null)},className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete"})]})]})}),"general"===el&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),(0,s.jsx)("input",{type:"text",value:E,onChange:e=>{z(e.target.value),ei(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"My Awesome App"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"A friendly name for your project"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Slug"}),(0,s.jsx)("input",{type:"text",value:T,onChange:e=>{D(e.target.value),ei(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"my-awesome-app"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Used in URLs and CLI commands (lowercase, hyphens only)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{value:U,onChange:e=>{I(e.target.value),ei(!0)},rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"A brief description of your project (optional)"})]}),(0,s.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Danger Zone"}),(0,s.jsx)("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-red-900",children:"Delete Project"}),(0,s.jsx)("p",{className:"text-xs text-red-700 mt-1",children:"Permanently delete this project and all its environments"})]}),(0,s.jsx)("button",{className:"px-3 py-1.5 text-sm font-medium text-red-700 border border-red-300 rounded hover:bg-red-100 transition-colors",children:"Delete"})]})})]})]}),"repository"===el&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Repository URL"}),(0,s.jsx)("input",{type:"text",value:L,onChange:e=>{M(e.target.value),ei(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://github.com/username/repo"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"GitHub repository URL"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Branch"}),(0,s.jsx)("input",{type:"text",value:B,onChange:e=>{G(e.target.value),ei(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"main"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Branch used for production deployments"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Config File Path"}),(0,s.jsx)("input",{type:"text",value:F,onChange:e=>{V(e.target.value),ei(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"unhazzle.yaml"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Path to your Unhazzle configuration file in the repository"})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("input",{type:"checkbox",id:"auto-deploy",checked:H,onChange:e=>{O(e.target.checked),ei(!0)},className:"mt-1 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"auto-deploy",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Enable Auto-Deploy"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically deploy when changes are pushed to tracked branches"})]})]}),(0,s.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Connection Status"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Connected to GitHub"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"Last synced: 2 hours ago"})]})})]}),"registry"===el&&(0,s.jsx)("div",{className:"space-y-6",children:_?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-6 space-y-4 text-center animate-in fade-in zoom-in duration-300",children:[(0,s.jsx)("div",{className:"h-12 w-12 bg-green-100 text-green-600 rounded-full flex items-center justify-center",children:(0,s.jsx)(p,{className:"h-6 w-6"})}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h3",{className:"font-medium text-lg",children:"Registry Connected"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground max-w-xs mx-auto text-gray-500",children:"Your project is now authenticated with GitHub. You can select private images when adding applications."})]}),(0,s.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,s.jsx)("button",{onClick:()=>Y(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Update Token"}),(0,s.jsx)("button",{className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",onClick:()=>{let e=A();e?(P(e.id),S.push("/dashboard?selection=environment&env=".concat(e.id))):S.push("/dashboard")},children:"Ready to deploy"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 border rounded-lg bg-muted/30",children:[(0,s.jsx)(u,{className:"h-8 w-8 text-muted-foreground"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h4",{className:"text-sm font-medium",children:"GitHub Container Registry"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Generate a Personal Access Token (Classic) with ",(0,s.jsx)("code",{children:"read:packages"})," scope."]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"pat-token",className:"block text-sm font-medium text-gray-700",children:"Personal Access Token"}),(0,s.jsx)("input",{id:"pat-token",type:"password",placeholder:"ghp_...",value:q,onChange:e=>{W(e.target.value),ei(!0)},className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:()=>S.push("/dashboard"),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Skip for now"}),(0,s.jsx)("button",{onClick:()=>{if(!q.trim())return void alert("Please enter a GitHub Personal Access Token");w({githubPAT:q}),Y(!0),ei(!1)},disabled:!q.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Connect Registry"})]})]})}),"pr-environments"===el&&(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("span",{className:"text-2xl",children:"üöÄ"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-blue-900 mb-2",children:"Coming Soon"}),(0,s.jsx)("p",{className:"text-blue-800 mb-4",children:"PR Environments are a high-priority feature for Unhazzle, but they won't be available in the initial MVP release."}),(0,s.jsx)("p",{className:"text-sm text-blue-700",children:"We're working on a seamless integration with GitHub Actions to automatically spin up ephemeral environments for every pull request. Stay tuned!"})]})]})})]})})]})}function g(e){let{environment:a}=e,[l,r]=(0,t.useState)(!1),{current:i,max:c,breakdown:d}=(0,n.calculateEnvironmentCost)(a),o=c<50?"text-green-600":c<200?"text-yellow-600":"text-orange-600";return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"bg-white border border-slate-200 rounded-lg px-4 py-3 shadow-sm cursor-pointer hover:shadow-md transition",onClick:()=>r(!l),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-slate-600 font-medium mb-1",children:"Monthly Cost"}),(0,s.jsxs)("div",{className:"text-2xl font-bold ".concat(o),children:["‚Ç¨",i.toFixed(2)]})]}),c!==i&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-slate-500 font-medium mb-1",children:"Max (scaled)"}),(0,s.jsxs)("div",{className:"text-lg font-semibold ".concat(o),children:["‚Ç¨",c.toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["prod"===a.type&&(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded font-medium",children:"PRODUCTION"}),(0,s.jsx)("svg",{className:"w-5 h-5 text-slate-400 transition-transform ".concat(l?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),l&&(0,s.jsxs)("div",{className:"absolute top-full mt-2 left-0 right-0 bg-white border border-slate-200 rounded-lg shadow-lg p-4 z-10",children:[(0,s.jsx)("h4",{className:"text-sm font-bold text-slate-900 mb-3",children:"Cost Breakdown"}),d.applications&&d.applications.length>0&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("div",{className:"text-xs font-semibold text-slate-600 mb-2",children:"Applications"}),d.applications.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs py-1",children:[(0,s.jsx)("span",{className:"text-slate-700",children:e.name}),(0,s.jsxs)("span",{className:"font-mono text-slate-900",children:["‚Ç¨",e.current.toFixed(2),e.max!==e.current&&(0,s.jsxs)("span",{className:"text-slate-500",children:[" - ‚Ç¨",e.max.toFixed(2)]})]})]},t))]}),d.database&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("div",{className:"text-xs font-semibold text-slate-600 mb-2",children:"Database"}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs py-1",children:[(0,s.jsx)("span",{className:"text-slate-700",children:"PostgreSQL"}),(0,s.jsxs)("span",{className:"font-mono text-slate-900",children:["‚Ç¨",d.database.toFixed(2)]})]})]}),d.cache&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("div",{className:"text-xs font-semibold text-slate-600 mb-2",children:"Cache"}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs py-1",children:[(0,s.jsx)("span",{className:"text-slate-700",children:"Redis"}),(0,s.jsxs)("span",{className:"font-mono text-slate-900",children:["‚Ç¨",d.cache.toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("div",{className:"text-xs font-semibold text-slate-600 mb-2",children:"Infrastructure"}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs py-1",children:[(0,s.jsx)("span",{className:"text-slate-700",children:"Load Balancer + SSL"}),(0,s.jsxs)("span",{className:"font-mono text-slate-900",children:["‚Ç¨",d.loadBalancer.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs py-1",children:[(0,s.jsx)("span",{className:"text-slate-700",children:"Bandwidth (estimated)"}),(0,s.jsxs)("span",{className:"font-mono text-slate-900",children:["‚Ç¨",d.bandwidth.toFixed(2)]})]})]}),(0,s.jsx)("div",{className:"border-t border-slate-200 pt-2 mt-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm font-bold",children:[(0,s.jsx)("span",{className:"text-slate-900",children:"Total"}),(0,s.jsxs)("span",{className:"font-mono ".concat(o),children:["‚Ç¨",i.toFixed(2)," - ‚Ç¨",c.toFixed(2),"/mo"]})]})}),(0,s.jsx)("div",{className:"mt-3 text-xs text-slate-500",children:"üí° Prices based on Hetzner Cloud instances in Germany"})]})]})}function j(e){let{sourceEnvironment:a,onClose:l,onConfirm:n}=e,[r,i]=(0,t.useState)("".concat(a.name,"-copy")),[c,d]=(0,t.useState)(!1),[o,x]=(0,t.useState)(!1);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-200",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Clone Environment"}),(0,s.jsx)("p",{className:"text-slate-600 mt-1",children:"Create a copy of this environment's configuration"})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-2",children:"Source Environment"}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900",children:a.name}),(0,s.jsx)("div",{className:"text-sm text-slate-600 mt-1",children:a.baseDomain})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"New Environment Name"}),(0,s.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"staging",autoFocus:!0}),(0,s.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Lowercase letters, numbers, and hyphens only. 3-63 characters."})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("input",{type:"checkbox",id:"autoDeploy",checked:c,onChange:e=>d(e.target.checked),className:"mt-1 h-4 w-4 text-purple-600 border-slate-300 rounded focus:ring-purple-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"autoDeploy",className:"text-sm font-medium text-slate-900 block",children:"Auto-deploy after cloning"}),(0,s.jsx)("p",{className:"text-xs text-slate-600 mt-1",children:"If checked, the new environment will be deployed immediately. Otherwise, it will be created in a 'provisioning' state waiting for deployment."})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-3",children:"What will be cloned:"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[(0,s.jsx)("span",{className:"text-green-600",children:"‚úì"}),(0,s.jsxs)("span",{children:[a.applications.length," application",1!==a.applications.length?"s":""," (configuration only)"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[(0,s.jsx)("span",{className:"text-green-600",children:"‚úì"}),(0,s.jsx)("span",{children:"Environment variables"})]})]})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"‚ÑπÔ∏è"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-blue-900",children:[(0,s.jsx)("strong",{children:"Note:"})," Only configuration is cloned. Runtime data, logs, and metrics are not copied."]})]})}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-4 border border-purple-200",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-1",children:"Estimated Monthly Cost"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-slate-900",children:["‚Ç¨169",(0,s.jsx)("span",{className:"text-lg font-normal text-slate-600",children:"/month"})]})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:l,disabled:o,className:"px-6 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{r.trim()&&(x(!0),setTimeout(()=>{n(r.trim(),c),x(!1)},1e3))},disabled:o||!r.trim(),className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"Cloning..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"üìã"}),(0,s.jsx)("span",{children:"Clone Environment"})]})})]})]})})}function v(e){let{environment:a,onClose:l,onConfirm:n}=e,[r,i]=(0,t.useState)(!1),[c,d]=(0,t.useState)(""),[o,x]=(0,t.useState)(!1);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-6 border-b border-slate-200",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-3xl",children:"‚è∏Ô∏è"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Pause Environment"}),(0,s.jsxs)("p",{className:"text-slate-600 mt-1",children:['Temporarily stop "',a.name,'" to save costs']})]})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-3",children:"When paused, this environment will:"}),(0,s.jsxs)("div",{className:"space-y-2 bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,s.jsxs)("div",{className:"flex items-start gap-2 text-sm text-blue-900",children:[(0,s.jsx)("span",{className:"text-lg",children:"üì¶"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Applications:"})," Scale all replicas to 0 (no running instances)"]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2 text-sm text-blue-900",children:[(0,s.jsx)("span",{className:"text-lg",children:"üåê"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Domain:"})," Will return 503 Service Unavailable"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("input",{type:"checkbox",id:"useSchedule",checked:o,onChange:e=>x(e.target.checked),className:"h-4 w-4 text-purple-600 border-slate-300 rounded focus:ring-purple-500"}),(0,s.jsx)("label",{htmlFor:"useSchedule",className:"text-sm font-medium text-slate-900",children:"Set Pause Schedule (Cron)"})]}),o&&(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"0 18 * * 1-5",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm"}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Example: ",(0,s.jsx)("code",{children:"0 18 * * 1-5"})," (Every weekday at 6 PM)"]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-6 border-2 border-green-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-green-900",children:"Estimated Monthly Savings"}),(0,s.jsx)("span",{className:"text-4xl",children:"üí∞"})]}),(0,s.jsxs)("div",{className:"text-4xl font-bold text-green-900",children:["‚Ç¨",169,(0,s.jsx)("span",{className:"text-lg font-normal text-green-700 ml-2",children:"/month"})]}),(0,s.jsxs)("div",{className:"text-sm text-green-700 mt-2",children:["Pay only for persistent storage (~‚Ç¨","8.45","/month)"]})]}),(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"üí°"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-yellow-900 mb-1",children:"Good to know:"}),(0,s.jsxs)("ul",{className:"text-sm text-yellow-800 space-y-1 list-disc list-inside",children:[(0,s.jsx)("li",{children:"Configuration is preserved - you can resume anytime"}),(0,s.jsx)("li",{children:"Application data in volumes is safe in persistent storage"}),(0,s.jsx)("li",{children:"Environment URLs will be unavailable until resumed"}),(0,s.jsx)("li",{children:"Resume takes ~30 seconds to restore services"})]})]})]})})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:l,disabled:r,className:"px-6 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{i(!0),setTimeout(()=>{n(o?c:void 0),i(!1)},1e3)},disabled:r,className:"px-6 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"Pausing..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"‚è∏Ô∏è"}),(0,s.jsx)("span",{children:"Pause Environment"})]})})]})]})})}function f(e){let{environment:a,onClose:l,onConfirm:n}=e,[r,i]=(0,t.useState)(!1);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-6 border-b border-slate-200",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-3xl",children:"‚ñ∂Ô∏è"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Resume Environment"}),(0,s.jsxs)("p",{className:"text-slate-600 mt-1",children:['Restore "',a.name,'" to active state']})]})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-3",children:"Resuming will:"}),(0,s.jsxs)("div",{className:"space-y-2 bg-green-50 rounded-lg p-4 border border-green-200",children:[(0,s.jsxs)("div",{className:"flex items-start gap-2 text-sm text-green-900",children:[(0,s.jsx)("span",{className:"text-lg",children:"üì¶"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Applications:"})," Scale replicas back to configured values"]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2 text-sm text-green-900",children:[(0,s.jsx)("span",{className:"text-lg",children:"üåê"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Domain:"})," Will be accessible after ~30 seconds"]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-3",children:"Resume Timeline:"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-bold text-sm",children:"1"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-slate-700",children:[(0,s.jsx)("strong",{children:"0-10s:"})," Provisioning infrastructure"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-bold text-sm",children:"2"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-slate-700",children:[(0,s.jsx)("strong",{children:"10-20s:"})," Preparing application services"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-bold text-sm",children:"3"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-slate-700",children:[(0,s.jsx)("strong",{children:"20-30s:"})," Deploying applications"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-green-600 font-bold text-sm",children:"‚úì"}),(0,s.jsx)("div",{className:"flex-1 text-sm font-medium text-green-700",children:"Environment ready!"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 rounded-lg p-4 border border-slate-200",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-1",children:"Cost Impact"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-slate-900",children:["‚Ç¨169",(0,s.jsx)("span",{className:"text-lg font-normal text-slate-600",children:"/month"})]}),(0,s.jsx)("div",{className:"text-sm text-slate-600 mt-1",children:"Billing resumes immediately upon starting services"})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:l,disabled:r,className:"px-6 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{i(!0),setTimeout(()=>{n(),i(!1)},1e3)},disabled:r,className:"px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"Resuming..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"‚ñ∂Ô∏è"}),(0,s.jsx)("span",{children:"Resume Environment"})]})})]})]})})}function N(e){let{onClose:a,onConfirm:l}=e,[n,r]=(0,t.useState)(""),[i,c]=(0,t.useState)("non-prod"),[d,o]=(0,t.useState)(!1),x=n.length>=3&&n.length<=63&&/^[a-z0-9]([a-z0-9-]{1,61}[a-z0-9])$/.test(n);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-200",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Create Environment"}),(0,s.jsx)("p",{className:"text-slate-600 mt-1",children:"Add a new environment to your project"})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Environment Name *"}),(0,s.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value.toLowerCase()),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"staging",autoFocus:!0}),n&&!x&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"3-63 characters, lowercase alphanumeric + hyphens, start/end with alphanumeric"}),(0,s.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Lowercase letters, numbers, and hyphens only."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Environment Type *"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{onClick:()=>c("non-prod"),className:"p-4 border-2 rounded-lg transition text-left ".concat("non-prod"===i?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Non-Production"}),(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"Development, testing, staging"})]}),(0,s.jsxs)("button",{onClick:()=>c("prod"),className:"p-4 border-2 rounded-lg transition text-left ".concat("prod"===i?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Production"}),(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"Live, customer-facing"})]})]})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:a,disabled:d,className:"px-6 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{x&&(o(!0),setTimeout(()=>{l(n,i),o(!1)},1e3))},disabled:d||!x,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"Creating..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"‚ú®"}),(0,s.jsx)("span",{children:"Create Environment"})]})})]})]})})}function y(e){let{onClose:l,onAdd:n,availableImages:r=[],githubPAT:i}=e,c=(0,a.useRouter)(),[d,o]=(0,t.useState)(""),[x,m]=(0,t.useState)(""),[p,u]=(0,t.useState)(i?"github":"public"),[h,b]=(0,t.useState)({}),g=e=>e?e.length<3||e.length>63?"Name must be 3-63 characters":/^[a-z0-9]([a-z0-9-]{1,61}[a-z0-9])?$/.test(e)?void 0:"Name must be lowercase alphanumeric with hyphens, start and end with alphanumeric":"Application name is required",j=e=>e?/^[a-z0-9\.\-\/]+:[a-z0-9\.\-]+$/i.test(e)?void 0:"Image URL must be in format: registry/image:tag or image:tag":"Image URL is required";return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-6 rounded-t-xl",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-1",children:"Add Application"}),(0,s.jsx)("p",{className:"text-purple-100 text-sm",children:"Deploy a new application from any image"})]}),(0,s.jsx)("button",{onClick:l,className:"text-white hover:bg-white/20 rounded-lg p-2 transition",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-900 mb-3",children:"Image Source"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("button",{onClick:()=>u("public"),className:"p-4 border-2 rounded-lg transition text-left ".concat("public"===p?"border-purple-600 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Public Registry"}),(0,s.jsx)("div",{className:"text-xs text-slate-600",children:"Docker Hub, Quay.io, etc."})]}),(0,s.jsxs)("button",{onClick:()=>u("github"),className:"p-4 border-2 rounded-lg transition text-left ".concat("github"===p?"border-purple-600 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Private GitHub"}),(0,s.jsx)("div",{className:"text-xs text-slate-600",children:"ghcr.io (Requires PAT)"})]})]})]}),"github"!==p||i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Image URL"}),"github"===p?(0,s.jsxs)("select",{value:x,onChange:e=>{let s=e.target.value;m(s),b(e=>({...e,imageUrl:void 0}));let t=r.find(e=>"ghcr.io/".concat(e.name,":").concat(e.tag)===s);if(t){var a;let e=(null==(a=t.name.split("/").pop())?void 0:a.split(":")[0].toLowerCase().replace(/[^a-z0-9-]/g,"-"))||"";e&&(o(e),b(e=>({...e,name:void 0})))}},className:"w-full px-4 py-3 border rounded-lg font-mono text-sm focus:ring-2 focus:ring-purple-600 focus:border-transparent ".concat(h.imageUrl?"border-red-300":"border-slate-300"),children:[(0,s.jsx)("option",{value:"",children:"Select an image..."}),r.map((e,t)=>(0,s.jsxs)("option",{value:"ghcr.io/".concat(e.name,":").concat(e.tag),children:[e.name,":",e.tag]},t))]}):(0,s.jsx)("input",{type:"text",value:x,onChange:e=>(e=>{m(e);let s=j(e);if(b(e=>({...e,imageUrl:s})),!d&&r.length>0){let s=r.find(s=>"ghcr.io/".concat(s.name,":").concat(s.tag)===e||"".concat(s.name,":").concat(s.tag)===e);if(s){var t;let e=(null==(t=s.name.split("/").pop())?void 0:t.split(":")[0].toLowerCase().replace(/[^a-z0-9-]/g,"-"))||"";e&&(o(e),b(e=>({...e,name:void 0})))}}})(e.target.value),placeholder:"nginx:alpine",className:"w-full px-4 py-3 border rounded-lg font-mono text-sm focus:ring-2 focus:ring-purple-600 focus:border-transparent ".concat(h.imageUrl?"border-red-300":"border-slate-300")}),h.imageUrl&&(0,s.jsx)("p",{className:"mt-2 text-sm text-red-600",children:h.imageUrl})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Application Name"}),(0,s.jsx)("input",{type:"text",value:d,onChange:e=>(e=>{o(e);let s=g(e);b(e=>({...e,name:s}))})(e.target.value),placeholder:"my-api-service",className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent ".concat(h.name?"border-red-300":"border-slate-300")}),h.name&&(0,s.jsx)("p",{className:"mt-2 text-sm text-red-600",children:h.name}),(0,s.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:"3-63 characters, lowercase alphanumeric with hyphens"})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"üí°"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-blue-900 mb-1 text-sm",children:"Smart Defaults"}),(0,s.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[(0,s.jsx)("div",{children:"‚Ä¢ Resources: 1 vCPU, 2GB RAM, 2-10 replicas"}),(0,s.jsx)("div",{children:"‚Ä¢ Health check: HTTP on port 3000"}),(0,s.jsx)("div",{children:"‚Ä¢ Applications are private by default (change later)"}),(0,s.jsx)("div",{children:"‚Ä¢ Private applications accessible via internal DNS"})]})]})]})})]}):(0,s.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"text-2xl",children:"üîí"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold text-amber-900 mb-2",children:"Registry Not Connected"}),(0,s.jsx)("p",{className:"text-sm text-amber-800 mb-4",children:"You need to connect your GitHub Container Registry to access private images. You can either connect your registry or use a public image instead."}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>u("public"),className:"px-4 py-2 bg-white text-amber-900 border border-amber-300 rounded-lg text-sm font-medium hover:bg-amber-50 transition",children:"Use Public Image"}),(0,s.jsx)("button",{onClick:()=>{c.push("/dashboard?selection=project-settings&tab=registry"),l()},className:"px-4 py-2 bg-amber-600 text-white rounded-lg text-sm font-medium hover:bg-amber-700 transition",children:"Connect Registry"})]})]})]})})]}),(0,s.jsxs)("div",{className:"border-t border-slate-200 p-6 flex items-center justify-between bg-slate-50 rounded-b-xl",children:[(0,s.jsx)("button",{onClick:l,className:"px-6 py-2 text-slate-600 hover:text-slate-900 font-medium transition",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{let e=g(d),s=j(x);if(e||s)return void b({name:e,imageUrl:s});n({name:d,imageUrl:x,exposure:"private"}),l()},disabled:!!h.name||!!h.imageUrl||!d||!x||"github"===p&&!i,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Application"})]})]})})}function w(e){let{applicationName:t,onClose:a,onConfirm:l}=e;return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white p-6 rounded-t-xl",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"text-3xl",children:"üóëÔ∏è"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-1",children:"Remove Application"}),(0,s.jsx)("p",{className:"text-red-100 text-sm",children:"This action cannot be undone"})]})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,s.jsxs)("p",{className:"text-slate-900",children:["Are you sure you want to remove the application ",(0,s.jsxs)("span",{className:"font-semibold text-red-700",children:['"',t,'"']}),"?"]})}),(0,s.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"‚ö†Ô∏è"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-amber-900 mb-1 text-sm",children:"Warning"}),(0,s.jsxs)("div",{className:"text-xs text-amber-700 space-y-1",children:[(0,s.jsx)("div",{children:"‚Ä¢ All application configurations will be lost"}),(0,s.jsx)("div",{children:"‚Ä¢ Environment variables will be removed"}),(0,s.jsx)("div",{children:"‚Ä¢ This change takes effect immediately in demo mode"})]})]})]})})]}),(0,s.jsxs)("div",{className:"border-t border-slate-200 p-6 flex items-center justify-between bg-slate-50 rounded-b-xl",children:[(0,s.jsx)("button",{onClick:a,className:"px-6 py-2 text-slate-600 hover:text-slate-900 font-medium transition",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{l(),a()},className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg font-semibold transition shadow-lg",children:"Remove Application"})]})]})})}function k(e){var a;let{application:l,availableTargets:n,onClose:r,onConfirm:i}=e,[c,d]=(0,t.useState)((null==(a=n[0])?void 0:a.id)||""),[o,x]=(0,t.useState)(!1);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-200",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Promote Application"}),(0,s.jsxs)("p",{className:"text-slate-600 mt-1",children:["Promote ",(0,s.jsx)("span",{className:"font-semibold",children:l.name})," to another environment."]})]}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Target Environment"}),0===n.length?(0,s.jsx)("div",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded-lg",children:"No other environments available. Create a new environment first."}):(0,s.jsx)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:n.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (",e.type,")"]},e.id))})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"‚ÑπÔ∏è"}),(0,s.jsx)("div",{className:"flex-1 text-sm text-blue-900",children:"This will copy the application configuration (image, resources, env vars) to the target environment."})]})})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:r,disabled:o,className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{c&&(x(!0),setTimeout(()=>{i(c),x(!1)},1e3))},disabled:o||!c,className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"Promoting..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"üöÄ"}),(0,s.jsx)("span",{children:"Promote"})]})})]})]})})}function C(e){let{applicationName:a,onClose:l,onConfirm:n}=e,[r,i]=(0,t.useState)(!1),[c,d]=(0,t.useState)(""),[o,x]=(0,t.useState)(!1);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[(0,s.jsx)("div",{className:"p-6 border-b border-slate-200",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-3xl",children:"‚è∏Ô∏è"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Pause Application"}),(0,s.jsxs)("p",{className:"text-slate-600 mt-1",children:["Stop ",(0,s.jsx)("span",{className:"font-semibold",children:a})," to save resources."]})]})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsx)("div",{className:"text-sm text-blue-900",children:"This will scale the application to 0 replicas. It will not be accessible until resumed."})}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("input",{type:"checkbox",id:"useScheduleApp",checked:o,onChange:e=>x(e.target.checked),className:"h-4 w-4 text-purple-600 border-slate-300 rounded focus:ring-purple-500"}),(0,s.jsx)("label",{htmlFor:"useScheduleApp",className:"text-sm font-medium text-slate-900",children:"Set Pause Schedule (Cron)"})]}),o&&(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"0 18 * * 1-5",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm"}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Example: ",(0,s.jsx)("code",{children:"0 18 * * 1-5"})," (Every weekday at 6 PM)"]})]})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:l,disabled:r,className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{i(!0),setTimeout(()=>{n(o?c:void 0),i(!1)},1e3)},disabled:r,className:"px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"Pausing..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"‚è∏Ô∏è"}),(0,s.jsx)("span",{children:"Pause"})]})})]})]})})}function S(e){var s;if(!e.project)return"# No project configuration found";let t=e.project.environments[0];if(!t)return"# No environment found";let a="version: 1\nproject: ".concat(e.project.slug,"\n\nenvironments:\n  ").concat(t.name,":\n    region: ").concat((null==(s=e.region)?void 0:s.code)||"eu-central","\n    \n    applications:");return t.applications.forEach(e=>{a+="\n      - name: ".concat(e.name,"\n        image: ").concat(e.imageUrl,"\n        replicas: ").concat(e.resources.replicas.min,"-").concat(e.resources.replicas.max,"\n        resources:\n          cpu: ").concat(e.resources.cpu,"\n          memory: ").concat(e.resources.memory,"\n        exposure: ").concat(e.exposure,"\n        port: ").concat(e.port),e.environmentVariables.length>0&&(a+="\n        env:",e.environmentVariables.forEach(e=>{a+="\n          - ".concat(e.key,": ").concat(e.masked?"***":e.value)}))}),t.database&&(a+="\n\n    database:\n      engine: ".concat(t.database.engine,"\n      version: ").concat(t.database.version,"\n      size: ").concat(t.database.storage)),t.cache&&(a+="\n\n    cache:\n      engine: ".concat(t.cache.engine,"\n      version: ").concat(t.cache.version,"\n      memory: ").concat(t.cache.memory)),a}function A(){return"name: Deploy to Unhazzle\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      \n      - name: Deploy to Unhazzle\n        uses: unhazzle/deploy-action@v1\n        with:\n          token: ${{ secrets.UNHAZZLE_TOKEN }}\n          project: my-awesome-project\n          environment: ${{ github.event_name == 'pull_request' && 'pr-' + github.event.number || 'production' }}"}function P(e){var t,a;let{state:l}=e,n=(null==(t=l.project)?void 0:t.environments.find(e=>e.id===l.activeEnvironmentId))||(null==(a=l.project)?void 0:a.environments[0]);return n?(0,s.jsx)("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-8 overflow-x-auto",children:(0,s.jsxs)("div",{className:"min-w-[600px] flex flex-col items-center gap-8",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:"‚òÅÔ∏è"}),(0,s.jsx)("div",{className:"text-sm font-bold text-slate-600",children:"Internet"}),(0,s.jsx)("div",{className:"h-8 w-0.5 bg-slate-300 my-2"})]}),(0,s.jsxs)("div",{className:"bg-white border-2 border-blue-200 rounded-lg p-4 shadow-sm w-64 text-center relative",children:[(0,s.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded-full font-medium",children:"Load Balancer"}),(0,s.jsx)("div",{className:"text-2xl mb-1",children:"‚öñÔ∏è"}),(0,s.jsx)("div",{className:"font-mono text-xs text-slate-500 truncate",children:n.baseDomain})]}),(0,s.jsx)("div",{className:"h-8 w-0.5 bg-slate-300"}),(0,s.jsx)("div",{className:"flex gap-6 justify-center flex-wrap",children:n.applications.map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)("div",{className:"bg-white border-2 ".concat("public"===e.exposure?"border-purple-200":"border-slate-200"," rounded-lg p-4 shadow-sm w-48 text-center relative"),children:[(0,s.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 ".concat("public"===e.exposure?"bg-purple-100 text-purple-800":"bg-slate-100 text-slate-800"," text-xs px-2 py-0.5 rounded-full font-medium"),children:"public"===e.exposure?"Public App":"Private App"}),(0,s.jsx)("div",{className:"text-2xl mb-1",children:"üöÄ"}),(0,s.jsx)("div",{className:"font-bold text-slate-900 text-sm truncate",children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[e.resources.replicas.min," replicas"]})]}),(e.serviceAccess.database||e.serviceAccess.cache)&&(0,s.jsx)("div",{className:"h-8 w-0.5 bg-slate-300 my-2"})]},e.id))}),(n.database||n.cache)&&(0,s.jsxs)("div",{className:"flex gap-6 justify-center border-t-2 border-dashed border-slate-300 pt-8 w-full",children:[n.database&&(0,s.jsxs)("div",{className:"bg-white border-2 border-green-200 rounded-lg p-4 shadow-sm w-48 text-center relative",children:[(0,s.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded-full font-medium",children:"Database"}),(0,s.jsx)("div",{className:"text-2xl mb-1",children:"üêò"}),(0,s.jsx)("div",{className:"font-bold text-slate-900 text-sm",children:"PostgreSQL"})]}),n.cache&&(0,s.jsxs)("div",{className:"bg-white border-2 border-red-200 rounded-lg p-4 shadow-sm w-48 text-center relative",children:[(0,s.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-red-100 text-red-800 text-xs px-2 py-0.5 rounded-full font-medium",children:"Cache"}),(0,s.jsx)("div",{className:"text-2xl mb-1",children:"‚ö°"}),(0,s.jsx)("div",{className:"font-bold text-slate-900 text-sm",children:"Redis"})]})]})]})}):(0,s.jsx)("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-12 text-center",children:(0,s.jsx)("p",{className:"text-slate-500",children:"No environment selected to visualize."})})}function R(e){let{application:a,environmentId:n,onComplete:r}=e,{state:i,updateApplicationStatus:c}=(0,l.useDeployment)(),[d,o]=(0,t.useState)([]),[x,m]=(0,t.useState)(!0),[p,u]=(0,t.useState)(0),[h,b]=(0,t.useState)(!1),g=(0,t.useRef)(!1),j=(0,t.useRef)([]);if((0,t.useEffect)(()=>{0===d.length&&o(((e,s)=>{var t,a;let l=[];return l.push({id:"validate",label:"Validating configuration",description:"Checking application settings",duration:2,status:"pending",logs:[]}),l.push({id:"image",label:"Pulling container image",description:"Fetching from registry",duration:5,status:"pending",logs:[]}),e.serviceAccess.database&&(null==(t=s.resources)?void 0:t.database)&&l.push({id:"database",label:"Connecting to database",description:"Injecting database credentials",duration:2,status:"pending",logs:[]}),e.serviceAccess.cache&&(null==(a=s.resources)?void 0:a.cache)&&l.push({id:"cache",label:"Connecting to cache",description:"Injecting cache credentials",duration:2,status:"pending",logs:[]}),l.push({id:"deploy",label:"Starting replicas",description:"Launching ".concat(e.resources.replicas.min," instance(s)"),duration:6,status:"pending",logs:[]}),l.push({id:"health",label:"Running health checks",description:"Verifying application is responding",duration:4,status:"pending",logs:[]}),l.push({id:"complete",label:"Deployment complete",description:"Application is live!",duration:1,status:"pending",logs:[]}),l})(a,i))},[a,i,d.length]),(0,t.useEffect)(()=>{if(g.current||0===d.length||"deploying"!==a.status)return;g.current=!0;let e=[...d],s=t=>{if(t>=e.length){c(a.id,"running"),b(!0);return}let l=e[t];u(t),o(e=>e.map((e,s)=>s===t?{...e,status:"running"}:e));let n=((e,s,t)=>{var a,l;let n=(null==(a=s.imageUrl.split("/").pop())?void 0:a.split(":")[0])||"application";switch(e){case"validate":return["‚úì Configuration validated","‚úì Resource quotas checked","‚úì ".concat(s.resources.replicas.min," replica(s) requested")];case"image":return["‚Üí Authenticating with registry","‚Üí Pulling image: ".concat(s.imageUrl),"‚Üí Extracting layers","‚Üí Verifying image signature","‚úì Image ready"];case"database":return["‚Üí Retrieving database credentials","‚Üí Injecting DATABASE_URL","‚úì Database connection configured"];case"cache":return["‚Üí Retrieving cache credentials","‚Üí Injecting CACHE_URL","‚úì Cache connection configured"];case"deploy":let r=["‚Üí Scheduling pods","‚Üí Allocating resources"];for(let e=1;e<=s.resources.replicas.min;e++)r.push("‚Üí Starting replica ".concat(e,"/").concat(s.resources.replicas.min));return r.push("‚Üí Configuring DNS: ".concat(n,".internal")),r.push("‚úì All replicas running"),r;case"health":return["‚Üí Waiting for services to start","‚Üí Checking ".concat((null==(l=s.healthCheck)?void 0:l.path)||"/health"),"‚Üí Testing connectivity","‚úì Health checks passed"];case"complete":return["üéâ Deployment successful!"];default:return[]}})(l.id,a,0),r=0,i=setInterval(()=>{r<n.length?(o(e=>e.map((e,s)=>s===t?{...e,logs:[...e.logs,n[r]]}:e)),r++):clearInterval(i)},Math.max(300,1e3*l.duration/(n.length+1)));j.current.push(i);let d=setTimeout(()=>{o(e=>e.map((e,s)=>s===t?{...e,status:"completed"}:e)),s(t+1)},1e3*l.duration);j.current.push(d)};return s(0),()=>{j.current.forEach(e=>clearTimeout(e)),j.current=[]}},[d.length,a.status]),(0,t.useEffect)(()=>{if(!h)return;let e=setTimeout(()=>{m(!1)},2e3),s=setTimeout(()=>{r()},5e3);return()=>{clearTimeout(e),clearTimeout(s)}},[h]),0===d.length)return null;let v=d.filter(e=>"completed"===e.status).length,f=d.length,N=v/f*100;return(0,s.jsxs)("div",{className:"border border-blue-200 rounded-lg overflow-hidden bg-blue-50",children:[(0,s.jsxs)("button",{onClick:()=>m(!x),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-blue-100 transition",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"animate-spin text-blue-600",children:"‚öôÔ∏è"}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900",children:"Deploying Application"}),(0,s.jsxs)("div",{className:"text-sm text-slate-600",children:[v," of ",f," steps completed"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"text-sm text-slate-600",children:[Math.round(N),"%"]}),(0,s.jsx)("span",{className:"transform transition ".concat(x?"rotate-180":""),children:"‚ñº"})]})]}),(0,s.jsx)("div",{className:"px-4 pb-2",children:(0,s.jsx)("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-purple-600 to-blue-600 transition-all duration-500",style:{width:"".concat(N,"%")}})})}),x&&(0,s.jsx)("div",{className:"px-4 pb-4 space-y-3 max-h-96 overflow-y-auto",children:d.map((e,t)=>(0,s.jsxs)("div",{className:"border rounded-lg transition ".concat("running"===e.status?"border-blue-400 bg-blue-50":"completed"===e.status?"border-green-300 bg-green-50":"border-slate-200 bg-white"),children:[(0,s.jsxs)("div",{className:"px-3 py-2 flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex-shrink-0",children:["completed"===e.status&&(0,s.jsx)("span",{className:"text-green-600",children:"‚úì"}),"running"===e.status&&(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),"pending"===e.status&&(0,s.jsx)("span",{className:"text-slate-400",children:"‚óã"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"font-medium text-slate-900 text-sm",children:e.label}),(0,s.jsx)("div",{className:"text-xs text-slate-600",children:e.description})]})]}),e.logs.length>0&&(0,s.jsx)("div",{className:"px-3 pb-2",children:(0,s.jsx)("div",{className:"bg-slate-900 rounded p-2 font-mono text-xs text-slate-300 space-y-1",children:e.logs.map((e,t)=>(0,s.jsx)("div",{className:"animate-fadeIn",children:e},t))})})]},e.id))})]})}function E(){let{state:e,createEnvironment:n,setActiveEnvironment:r}=(0,l.useDeployment)(),i=(0,a.useRouter)(),[c,d]=(0,t.useState)(""),[o,x]=(0,t.useState)("non-prod"),[m,p]=(0,t.useState)(!1),u=c.length>=3&&c.length<=63&&/^[a-z0-9]([a-z0-9-]{1,61}[a-z0-9])$/.test(c);return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-8 px-4",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Create Your First Environment"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Environments isolate your deployments. Start with development, staging, or production."})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Environment Name *"}),(0,s.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value.toLowerCase()),placeholder:"development",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),c&&!u&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"3-63 characters, lowercase alphanumeric + hyphens, start/end with alphanumeric"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Environment Type *"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{onClick:()=>x("non-prod"),className:"p-4 border-2 rounded-lg transition ".concat("non-prod"===o?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Non-Production"}),(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"Development, testing, staging"})]}),(0,s.jsxs)("button",{onClick:()=>x("prod"),className:"p-4 border-2 rounded-lg transition ".concat("prod"===o?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Production"}),(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"Live, customer-facing"})]})]})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"üí°"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-blue-900",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"Naming Recommendation"}),(0,s.jsx)("p",{children:'Use descriptive names like "production", "staging", "development", or "test". Environment type helps Unhazzle apply appropriate safeguards (e.g., extra confirmations for production changes).'})]})]})}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:()=>{if(!u||!e.project)return;p(!0);let s=n({name:c,type:o,deployed:!1,pendingChanges:!1});setTimeout(()=>{p(!1),r(s.id),i.push("/dashboard?selection=project-settings&tab=registry")},500)},disabled:!u||m,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"Creating..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"Create Environment"}),(0,s.jsx)("span",{children:"‚Üí"})]})})})]}),e.project&&(0,s.jsxs)("div",{className:"mt-6 text-center text-sm text-slate-600",children:["Project: ",(0,s.jsx)("span",{className:"font-medium text-slate-900",children:e.project.name}),e.region&&(0,s.jsxs)("span",{className:"ml-4",children:[(0,s.jsx)("span",{role:"img","aria-label":e.region.country,children:e.region.flag})," ",e.region.label]})]})]})})}let z=[{name:"acme/ecommerce-shop",tag:"v2.1.0",size:"324 MB",lastUpdated:"2024-10-28T14:30:00Z",description:"Main e-commerce application with Next.js frontend"},{name:"acme/api-gateway",tag:"v1.5.2",size:"156 MB",lastUpdated:"2024-10-25T09:15:00Z",description:"GraphQL API gateway service"},{name:"acme/payment-processor",tag:"v3.0.1",size:"89 MB",lastUpdated:"2024-10-30T16:45:00Z",description:"Payment processing microservice"},{name:"acme/notification-service",tag:"v2.3.0",size:"112 MB",lastUpdated:"2024-10-29T11:20:00Z",description:"Email and SMS notification handler"},{name:"acme/background-worker",tag:"v1.8.4",size:"78 MB",lastUpdated:"2024-10-27T13:10:00Z",description:"Background job processing worker"}];function T(){var e,n,r,i,c;let d=(0,a.useRouter)(),{state:o,removeDatabase:x,removeCache:m,updateApplicationStatus:p}=(0,l.useDeployment)(),[u,h]=(0,t.useState)("projects"),[b,j]=(0,t.useState)(99.98),[v,f]=(0,t.useState)(42),[N,y]=(0,t.useState)(58),[w,k]=(0,t.useState)(1240),[C,P]=(0,t.useState)("all"),[R,z]=(0,t.useState)(!1);if((0,t.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,t.useEffect)(()=>{z(!0)},[]),(0,t.useEffect)(()=>{R&&!o.user&&d.push("/")},[R,o.user,d]),(0,t.useEffect)(()=>{let e=setInterval(()=>{f(e=>Math.max(15,Math.min(80,e+(Math.random()-.5)*10))),y(e=>Math.max(30,Math.min(85,e+(Math.random()-.5)*8))),k(e=>Math.max(800,Math.min(2e3,e+(Math.random()-.5)*200))),j(99.95+.05*Math.random())},3e3);return()=>clearInterval(e)},[]),!R)return null;if(!o.project)return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-8 px-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Dashboard"}),(0,s.jsxs)("p",{className:"text-slate-600",children:["Welcome, ",null==(c=o.user)?void 0:c.name,"!"]})]})})}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-12",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-100 to-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)("svg",{className:"w-12 h-12 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"No Projects Yet"}),(0,s.jsx)("p",{className:"text-slate-600 mb-8 leading-relaxed",children:"Get started by creating your first project. Answer 5 quick questions about your workload, and we'll automatically configure production-ready infrastructure for you."}),(0,s.jsxs)("button",{onClick:()=>d.push("/questionnaire"),className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold shadow-lg inline-flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:"+"}),(0,s.jsx)("span",{children:"Create Your First Project"})]})]})})]})});if(o.project&&0===o.project.environments.length)return(0,s.jsx)(E,{});let T=(null==(e=o.project)?void 0:e.environments.find(e=>e.id===o.activeEnvironmentId))||(null==(n=o.project)?void 0:n.environments[0]);return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-8 px-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Dashboard"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(null==(r=o.domain)?void 0:r.defaultSubdomain)&&(0,s.jsxs)("span",{className:"text-sm text-slate-600",children:["Deployed to: ",(0,s.jsx)("code",{className:"bg-white px-2 py-1 rounded text-xs font-mono",children:o.domain.defaultSubdomain})]}),o.region&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 bg-slate-100 text-slate-700 px-3 py-1 rounded-full text-sm",children:[(0,s.jsx)("span",{role:"img","aria-label":o.region.country,children:o.region.flag}),(0,s.jsx)("span",{children:o.region.label})]}),o.deployed&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"}),"Live"]})]})]}),T&&((null==(i=T.applications)?void 0:i.length)||0)>0&&(0,s.jsx)("div",{className:"ml-6",children:(0,s.jsx)(g,{environment:T})}),!o.project&&(0,s.jsxs)("button",{onClick:()=>d.push("/questionnaire"),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold shadow-lg flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"+"}),(0,s.jsx)("span",{children:"Create Project"})]})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"border-b border-slate-200 flex",children:["projects","logs","metrics","events","settings","nextSteps"].map(e=>(0,s.jsx)("button",{onClick:()=>h(e),className:"flex-1 px-6 py-4 font-medium transition text-center relative ".concat("nextSteps"===e?u===e?"border-b-2 border-amber-500 text-amber-600 bg-amber-50":"border-b-2 border-transparent text-amber-600 hover:text-amber-700 bg-gradient-to-b from-amber-50 to-transparent":u===e?"border-b-2 border-purple-600 text-purple-600 bg-purple-50":"text-slate-600 hover:text-slate-900"),children:(0,s.jsx)("div",{className:"flex items-center justify-center gap-2",children:"nextSteps"===e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"Next Steps"}),(0,s.jsx)("span",{className:"animate-pulse text-lg",children:"‚Üí"}),(0,s.jsx)("span",{className:"inline-block px-2 py-0.5 bg-amber-500 text-white text-xs rounded-full font-bold",children:"IMPORTANT"})]}):e.charAt(0).toUpperCase()+e.slice(1)})},e))}),(0,s.jsxs)("div",{className:"p-6",children:["projects"===u&&(0,s.jsx)(D,{project:o.project,state:o}),"logs"===u&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Application:"}),(0,s.jsxs)("select",{value:C,onChange:e=>P(e.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm bg-white",children:[(0,s.jsx)("option",{value:"all",children:"All Applications"}),o.applications.map((e,t)=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsx)("div",{className:"bg-slate-900 rounded-lg p-4 font-mono text-sm text-green-400 space-y-1 max-h-96 overflow-y-auto",children:(()=>{let e=[];return o.applications.forEach((s,t)=>{("all"===C||C===s.id)&&(e.push({application:s.name,message:"[2025-11-02 14:32:15] Application started successfully"},{application:s.name,message:"[2025-11-02 14:32:17] ‚Üí HTTP server listening on port ".concat(s.port)},{application:s.name,message:"[2025-11-02 14:32:18] ‚úì Health check passed"},{application:s.name,message:"[2025-11-02 14:32:19] ‚Üí Replica 1 reporting healthy"},{application:s.name,message:"[2025-11-02 14:32:20] ‚Üí Replica 2 reporting healthy"}),s.serviceAccess.database&&e.push({application:s.name,message:"[2025-11-02 14:32:16] ‚úì Database connection established"}),s.serviceAccess.cache&&e.push({application:s.name,message:"[2025-11-02 14:32:16] ‚úì Redis cache connected"}),"public"===s.exposure?e.push({application:s.name,message:"[2025-11-02 14:35:42] GET /api/products 200 45ms"},{application:s.name,message:"[2025-11-02 14:35:43] POST /api/cart 201 52ms"},{application:s.name,message:"[2025-11-02 14:35:44] GET /api/checkout 200 38ms"},{application:s.name,message:"[2025-11-02 14:35:45] POST /api/orders 201 127ms"},{application:s.name,message:"[2025-11-02 14:35:46] GET / 200 15ms (cached)"}):e.push({application:s.name,message:"[2025-11-02 14:35:42] Processing background job #1234"},{application:s.name,message:"[2025-11-02 14:35:43] ‚Üí Job completed in 89ms"},{application:s.name,message:"[2025-11-02 14:35:44] Handling internal API call"}))}),e.map((e,t)=>(0,s.jsxs)("div",{children:["all"===C&&(0,s.jsxs)("span",{className:"text-purple-400",children:["[",e.application,"] "]}),e.message]},t))})()})]}),"metrics"===u&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Performance Metrics"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"Average Response Time"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-purple-600",children:"45ms"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"‚Üì 12% from yesterday"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"Error Rate"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-green-600",children:"0.02%"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Excellent reliability"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"99th Percentile (p99)"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-blue-600",children:"234ms"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Well within SLA"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"Requests Today"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-slate-900",children:"1.8M"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"‚Üë 23% from yesterday"})]})]})]}),"events"===u&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Recent Events"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex gap-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,s.jsx)("span",{className:"text-2xl",children:"üì§"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-blue-900",children:"Deployment Completed"}),(0,s.jsx)("p",{className:"text-sm text-blue-700",children:"All replicas healthy and serving traffic"}),(0,s.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"2 hours ago"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("span",{className:"text-2xl",children:"üìä"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Auto-scaling triggered"}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Scaled from 2 to 4 replicas due to high traffic"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"45 minutes ago"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("span",{className:"text-2xl",children:"üîÑ"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Database backup completed"}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Automatic daily backup successful (5.2 GB)"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"1 hour ago"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,s.jsx)("span",{className:"text-2xl",children:"‚úÖ"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-green-900",children:"SSL certificate renewed"}),(0,s.jsx)("p",{className:"text-sm text-green-700",children:"Auto-renewal for HTTPS certificate successful"}),(0,s.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"3 days ago"})]})]})]})]}),"settings"===u&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-purple-50 border border-purple-200 p-6 rounded-lg",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Settings moved to Projects"}),(0,s.jsx)("p",{className:"text-slate-700 mb-4",children:"Edit your current deployment configuration in the Projects tab. Use the left sidebar to pick a resource and the right panel to edit. You can preview and apply staged changes."}),(0,s.jsx)("button",{onClick:()=>h("projects"),className:"px-5 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium",children:"Go to Projects"})]}),(0,s.jsx)("div",{className:"text-xs text-slate-500",children:"Looking for advanced settings? We‚Äôll surface them here soon. For now, everything configurable is available in Projects."})]}),"nextSteps"===u&&(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 p-6 rounded-lg border border-purple-200",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-slate-900 mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üöÄ"}),(0,s.jsx)("span",{children:"Enable Continuous Deployment"})]}),(0,s.jsx)("p",{className:"text-slate-600",children:"Your application is now live! The next step is to enable automatic deployments from your GitHub repository using the Unhazzle CLI and GitHub Actions."}),(0,s.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[(0,s.jsxs)("a",{href:"/unhazzle.io/cli-demo/cli-guide.html",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium",children:["Experience the Unhazzle CLI",(0,s.jsx)("span",{"aria-hidden":"true",children:"‚Üó"})]}),(0,s.jsx)("span",{className:"text-sm text-slate-600",children:"Simulate the same deployment flow directly from your terminal."})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"1"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-slate-900",children:"Export Your Infrastructure Configuration"})]}),(0,s.jsx)("p",{className:"text-slate-600 ml-11",children:"Below is your infrastructure configuration in YAML format. This file describes all your resources, environment variables, and settings. Copy it to your repository for version control and CI/CD integration."}),(0,s.jsx)("div",{className:"ml-11 space-y-3",children:(0,s.jsxs)("div",{className:"bg-slate-900 rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-slate-800 px-4 py-3 flex items-center justify-between border-b border-slate-700",children:[(0,s.jsx)("span",{className:"text-white font-mono text-sm",children:"unhazzle.yaml"}),(0,s.jsx)("button",{onClick:()=>{let e=S(o);navigator.clipboard.writeText(e),alert("YAML copied to clipboard!")},className:"px-3 py-1 bg-purple-600 text-white text-xs rounded hover:bg-purple-700 transition",children:"Copy"})]}),(0,s.jsx)("pre",{className:"p-4 text-white font-mono text-xs overflow-x-auto max-h-72",children:(0,s.jsx)("code",{children:S(o)})})]})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"2"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-slate-900",children:"Add YAML to Your Repository"})]}),(0,s.jsx)("p",{className:"text-slate-600 ml-11",children:"Commit the unhazzle.yaml file to the root of your repository:"}),(0,s.jsxs)("div",{className:"ml-11 bg-slate-100 rounded-lg p-4 font-mono text-sm space-y-1",children:[(0,s.jsx)("div",{className:"text-slate-700",children:"$ git add unhazzle.yaml"}),(0,s.jsx)("div",{className:"text-slate-700",children:'$ git commit -m "Add Unhazzle deployment config"'}),(0,s.jsx)("div",{className:"text-slate-700",children:"$ git push origin main"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"3"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-slate-900",children:"Set Up GitHub Actions Workflow"})]}),(0,s.jsx)("p",{className:"text-slate-600 ml-11",children:"Create a GitHub Actions workflow to automatically deploy on every push:"}),(0,s.jsx)("div",{className:"ml-11 space-y-3",children:(0,s.jsxs)("div",{className:"bg-slate-900 rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-slate-800 px-4 py-3 flex items-center justify-between border-b border-slate-700",children:[(0,s.jsx)("span",{className:"text-white font-mono text-sm",children:".github/workflows/deploy.yml"}),(0,s.jsx)("button",{onClick:()=>{let e=A();navigator.clipboard.writeText(e),alert("Workflow copied to clipboard!")},className:"px-3 py-1 bg-purple-600 text-white text-xs rounded hover:bg-purple-700 transition",children:"Copy"})]}),(0,s.jsx)("pre",{className:"p-4 text-white font-mono text-xs overflow-x-auto max-h-72",children:(0,s.jsx)("code",{children:A()})})]})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"4"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-slate-900",children:"Install Unhazzle CLI"})]}),(0,s.jsx)("p",{className:"text-slate-600 ml-11",children:"Install the Unhazzle CLI locally for development and debugging:"}),(0,s.jsxs)("div",{className:"ml-11 bg-slate-100 rounded-lg p-4 font-mono text-sm space-y-1",children:[(0,s.jsx)("div",{className:"text-slate-700",children:"$ npm install -g @unhazzle/cli"}),(0,s.jsx)("div",{className:"text-slate-700 mt-3",children:"# Or authenticate with GitHub"}),(0,s.jsx)("div",{className:"text-slate-700",children:"$ unhazzle auth login"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"5"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-slate-900",children:"All Set! Continuous Deployment Enabled"})]}),(0,s.jsx)("p",{className:"text-slate-600 ml-11",children:"From now on, every time you push to your main branch:"}),(0,s.jsxs)("div",{className:"ml-11 space-y-2 text-slate-600",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-purple-600 font-bold mt-1",children:"‚Ä¢"}),(0,s.jsx)("span",{children:"GitHub Actions picks up the unhazzle.yaml file"})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-purple-600 font-bold mt-1",children:"‚Ä¢"}),(0,s.jsx)("span",{children:"Unhazzle CLI automatically deploys your app with the exact configuration"})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-purple-600 font-bold mt-1",children:"‚Ä¢"}),(0,s.jsx)("span",{children:"No manual steps, no configuration drift, fully automated"})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-purple-600 font-bold mt-1",children:"‚Ä¢"}),(0,s.jsx)("span",{children:"Deployment status is reflected in your GitHub PR"})]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 p-6 rounded-lg border border-slate-200 space-y-4",children:[(0,s.jsx)("h4",{className:"font-bold text-slate-900",children:"üîß Useful CLI Commands"}),(0,s.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-mono text-slate-700 mb-1",children:"$ unhazzle status"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Check application health and metrics"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-mono text-slate-700 mb-1",children:"$ unhazzle logs --follow"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Stream real-time application logs"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-mono text-slate-700 mb-1",children:"$ unhazzle env set KEY=VALUE"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Update environment variables on the fly"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-mono text-slate-700 mb-1",children:"$ unhazzle deploy --config unhazzle.yaml"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Manual deployment using your YAML config"})]})]})]}),(0,s.jsxs)("div",{className:"text-center p-6 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border border-purple-200",children:[(0,s.jsx)("p",{className:"text-slate-600 mb-4",children:"Want to learn more about continuous deployment?"}),(0,s.jsx)("a",{href:"https://docs.unhazzle.io/cli",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium",children:"Read the CLI Documentation ‚Üí"})]})]})]})]})]})})}function D(e){var n,c,d,o;let{project:x,state:m}=e,p=(0,a.useRouter)(),u=(0,a.useSearchParams)(),{updateApplicationConfig:h,updateResources:g,removeDatabase:S,removeCache:A,removeApplication:R,cloneEnvironment:E,promoteEnvironment:T,deleteEnvironment:D,pauseEnvironment:I,resumeEnvironment:B,updateProject:G,createAppsFromImages:F,getActiveEnvironment:V,updateEnvironmentConfig:H,createEnvironment:O,promoteApplication:q,pauseApplication:W,updateApplicationStatus:_}=(0,l.useDeployment)(),[Y,Z]=(0,t.useState)({kind:"project-settings"}),$=u.get("tab"),[J,Q]=(0,t.useState)(!1),[K,X]=(0,t.useState)(!1),[ee,es]=(0,t.useState)(!1),[et,ea]=(0,t.useState)(!1),[el,en]=(0,t.useState)(!1),[er,ei]=(0,t.useState)(!1),[ec,ed]=(0,t.useState)(!1),[eo,ex]=(0,t.useState)(!1),[em,ep]=(0,t.useState)(null),[eu,eh]=(0,t.useState)(null),[eb,eg]=(0,t.useState)(null),[ej,ev]=(0,t.useState)(null),[ef,eN]=(0,t.useState)(null),[ey,ew]=(0,t.useState)(null),[ek,eC]=(0,t.useState)(!1),[eS,eA]=(0,t.useState)(!1),[eP,eR]=(0,t.useState)(!1),[eE,ez]=(0,t.useState)((null==(n=m.project)?void 0:n.githubPAT)||""),[eT,eD]=(0,t.useState)(!1),[eU,eI]=(0,t.useState)([]),[eL,eM]=(0,t.useState)(!1),[eB,eG]=(0,t.useState)({}),eF=()=>{if(!(null==x?void 0:x.environments))return null;if("application"===Y.kind)for(let s of x.environments){var e;let t=null==(e=s.applications)?void 0:e.find(e=>e.id===Y.id);if(t)return{type:"application",data:t,env:s}}else if("database"===Y.kind){let e=x.environments.find(e=>e.id===Y.envId);if(null==e?void 0:e.database)return{type:"database",data:e.database,env:e}}return null},eV=eF();return((0,t.useEffect)(()=>{let e=u.get("selection"),s=u.get("env"),t=u.get("id");"project-settings"===e?Z({kind:"project-settings"}):"application"===e&&t&&s?Z({kind:"application",id:t,envId:s}):"environment"===e&&s&&Z({kind:"environment",envId:s})},[u]),(0,t.useEffect)(()=>{let e=eF();if("application"===Y.kind&&(null==e?void 0:e.data)){let s=JSON.parse(JSON.stringify(e.data));Array.isArray(s.environmentVariables)||(s.environmentVariables=[]),ev(s)}else"database"===Y.kind&&(null==e?void 0:e.data)?(eN(JSON.parse(JSON.stringify(e.data))),ev(null)):(ev(null),eN(null),ew(null))},[Y,x]),x)?(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,s.jsx)("div",{className:"col-span-12 lg:col-span-4 xl:col-span-3",children:(0,s.jsx)(r,{project:x,selected:Y,onSelect:e=>"add-application"===e.kind?void ea(!0):"create-environment"===e.kind?void en(!0):void Z(e)})}),(0,s.jsxs)("div",{className:"col-span-12 lg:col-span-8 xl:col-span-9",children:["project-settings"===Y.kind&&(0,s.jsx)(b,{project:x,initialTab:"registry"===$||"repository"===$||"pr-environments"===$||"general"===$?$:"general",onSave:e=>{G(e)},onCreateEnvironment:()=>{en(!0)}}),"environment"===Y.kind&&Y.envId&&(()=>{var e;let t=null==(e=x.environments)?void 0:e.find(e=>e.id===Y.envId);return t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i,{environment:t,onClone:()=>Q(!0),onPause:()=>X(!0),onResume:()=>es(!0),onAddApplication:()=>{Z({kind:"add-application",envId:t.id}),ea(!0)}}),J&&(0,s.jsx)(j,{sourceEnvironment:t,onClose:()=>Q(!1),onConfirm:(e,s)=>{E(t.id,e,s),Q(!1)}}),K&&(0,s.jsx)(v,{environment:t,onClose:()=>X(!1),onConfirm:e=>{I(t.id,e),X(!1)}}),ee&&(0,s.jsx)(f,{environment:t,onClose:()=>es(!1),onConfirm:()=>{B(t.id),es(!1)}})]}):null})(),et&&Y.envId&&(0,s.jsx)(y,{onClose:()=>ea(!1),availableImages:(null==(c=m.project)?void 0:c.githubPAT)?z:[],githubPAT:null==(d=m.project)?void 0:d.githubPAT,onAdd:e=>{var s;let{name:t,imageUrl:a,exposure:l}=e,n=V();if(!n)return;let r="app-".concat(Date.now(),"-0");F(n.id,[{name:(null==(s=a.split("/").pop())?void 0:s.split(":")[0])||t,url:a,autoName:t,tag:a.split(":").pop()||"latest",description:"".concat(t," application"),exposure:l}]),ea(!1),setTimeout(()=>{p.push("/dashboard?selection=application&id=".concat(r,"&env=").concat(n.id))},150)}}),er&&em&&(0,s.jsx)(w,{applicationName:em.name,onClose:()=>{ei(!1),ep(null)},onConfirm:()=>{R(em.id,em.envId),ei(!1),ep(null),p.push("/dashboard?selection=environment&env=".concat(em.envId))}}),el&&(0,s.jsx)(N,{onClose:()=>en(!1),onConfirm:(e,s)=>{let t=O({name:e,type:s,deployed:!1,pendingChanges:!1});en(!1),p.push("/dashboard?selection=environment&env=".concat(t.id))}}),ec&&eu&&(0,s.jsx)(k,{application:eu,availableTargets:(null==(o=x.environments)?void 0:o.filter(e=>e.id!==eu.envId&&"deleted"!==e.status))||[],onClose:()=>{ed(!1),eh(null)},onConfirm:e=>{q(eu.id,e),ed(!1),eh(null),p.push("/dashboard?selection=environment&env=".concat(e))}}),eo&&eb&&(0,s.jsx)(C,{applicationName:eb.name,onClose:()=>{ex(!1),eg(null)},onConfirm:e=>{W(eb.id,e),ex(!1),eg(null)}}),"application"===Y.kind&&eV&&ej&&(0,s.jsx)(U,{application:eV.data,environment:eV.env,draftApplication:ej,setDraftApplication:ev,hasChanges:!!(null==eV?void 0:eV.data)&&!!ej&&"application"===Y.kind&&("stopped"===eV.data.status||JSON.stringify({name:ej.name,imageUrl:ej.imageUrl,resources:ej.resources,healthCheck:ej.healthCheck,exposure:ej.exposure,serviceAccess:ej.serviceAccess,environmentVariables:ej.environmentVariables})!==JSON.stringify({name:eV.data.name,imageUrl:eV.data.imageUrl,resources:eV.data.resources,healthCheck:eV.data.healthCheck,exposure:eV.data.exposure,serviceAccess:eV.data.serviceAccess,environmentVariables:eV.data.environmentVariables})),showChanges:ek,setShowChanges:eC,onApply:()=>eA(!0),isApplying:eP,state:m,onRequestRemove:(e,s,t)=>{ep({id:e,name:s,envId:t}),ei(!0)},onPromote:(e,s,t)=>{eh({id:e,name:s,envId:t}),ed(!0)},onPause:(e,s)=>{eg({id:e,name:s}),ex(!0)}}),"database"===Y.kind&&eV&&ef&&(0,s.jsx)(L,{database:eV.data,environment:eV.env,draftDatabase:ef,setDraftDatabase:eN,hasChanges:!!(null==eV?void 0:eV.data)&&!!ef&&"database"===Y.kind&&JSON.stringify(ef)!==JSON.stringify(eV.data),showChanges:ek,setShowChanges:eC,onApply:()=>eA(!0),isApplying:eP,state:m,onRemove:S}),"architecture"===Y.kind&&(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üèóÔ∏è"}),(0,s.jsx)("span",{children:"Architecture Diagram"})]}),(0,s.jsx)("p",{className:"text-slate-600 mb-6",children:"Visual representation of your deployed infrastructure, including application connections and internal DNS."})]}),(0,s.jsx)(P,{state:m})]})]}),eS&&(0,s.jsx)(M,{selected:Y,selectedResource:eV,draftApplication:ej,draftDatabase:ef,draftCache:ey,onCancel:()=>eA(!1),onConfirm:()=>{"application"===Y.kind?(null==eV?void 0:eV.data)&&ej&&(eA(!1),h(eV.data.id,{name:ej.name,imageUrl:ej.imageUrl,resources:ej.resources,healthCheck:ej.healthCheck,exposure:ej.exposure,serviceAccess:ej.serviceAccess,environmentVariables:ej.environmentVariables}),_(eV.data.id,"deploying")):"database"===Y.kind&&(()=>{if(!ef||!m.resources)return;let e=m.resources;eA(!1),eR(!0),setTimeout(()=>{g({replicas:e.replicas,cpu:e.cpu,memory:e.memory,database:ef,cache:e.cache}),eR(!1)},800)})()}})]}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"üì¶"}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"No Projects Yet"}),(0,s.jsx)("p",{className:"text-slate-600 mb-6",children:"Create your first project to get started with Unhazzle"}),(0,s.jsx)("button",{onClick:()=>window.location.href="/questionnaire",className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold",children:"Create Project"})]})}function U(e){var a,l,n,r;let{application:i,environment:c,draftApplication:d,setDraftApplication:o,hasChanges:x,showChanges:m,setShowChanges:p,onApply:u,isApplying:h,state:b,onRequestRemove:g,onPromote:j,onPause:v}=e,[f,N]=(0,t.useState)(!1),[y,w]=(0,t.useState)(!1);(0,t.useEffect)(()=>{"deploying"===i.status&&w(!0)},[i.status]);let k=(0,t.useCallback)(()=>{w(!1)},[]);return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex-1 mr-4",children:(0,s.jsx)("input",{type:"text",value:d.name,onChange:e=>o({...d,name:e.target.value}),className:"text-xl font-bold text-slate-900 border-b border-transparent hover:border-slate-300 focus:border-purple-500 focus:outline-none bg-transparent w-full",placeholder:"Application Name"})}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>p(!0),disabled:!x||h||"deploying"===i.status,className:"px-4 py-2 rounded-lg text-sm font-medium border ".concat(x?"border-amber-300 text-amber-700 bg-amber-50":"border-slate-200 text-slate-400"," disabled:opacity-50"),children:"Show Changes"}),(0,s.jsx)("button",{onClick:u,disabled:!x||h||"deploying"===i.status,className:"px-4 py-2 rounded-lg text-sm font-semibold bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-50",children:h?"Applying‚Ä¶":"Apply"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>N(!f),className:"px-4 py-2 rounded-lg text-sm font-medium border border-slate-300 text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"Actions"}),(0,s.jsx)("span",{className:"text-xs",children:"‚ñº"})]}),f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>N(!1)}),(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-slate-200 z-20 overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>{j(i.id,i.name||"application",c.id),N(!1)},className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üöÄ"}),(0,s.jsx)("span",{children:"Promote"})]}),(0,s.jsxs)("button",{onClick:()=>{v(i.id,i.name||"application"),N(!1)},className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"‚è∏Ô∏è"}),(0,s.jsx)("span",{children:"Pause"})]}),(0,s.jsx)("div",{className:"border-t border-slate-100 my-1"}),(0,s.jsxs)("button",{onClick:()=>{g(i.id,i.name||"application",c.id),N(!1)},className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üóëÔ∏è"}),(0,s.jsx)("span",{children:"Delete"})]})]})]})]})]})]}),y&&(0,s.jsx)(R,{application:i,environmentId:c.id,onComplete:k}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Application Image"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Image URL"}),(0,s.jsx)("input",{type:"text",value:d.imageUrl,onChange:e=>o({...d,imageUrl:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono",placeholder:"ghcr.io/username/image:tag"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Resources"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"CPU"}),(0,s.jsxs)("select",{value:d.resources.cpu,onChange:e=>o({...d,resources:{...d.resources,cpu:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"0.25",children:"0.25"}),(0,s.jsx)("option",{value:"0.5",children:"0.5"}),(0,s.jsx)("option",{value:"1",children:"1"}),(0,s.jsx)("option",{value:"2",children:"2"}),(0,s.jsx)("option",{value:"4",children:"4"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Memory"}),(0,s.jsxs)("select",{value:d.resources.memory,onChange:e=>o({...d,resources:{...d.resources,memory:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"0.5GB",children:"0.5GB"}),(0,s.jsx)("option",{value:"1GB",children:"1GB"}),(0,s.jsx)("option",{value:"2GB",children:"2GB"}),(0,s.jsx)("option",{value:"4GB",children:"4GB"}),(0,s.jsx)("option",{value:"8GB",children:"8GB"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Replicas (min)"}),(0,s.jsx)("input",{type:"number",min:1,value:d.resources.replicas.min,onChange:e=>{let s=Math.max(1,parseInt(e.target.value)||1),t=d.resources.replicas.max;o({...d,resources:{...d.resources,replicas:{...d.resources.replicas,min:s,max:Math.max(s,t)}}})},className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Replicas (max)"}),(0,s.jsx)("input",{type:"number",min:d.resources.replicas.min,value:d.resources.replicas.max,onChange:e=>{let s=Math.max(d.resources.replicas.min,parseInt(e.target.value)||1);o({...d,resources:{...d.resources,replicas:{...d.resources.replicas,max:s}}})},className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Set min=max for fixed scaling. Different values enable auto-scaling."})]}),(null==c||null==(a=c.applications)?void 0:a.length)>=2&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Application Access"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(null==(l=b.resources)?void 0:l.database)&&(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:d.serviceAccess.database,onChange:e=>{let s=e.target.checked,t="UNHAZZLE_POSTGRES_URL",a=[...d.environmentVariables];s?a.some(e=>e.key===t)||a.push({key:t,value:"",masked:!1}):a=a.filter(e=>e.key!==t),o({...d,serviceAccess:{...d.serviceAccess,database:s},environmentVariables:a})}}),(0,s.jsx)("span",{className:"text-slate-900",children:"PostgreSQL"})]}),(null==(n=b.resources)?void 0:n.cache)&&(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:d.serviceAccess.cache,onChange:e=>{let s=e.target.checked,t="UNHAZZLE_REDIS_URL",a=[...d.environmentVariables];s?a.some(e=>e.key===t)||a.push({key:t,value:"",masked:!1}):a=a.filter(e=>e.key!==t),o({...d,serviceAccess:{...d.serviceAccess,cache:s},environmentVariables:a})}}),(0,s.jsx)("span",{className:"text-slate-900",children:"Redis"})]}),(null==c||null==(r=c.applications)?void 0:r.length)>1&&(0,s.jsxs)("div",{className:"pt-2 mt-2 border-t border-slate-100",children:[(0,s.jsx)("h5",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"Internal Applications"}),(0,s.jsx)("div",{className:"space-y-2",children:c.applications.filter(e=>e.id!==i.id).map(e=>{let t="".concat(e.name.toUpperCase().replace(/[^A-Z0-9_]/g,"_"),"_URL"),a=e.name||e.serviceName||"app-".concat(e.id.substring(0,8)),l="http://".concat(a,".").concat(c.slug||c.name),n=(d.serviceAccess.applications||[]).includes(e.id);return(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:n,onChange:s=>{let a=s.target.checked,n=[...d.environmentVariables],r=[...d.serviceAccess.applications||[]];a?(r.includes(e.id)||r.push(e.id),n.some(e=>e.key===t)||n.push({key:t,value:l,masked:!1})):(r=r.filter(s=>s!==e.id),n=n.filter(e=>e.key!==t)),o({...d,serviceAccess:{...d.serviceAccess,applications:r},environmentVariables:n})}}),(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"text-slate-900",children:e.name})})]},e.id)})})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Connection strings are auto-injected as environment variables."})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Environment Variables"}),(0,s.jsxs)("div",{className:"space-y-3",children:[0===d.environmentVariables.length&&(0,s.jsx)("div",{className:"text-xs text-slate-500",children:"No variables defined yet."}),d.environmentVariables.map((e,t)=>(0,s.jsxs)("div",{className:"grid md:grid-cols-12 gap-3 items-start",children:[(0,s.jsxs)("div",{className:"md:col-span-4",children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Key"}),(0,s.jsx)("input",{type:"text",value:e.key,onChange:e=>{let s=[...d.environmentVariables];s[t]={...s[t],key:e.target.value},o({...d,environmentVariables:s})},placeholder:"KEY",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono"})]}),(0,s.jsxs)("div",{className:"md:col-span-6",children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Value"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:!1===e.masked?"text":"password",value:e.value,onChange:e=>{let s=[...d.environmentVariables];s[t]={...s[t],value:e.target.value},o({...d,environmentVariables:s})},placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono"}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e=[...d.environmentVariables],s=!1!==e[t].masked;e[t]={...e[t],masked:!s},o({...d,environmentVariables:e})},className:"p-2 rounded-lg border border-slate-300 hover:bg-slate-200 transition text-sm","aria-label":!1===e.masked?"Hide value":"Show value",title:!1===e.masked?"Hide value":"Show value",children:!1===e.masked?(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("ellipse",{cx:"12",cy:"12",rx:"9",ry:"6"}),(0,s.jsx)("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",stroke:"none"}),(0,s.jsx)("line",{x1:"4",y1:"20",x2:"20",y2:"4"})]}):(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("ellipse",{cx:"12",cy:"12",rx:"9",ry:"6"}),(0,s.jsx)("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",stroke:"none"})]})})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs mb-1 invisible",children:"Action"}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e=d.environmentVariables.filter((e,s)=>s!==t);o({...d,environmentVariables:e})},className:"w-full md:w-auto px-3 py-2 text-xs rounded-lg border border-red-300 text-red-700 hover:bg-red-50",children:"Remove"})]})]},t)),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üîê"}),(0,s.jsx)("span",{children:"Values are masked by default and stored encrypted."})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e=[...d.environmentVariables,{key:"",value:"",masked:!0}];o({...d,environmentVariables:e})},className:"px-3 py-2 text-xs rounded-lg border border-slate-300 hover:bg-slate-50 text-slate-900",children:"+ Add variable"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Networking"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Visibility"}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,s.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",checked:"public"===d.exposure,onChange:()=>o({...d,exposure:"public"})}),(0,s.jsx)("span",{className:"text-slate-900",children:"Public"})]}),(0,s.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",checked:"private"===d.exposure,onChange:()=>o({...d,exposure:"private"})}),(0,s.jsx)("span",{className:"text-slate-900",children:"Private"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Domain"}),(0,s.jsx)("div",{className:"text-sm text-slate-900",children:"http://".concat(d.name,".").concat(c.slug||c.name)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Port"}),(0,s.jsx)("div",{className:"text-sm font-mono text-slate-900",children:d.port})]})]})]}),"public"===i.exposure&&(()=>{var e;let t=(null==(e=i.imageUrl.split("/").pop())?void 0:e.split(":")[0])||"app",a=i.id.substring(0,6),l="".concat(t,"-").concat(a,".unhazzle.app");return(0,s.jsx)("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Public Endpoint"}),(0,s.jsx)("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded-full",children:"Live"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("code",{className:"text-sm text-purple-600 font-mono",children:["https://",l]}),(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText("https://".concat(l))},className:"p-1 hover:bg-slate-200 rounded transition text-sm",title:"Copy to clipboard",children:"üìã"})]}),(0,s.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["Port ",i.port," ‚Ä¢ SSL Enabled ‚Ä¢ CDN Cached"]})]})})})})(),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Health Check"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Protocol"}),(0,s.jsxs)("select",{value:d.healthCheck.protocol,onChange:e=>o({...d,healthCheck:{...d.healthCheck,protocol:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"HTTP",children:"HTTP"}),(0,s.jsx)("option",{value:"TCP",children:"TCP"}),(0,s.jsx)("option",{value:"gRPC",children:"gRPC"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Port"}),(0,s.jsx)("input",{type:"number",value:d.healthCheck.port,onChange:e=>o({...d,healthCheck:{...d.healthCheck,port:parseInt(e.target.value)||d.port}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Path"}),(0,s.jsx)("input",{type:"text",value:d.healthCheck.path||"",onChange:e=>o({...d,healthCheck:{...d.healthCheck,path:e.target.value}}),placeholder:"/health",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 mt-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Interval"}),(0,s.jsx)("input",{type:"text",value:d.healthCheck.interval,onChange:e=>o({...d,healthCheck:{...d.healthCheck,interval:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Timeout"}),(0,s.jsx)("input",{type:"text",value:d.healthCheck.timeout,onChange:e=>o({...d,healthCheck:{...d.healthCheck,timeout:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Retries"}),(0,s.jsx)("input",{type:"number",min:0,value:d.healthCheck.retries,onChange:e=>o({...d,healthCheck:{...d.healthCheck,retries:Math.max(0,parseInt(e.target.value)||0)}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Using recommended values."})]}),m&&x&&(0,s.jsx)(I,{current:i,draft:d,onClose:()=>p(!1)})]})}function I(e){let{current:t,draft:a,onClose:l}=e,r=(0,n.calculateApplicationCostImpact)(t.resources.cpu,t.resources.memory,t.resources.replicas,a.resources.cpu,a.resources.memory,a.resources.replicas);return(0,s.jsxs)("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h5",{className:"font-semibold text-amber-900",children:"üìù Pending Changes"}),(0,s.jsx)("button",{onClick:l,className:"text-xs text-amber-700 underline",children:"Hide"})]}),(0,s.jsxs)("ul",{className:"text-sm text-amber-900 list-disc ml-5 space-y-1",children:[t.resources.cpu!==a.resources.cpu&&(0,s.jsxs)("li",{children:["CPU: ",t.resources.cpu," ‚Üí ",a.resources.cpu]}),t.resources.memory!==a.resources.memory&&(0,s.jsxs)("li",{children:["Memory: ",t.resources.memory," ‚Üí ",a.resources.memory]}),t.resources.replicas.min!==a.resources.replicas.min&&(0,s.jsxs)("li",{children:["Replicas (min): ",t.resources.replicas.min," ‚Üí ",a.resources.replicas.min]}),t.exposure!==a.exposure&&(0,s.jsxs)("li",{children:["Visibility: ",t.exposure," ‚Üí ",a.exposure]}),JSON.stringify(t.environmentVariables)!==JSON.stringify(a.environmentVariables)&&(0,s.jsx)("li",{children:"Environment variables updated"})]}),(0,s.jsxs)("div",{className:"text-xs text-amber-800 mt-3",children:["Impact: CPU/RAM changes require rolling restart. Estimated duration: ~2 minutes. Zero-downtime ensured.",0!==r&&(0,s.jsxs)("div",{className:"font-semibold mt-1",children:["üí∞ Cost impact: ",r>0?"+":"","$",Math.abs(r).toFixed(2),"/month"]})]})]})}function L(e){var t,a,l,n,r,i,c;let{database:d,environment:o,draftDatabase:x,setDraftDatabase:m,hasChanges:p,showChanges:u,setShowChanges:h,onApply:b,isApplying:g,state:j,onRemove:v}=e,f=()=>{if((j.applications||[]).some(e=>{var s;return null==(s=e.serviceAccess)?void 0:s.database}))return void alert("Cannot remove database: one or more applications are still connected. Disable database access in application settings first.");window.confirm("Remove database from deployed configuration? This action cannot be undone in demo mode.")&&v()};return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-slate-900",children:"PostgreSQL Database"}),(0,s.jsxs)("p",{className:"text-xs text-slate-500",children:["Managed ",x.engine," instance"]})]}),(null==o?void 0:o.deployed)&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>h(!0),disabled:!p||g,className:"px-4 py-2 rounded-lg text-sm font-medium border ".concat(p?"border-amber-300 text-amber-700 bg-amber-50":"border-slate-200 text-slate-400"," disabled:opacity-50"),children:"Show Changes"}),(0,s.jsx)("button",{onClick:b,disabled:!p||g,className:"px-4 py-2 rounded-lg text-sm font-semibold bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-50",children:g?"Applying‚Ä¶":"Apply"}),(0,s.jsx)("button",{onClick:f,disabled:g,className:"px-4 py-2 rounded-lg text-sm font-medium border border-red-300 text-red-600 hover:bg-red-50 disabled:opacity-50",children:"Remove"})]}),!(null==o?void 0:o.deployed)&&(0,s.jsx)("button",{onClick:f,className:"px-4 py-2 rounded-lg text-sm font-medium border border-red-300 text-red-600 hover:bg-red-50",children:"Remove"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Connection URL"}),(0,s.jsxs)("div",{className:"bg-slate-900 rounded-lg p-4 font-mono text-xs text-green-400 flex items-center justify-between",children:[(0,s.jsxs)("code",{className:"break-all",children:["postgres://unhazzle_user:***@db-prod-",(null==(t=j.domain)?void 0:t.defaultSubdomain)||"app",".internal:5432/main"]}),(0,s.jsx)("button",{onClick:()=>{var e;navigator.clipboard.writeText("postgres://unhazzle_user:secret@db-prod-".concat((null==(e=j.domain)?void 0:e.defaultSubdomain)||"app",".internal:5432/main")),alert("Connection URL copied to clipboard!")},className:"ml-3 px-3 py-1 bg-purple-600 text-white text-xs rounded hover:bg-purple-700 transition",children:"Copy"})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Injected as DATABASE_URL environment variable."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Resources"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"CPU"}),(0,s.jsxs)("select",{value:x.cpu,onChange:e=>m({...x,cpu:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"0.5",children:"0.5"}),(0,s.jsx)("option",{value:"1",children:"1"}),(0,s.jsx)("option",{value:"2",children:"2"}),(0,s.jsx)("option",{value:"4",children:"4"}),(0,s.jsx)("option",{value:"8",children:"8"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Memory"}),(0,s.jsxs)("select",{value:x.memory,onChange:e=>m({...x,memory:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"1GB",children:"1GB"}),(0,s.jsx)("option",{value:"2GB",children:"2GB"}),(0,s.jsx)("option",{value:"4GB",children:"4GB"}),(0,s.jsx)("option",{value:"8GB",children:"8GB"}),(0,s.jsx)("option",{value:"16GB",children:"16GB"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Storage"}),(0,s.jsxs)("select",{value:x.storage,onChange:e=>m({...x,storage:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"10GB",children:"10GB"}),(0,s.jsx)("option",{value:"20GB",children:"20GB"}),(0,s.jsx)("option",{value:"50GB",children:"50GB"}),(0,s.jsx)("option",{value:"100GB",children:"100GB"}),(0,s.jsx)("option",{value:"200GB",children:"200GB"}),(0,s.jsx)("option",{value:"500GB",children:"500GB"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Backups"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Frequency"}),(0,s.jsxs)("select",{value:x.backups.frequency,onChange:e=>m({...x,backups:{...x.backups,frequency:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"hourly",children:"Hourly"}),(0,s.jsx)("option",{value:"daily",children:"Daily"}),(0,s.jsx)("option",{value:"weekly",children:"Weekly"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Retention"}),(0,s.jsxs)("select",{value:x.backups.retention,onChange:e=>m({...x,backups:{...x.backups,retention:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"7 days",children:"7 days"}),(0,s.jsx)("option",{value:"14 days",children:"14 days"}),(0,s.jsx)("option",{value:"30 days",children:"30 days"}),(0,s.jsx)("option",{value:"90 days",children:"90 days"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Enabled"}),(0,s.jsxs)("label",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:x.backups.enabled,onChange:e=>m({...x,backups:{...x.backups,enabled:e.target.checked}})}),(0,s.jsx)("span",{className:"text-sm text-slate-900",children:"Automatic backups"})]})]})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Point-in-time recovery available for all plans."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"High Availability"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Replicas"}),(0,s.jsxs)("select",{value:x.replicas,onChange:e=>m({...x,replicas:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"none",children:"None (Single instance)"}),(0,s.jsx)("option",{value:"1",children:"1 Standby Replica"}),(0,s.jsx)("option",{value:"2",children:"2 Standby Replicas"})]})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)("div",{className:"text-xs text-slate-600",children:(0,s.jsx)("span",{className:"inline-block px-2 py-1 bg-green-100 text-green-800 rounded",children:"‚úì Connection pooling enabled"})})})]})]}),u&&p&&(0,s.jsxs)("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h5",{className:"font-semibold text-amber-900",children:"üìù Pending Changes"}),(0,s.jsx)("button",{onClick:()=>h(!1),className:"text-xs text-amber-700 underline",children:"Hide"})]}),(0,s.jsxs)("ul",{className:"text-sm text-amber-900 list-disc ml-5 space-y-1",children:[(null==(a=j.resources)?void 0:a.database)&&x.cpu!==j.resources.database.cpu&&(0,s.jsxs)("li",{children:["CPU: ",j.resources.database.cpu," ‚Üí ",x.cpu]}),(null==(l=j.resources)?void 0:l.database)&&x.memory!==j.resources.database.memory&&(0,s.jsxs)("li",{children:["Memory: ",j.resources.database.memory," ‚Üí ",x.memory]}),(null==(n=j.resources)?void 0:n.database)&&x.storage!==j.resources.database.storage&&(0,s.jsxs)("li",{children:["Storage: ",j.resources.database.storage," ‚Üí ",x.storage]}),(null==(r=j.resources)?void 0:r.database)&&x.backups.frequency!==j.resources.database.backups.frequency&&(0,s.jsxs)("li",{children:["Backup frequency: ",j.resources.database.backups.frequency," ‚Üí ",x.backups.frequency]}),(null==(i=j.resources)?void 0:i.database)&&x.backups.retention!==j.resources.database.backups.retention&&(0,s.jsxs)("li",{children:["Backup retention: ",j.resources.database.backups.retention," ‚Üí ",x.backups.retention]}),(null==(c=j.resources)?void 0:c.database)&&x.replicas!==j.resources.database.replicas&&(0,s.jsxs)("li",{children:["Replicas: ",j.resources.database.replicas," ‚Üí ",x.replicas]})]}),(0,s.jsx)("div",{className:"text-xs text-amber-800 mt-3",children:"Impact: Storage changes are instant. CPU/Memory changes require brief maintenance window (~3 min). Zero data loss guaranteed."})]})]})}function M(e){var t;let{selected:a,selectedResource:l,draftApplication:r,draftDatabase:i,draftCache:c,onCancel:d,onConfirm:o}=e;return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:"‚ö†Ô∏è"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Apply Configuration Changes?"}),"application"===a.kind&&l&&r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-slate-700 mb-4",children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Summary:"}),(0,s.jsxs)("p",{className:"text-slate-600",children:["Application: ",(0,s.jsx)("span",{className:"font-mono",children:l.data.name||(null==(t=l.data.imageUrl.split("/").pop())?void 0:t.split(":")[0])})]}),(0,s.jsxs)("ul",{className:"list-disc ml-5 mt-2 space-y-1 text-slate-600",children:[l.data.resources.cpu!==r.resources.cpu&&(0,s.jsxs)("li",{children:["CPU: ",l.data.resources.cpu," ‚Üí ",r.resources.cpu," cores"]}),l.data.resources.memory!==r.resources.memory&&(0,s.jsxs)("li",{children:["Memory: ",l.data.resources.memory," ‚Üí ",r.resources.memory]}),l.data.resources.replicas.min!==r.resources.replicas.min&&(0,s.jsxs)("li",{children:["Min replicas: ",l.data.resources.replicas.min," ‚Üí ",r.resources.replicas.min]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2 text-sm",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Impact Assessment:"}),(0,s.jsx)("p",{className:"text-slate-600",children:"‚ö†Ô∏è Rolling restart required"}),(0,s.jsx)("p",{className:"text-slate-600",children:"‚è±Ô∏è Estimated time: ~2 minutes"}),(0,s.jsx)("p",{className:"text-slate-600",children:"‚úÖ No expected traffic disruption"}),(()=>{let e=(0,n.calculateApplicationCostImpact)(l.data.resources.cpu,l.data.resources.memory,l.data.resources.replicas,r.resources.cpu,r.resources.memory,r.resources.replicas);return 0!==e?(0,s.jsxs)("p",{className:"text-slate-600 font-medium",children:["üí∞ Cost impact: ",e>0?"+":"","‚Ç¨",Math.abs(e).toFixed(2),"/month"]}):null})()]})]}),"database"===a.kind&&l&&i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-slate-700 mb-4",children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Summary:"}),(0,s.jsxs)("p",{className:"text-slate-600",children:["Resource: ",(0,s.jsx)("span",{className:"font-mono",children:"PostgreSQL Database"})]}),(0,s.jsxs)("ul",{className:"list-disc ml-5 mt-2 space-y-1 text-slate-600",children:[l.data.cpu!==i.cpu&&(0,s.jsxs)("li",{children:["CPU: ",l.data.cpu," ‚Üí ",i.cpu," cores"]}),l.data.memory!==i.memory&&(0,s.jsxs)("li",{children:["Memory: ",l.data.memory," ‚Üí ",i.memory]}),l.data.storage!==i.storage&&(0,s.jsxs)("li",{children:["Storage: ",l.data.storage," ‚Üí ",i.storage]}),l.data.replicas.min!==i.replicas.min&&(0,s.jsxs)("li",{children:["Replicas (min): ",l.data.replicas.min," ‚Üí ",i.replicas.min]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2 text-sm",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Impact Assessment:"}),(0,s.jsx)("p",{className:"text-slate-600",children:"‚ö†Ô∏è Maintenance window required for CPU/Memory changes"}),(0,s.jsx)("p",{className:"text-slate-600",children:"‚è±Ô∏è Estimated time: ~3 minutes"}),(0,s.jsx)("p",{className:"text-slate-600",children:"‚úÖ Zero data loss guaranteed"}),(()=>{let e=(0,n.calculateDatabaseCostImpact)(l.data,i);return 0!==e?(0,s.jsxs)("p",{className:"text-slate-600 font-medium",children:["üí∞ Cost impact: ",e>0?"+":"","‚Ç¨",Math.abs(e).toFixed(2),"/month"]}):null})()]})]}),"cache"===a.kind&&l&&c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-slate-700 mb-4",children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Summary:"}),(0,s.jsxs)("p",{className:"text-slate-600",children:["Resource: ",(0,s.jsx)("span",{className:"font-mono",children:"Redis Cache"})]}),(0,s.jsxs)("ul",{className:"list-disc ml-5 mt-2 space-y-1 text-slate-600",children:[l.data.memory!==c.memory&&(0,s.jsxs)("li",{children:["Memory: ",l.data.memory," ‚Üí ",c.memory]}),l.data.version!==c.version&&(0,s.jsxs)("li",{children:["Version: ",l.data.version," ‚Üí ",c.version]}),l.data.evictionPolicy!==c.evictionPolicy&&(0,s.jsxs)("li",{children:["Eviction Policy: ",l.data.evictionPolicy," ‚Üí ",c.evictionPolicy]}),l.data.persistence!==c.persistence&&(0,s.jsxs)("li",{children:["Persistence: ",l.data.persistence," ‚Üí ",c.persistence]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2 text-sm",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Impact Assessment:"}),(0,s.jsx)("p",{className:"text-slate-600",children:"‚ö†Ô∏è Restart required (~30 seconds)"}),(0,s.jsx)("p",{className:"text-slate-600",children:"‚úÖ Data persisted if AOF/RDB enabled"}),(()=>{let e=(0,n.calculateCacheCostImpact)(l.data.memory,c.memory);return 0!==e?(0,s.jsxs)("p",{className:"text-slate-600 font-medium",children:["üí∞ Cost impact: ",e>0?"+":"","‚Ç¨",Math.abs(e).toFixed(2),"/month"]}):null})()]})]}),(0,s.jsx)("p",{className:"text-sm text-slate-600 mt-4",children:"Are you sure you want to apply these changes?"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[(0,s.jsx)("button",{onClick:d,className:"px-5 py-2 rounded-lg border border-slate-300 text-slate-700 hover:bg-slate-50 font-medium",children:"Cancel"}),(0,s.jsx)("button",{onClick:o,className:"px-5 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 font-medium",children:"Apply Changes"})]})]})})}}]);