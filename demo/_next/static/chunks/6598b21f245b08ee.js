(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,s,t)=>{s.exports=e.r(76562)},81096,e=>{"use strict";e.s(["default",()=>i]);var s=e.i(43476),t=e.i(71645),l=e.i(18566),a=e.i(23312);let r=[{name:"acme/ecommerce-shop",tag:"v2.1.0",size:"324 MB",lastUpdated:"2024-10-28T14:30:00Z",description:"Main e-commerce application with Next.js frontend"},{name:"acme/api-gateway",tag:"v1.5.2",size:"156 MB",lastUpdated:"2024-10-25T09:15:00Z",description:"GraphQL API gateway service"},{name:"acme/payment-processor",tag:"v3.0.1",size:"89 MB",lastUpdated:"2024-10-30T16:45:00Z",description:"Payment processing microservice"},{name:"acme/notification-service",tag:"v2.3.0",size:"112 MB",lastUpdated:"2024-10-29T11:20:00Z",description:"Email and SMS notification handler"},{name:"acme/background-worker",tag:"v1.8.4",size:"78 MB",lastUpdated:"2024-10-27T13:10:00Z",description:"Background job processing worker"}];function i(){let e=(0,l.useRouter)(),{state:i,updateApplication:n,addContainer:c}=(0,a.useDeployment)(),[o,d]=(0,t.useState)(""),[x,m]=(0,t.useState)(!1),[p,h]=(0,t.useState)([]),[u,g]=(0,t.useState)({}),[b,j]=(0,t.useState)([]),[f,v]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let e=localStorage.getItem("github_pat");e&&(d(e),m(!0))},[]);let N=e=>{let s=p.length+b.filter(e=>e.url.trim()).length;if(p.includes(e)){h(p.filter(s=>s!==e));let s={...u};delete s[e],g(s)}else{var t;if(s>=5)return void alert("Maximum 5 containers allowed");h([...p,e]);let l=(null==(t=e.split("/").pop())?void 0:t.split(":")[0])||"app";g({...u,[e]:l.toLowerCase().replace(/[^a-z0-9-]/g,"-")})}},y=()=>{if(p.length+b.filter(e=>e.url.trim()).length>=5)return void alert("Maximum 5 containers allowed");j([...b,{url:"",customName:""}])},w=p.length+b.filter(e=>e.url.trim()).length;return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-12 px-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center text-white text-sm font-bold",children:"âœ“"}),(0,s.jsx)("div",{className:"text-xs text-slate-500 ml-2",children:"Sign In"})]}),(0,s.jsx)("div",{className:"w-12 h-0.5 bg-green-500"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center text-white text-sm font-bold",children:"âœ“"}),(0,s.jsx)("div",{className:"text-xs text-slate-500 ml-2",children:"Questions"})]}),(0,s.jsx)("div",{className:"w-12 h-0.5 bg-purple-500"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-purple-600 flex items-center justify-center text-white text-sm font-bold",children:"3"}),(0,s.jsx)("div",{className:"text-xs text-slate-700 ml-2 font-medium",children:"Application"})]}),(0,s.jsx)("div",{className:"w-12 h-0.5 bg-slate-200"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-slate-400 text-sm font-bold",children:"4"}),(0,s.jsx)("div",{className:"text-xs text-slate-400 ml-2",children:"Resources"})]})]}),(0,s.jsxs)("div",{className:"text-center mb-10",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-3",children:"Select Your Application Images"}),(0,s.jsx)("p",{className:"text-lg text-slate-600",children:"Choose from private GitHub images or add public registry URLs (up to 5 applications)"}),w>0&&(0,s.jsxs)("p",{className:"text-sm text-purple-600 font-medium mt-2",children:[w," of 5 applications selected"]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"text-3xl",children:"ðŸ”’"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Private GitHub Container Registry"}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Access your private images from ghcr.io"})]})]}),x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"text-2xl",children:"âœ“"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-green-900",children:"Connected to GitHub"}),(0,s.jsxs)("p",{className:"text-xs text-green-700",children:["Token saved (ghp...",o.slice(-4),")"]})]})]}),(0,s.jsx)("button",{onClick:()=>{localStorage.removeItem("github_pat"),d(""),m(!1)},className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Disconnect"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("h3",{className:"font-semibold text-slate-900 mb-3",children:["Select images to deploy (",p.length," selected):"]}),r.map(e=>{let t="".concat(e.name,":").concat(e.tag),l=p.includes(t);return(0,s.jsx)("div",{className:"p-4 border-2 rounded-lg transition cursor-pointer ".concat(l?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300 bg-white"),onClick:()=>N(t),children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("input",{type:"checkbox",checked:l,onChange:()=>N(t),className:"w-5 h-5 text-purple-600 rounded focus:ring-purple-500",onClick:e=>e.stopPropagation()})}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"font-mono text-sm font-semibold text-slate-900",children:["ghcr.io/",t]}),(0,s.jsx)("p",{className:"text-xs text-slate-600 mt-1",children:e.description})]}),(0,s.jsxs)("div",{className:"text-right flex-shrink-0",children:[(0,s.jsx)("div",{className:"text-xs text-slate-500",children:e.size}),(0,s.jsx)("div",{className:"text-xs text-slate-400",children:(e=>{let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/864e5);return 0===t?"Today":1===t?"Yesterday":t<7?"".concat(t," days ago"):s.toLocaleDateString()})(e.lastUpdated)})]})]})})]})},t)})]})]}):(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-900 mb-3",children:"GitHub Personal Access Token (PAT) *"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("input",{type:"password",value:o,onChange:e=>d(e.target.value),placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",className:"flex-1 px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none font-mono text-sm"}),(0,s.jsx)("button",{onClick:()=>{if(!o.trim())return void alert("Please enter a GitHub Personal Access Token");localStorage.setItem("github_pat",o),m(!0)},className:"px-6 py-3 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition",children:"Connect"})]}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-blue-900 text-sm mb-2",children:"ï¿½ How to generate a GitHub PAT:"}),(0,s.jsxs)("ol",{className:"text-xs text-blue-800 space-y-1 list-decimal ml-4",children:[(0,s.jsx)("li",{children:"Go to GitHub Settings â†’ Developer settings â†’ Personal access tokens"}),(0,s.jsx)("li",{children:'Click "Generate new token (classic)"'}),(0,s.jsxs)("li",{children:["Select scope: ",(0,s.jsx)("strong",{children:"read:packages"})]}),(0,s.jsx)("li",{children:"Copy the token and paste it above"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"text-3xl",children:"ðŸŒ"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Public Registries"}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Add images from Docker Hub, public registries, etc."})]})]}),0===b.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("p",{className:"text-slate-500 mb-4",children:"No public images added yet"}),(0,s.jsxs)("button",{onClick:y,disabled:w>=5,className:"inline-flex items-center gap-2 px-6 py-3 bg-slate-100 text-slate-700 font-semibold rounded-lg hover:bg-slate-200 transition disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)("span",{children:"+"}),(0,s.jsx)("span",{children:"Add Public Image"})]})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[b.map((e,t)=>(0,s.jsx)("div",{className:"p-4 border-2 border-slate-200 rounded-lg",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Image URL *"}),(0,s.jsx)("input",{type:"text",value:e.url,onChange:e=>((e,s,t)=>{let l=[...b];l[e].url=t,j(l)})(t,0,e.target.value),placeholder:"e.g., nginx:latest, docker.io/library/redis:7",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none font-mono text-sm"})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:()=>{j(b.filter((e,s)=>s!==t))},className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Remove"})})]})},t)),(0,s.jsx)("button",{onClick:y,disabled:w>=5,className:"w-full py-3 border-2 border-dashed border-slate-300 rounded-lg text-slate-600 hover:border-slate-400 hover:text-slate-700 font-medium transition disabled:opacity-50 disabled:cursor-not-allowed",children:"+ Add Another Public Image"})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 mb-8 border border-purple-100",children:[(0,s.jsxs)("h3",{className:"font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"ï¿½"}),(0,s.jsx)("span",{children:"Next Steps:"})]}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-slate-700",children:[(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-purple-600 mt-0.5",children:"â†’"}),(0,s.jsx)("span",{children:"Configure resources (CPU, memory, replicas) for each application"})]}),(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-purple-600 mt-0.5",children:"â†’"}),(0,s.jsx)("span",{children:"Set environment variables per application"})]}),(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-purple-600 mt-0.5",children:"â†’"}),(0,s.jsx)("span",{children:"Configure health checks and service access"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:()=>e.back(),className:"px-6 py-3 text-slate-600 hover:text-slate-900 font-medium transition",children:"â† Back"}),(0,s.jsx)("button",{onClick:()=>{if(0===p.length+b.filter(e=>e.url.trim()).length)return void alert("Please select at least one application image");v(!0),setTimeout(()=>{var s;p.forEach((e,s)=>{var t,l;r.find(s=>"".concat(s.name,":").concat(s.tag)===e);let a=u[e]||"app-".concat(s+1);c({id:"container-".concat(Date.now(),"-").concat(s),name:a,imageUrl:"ghcr.io/".concat(e),registryToken:o,port:3e3,healthCheck:{protocol:"HTTP",port:3e3,path:"/health",interval:"30s",timeout:"5s",retries:3},exposure:"public",resources:{cpu:"1 vCPU",memory:"2GB",replicas:{min:2,max:10}},serviceAccess:{database:null!=(t=i.resources)&&!!t.database,cache:null!=(l=i.resources)&&!!l.cache},environmentVariables:[]})}),b.filter(e=>e.url.trim()).forEach((e,s)=>{var t,l,a,r;let n=e.customName.trim()||(null==(l=e.url.split("/").pop())||null==(t=l.split(":")[0])?void 0:t.toLowerCase().replace(/[^a-z0-9-]/g,"-"))||"public-app-".concat(s+1);c({id:"container-public-".concat(Date.now(),"-").concat(s),name:n,imageUrl:e.url,port:3e3,healthCheck:{protocol:"HTTP",port:3e3,path:"/health",interval:"30s",timeout:"5s",retries:3},exposure:"public",resources:{cpu:"1 vCPU",memory:"2GB",replicas:{min:2,max:10}},serviceAccess:{database:null!=(a=i.resources)&&!!a.database,cache:null!=(r=i.resources)&&!!r.cache},environmentVariables:[]})}),(p[0]||(null==(s=b.find(e=>e.url.trim()))?void 0:s.url))&&n({imageUrl:p[0]?"ghcr.io/".concat(p[0]):b[0].url,registryToken:p[0]?o:void 0,port:3e3,healthCheck:"/health"}),v(!1),e.push("/resources")},1500)},disabled:f||0===w,className:"inline-flex items-center gap-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white font-semibold px-8 py-3 rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsxs)("span",{children:["Processing ",w," application",w>1?"s":"","..."]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"Continue to Resources"}),(0,s.jsx)("span",{children:"â†’"})]})})]})]})})}}]);