(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78928,e=>{"use strict";e.s(["default",()=>m],78928);var s=e.i(43476),t=e.i(71645),a=e.i(18566),l=e.i(23312);function n(e,s,t){let a,l=parseFloat(s),n=parseFloat(t);return a=l<=1&&n<=2?4.99:l<=2&&n<=4?5.49:l<=4&&n<=8?9.49:17.49,Math.round(Math.ceil((e.min+e.max)/2/2)*a)}function r(e,s,t,a){let l,n,r=parseFloat(e),i=parseFloat(s);return l=t.includes("TB")?1e3*parseFloat(t):parseFloat(t),n=r<=1&&i<=2?4.99:r<=2&&i<=4?5.49:r<=4&&i<=8?9.49:r<=8&&i<=16?17.49:34.49,(a.includes("HA")||a.includes("Multi-region"))&&(n*=2),Math.round((n+.044*l)*100)/100}function i(e){let s=parseFloat(e.replace("MB","").replace("GB",""))*(e.includes("GB")?1024:1);return s<1024?0:s<=2048?4.99:5.49}function c(e,s,t,a,l,r){let i=n(t,e,s);return Math.round((n(r,a,l)-i)*100)/100}function o(e,s){let t=r(e.cpu,e.memory,e.storage,e.replicas);return Math.round((r(s.cpu,s.memory,s.storage,s.replicas)-t)*100)/100}function d(e,s){let t=i(e);return Math.round((i(s)-t)*100)/100}function m(){var e,n;let r=(0,a.useRouter)(),{state:i,removeDatabase:c,removeCache:o}=(0,l.useDeployment)(),[d,m]=(0,t.useState)("overview"),[h,u]=(0,t.useState)(99.98),[p,b]=(0,t.useState)(42),[v,j]=(0,t.useState)(58),[N,y]=(0,t.useState)(1240),[w,k]=(0,t.useState)("all"),[C,S]=(0,t.useState)(!1);return((0,t.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,t.useEffect)(()=>{S(!0)},[]),(0,t.useEffect)(()=>{C&&!i.user&&r.push("/")},[C,i.user,r]),(0,t.useEffect)(()=>{let e=setInterval(()=>{b(e=>Math.max(15,Math.min(80,e+(Math.random()-.5)*10))),j(e=>Math.max(30,Math.min(85,e+(Math.random()-.5)*8))),y(e=>Math.max(800,Math.min(2e3,e+(Math.random()-.5)*200))),u(99.95+.05*Math.random())},3e3);return()=>clearInterval(e)},[]),C)?i.project?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-8 px-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Dashboard"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(null==(e=i.domain)?void 0:e.defaultSubdomain)&&(0,s.jsxs)("span",{className:"text-sm text-slate-600",children:["Deployed to: ",(0,s.jsx)("code",{className:"bg-white px-2 py-1 rounded text-xs font-mono",children:i.domain.defaultSubdomain})]}),i.deployed&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"}),"Live"]})]})]}),(0,s.jsxs)("button",{onClick:()=>r.push("/questionnaire"),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold shadow-lg flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"+"}),(0,s.jsx)("span",{children:"Create Project"})]})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"border-b border-slate-200 flex",children:["overview","logs","metrics","events","settings","nextSteps"].map(e=>(0,s.jsx)("button",{onClick:()=>m(e),className:"flex-1 px-6 py-4 font-medium transition text-center relative ".concat("nextSteps"===e?d===e?"border-b-2 border-amber-500 text-amber-600 bg-amber-50":"border-b-2 border-transparent text-amber-600 hover:text-amber-700 bg-gradient-to-b from-amber-50 to-transparent":d===e?"border-b-2 border-purple-600 text-purple-600 bg-purple-50":"text-slate-600 hover:text-slate-900"),children:(0,s.jsx)("div",{className:"flex items-center justify-center gap-2",children:"nextSteps"===e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"Next Steps"}),(0,s.jsx)("span",{className:"animate-pulse text-lg",children:"â†’"}),(0,s.jsx)("span",{className:"inline-block px-2 py-0.5 bg-amber-500 text-white text-xs rounded-full font-bold",children:"IMPORTANT"})]}):e.charAt(0).toUpperCase()+e.slice(1)})},e))}),(0,s.jsxs)("div",{className:"p-6",children:["overview"===d&&(0,s.jsx)(x,{project:i.project,state:i}),"logs"===d&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Application:"}),(0,s.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm bg-white",children:[(0,s.jsx)("option",{value:"all",children:"All Applications"}),i.containers.map((e,t)=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsx)("div",{className:"bg-slate-900 rounded-lg p-4 font-mono text-sm text-green-400 space-y-1 max-h-96 overflow-y-auto",children:(()=>{let e=[];return i.containers.forEach((s,t)=>{("all"===w||w===s.id)&&(e.push({container:s.name,message:"[2025-11-02 14:32:15] Application started successfully"},{container:s.name,message:"[2025-11-02 14:32:17] â†’ HTTP server listening on port ".concat(s.port)},{container:s.name,message:"[2025-11-02 14:32:18] âœ“ Health check passed"},{container:s.name,message:"[2025-11-02 14:32:19] â†’ Replica 1 reporting healthy"},{container:s.name,message:"[2025-11-02 14:32:20] â†’ Replica 2 reporting healthy"}),s.serviceAccess.database&&e.push({container:s.name,message:"[2025-11-02 14:32:16] âœ“ Database connection established"}),s.serviceAccess.cache&&e.push({container:s.name,message:"[2025-11-02 14:32:16] âœ“ Redis cache connected"}),"public"===s.exposure?e.push({container:s.name,message:"[2025-11-02 14:35:42] GET /api/products 200 45ms"},{container:s.name,message:"[2025-11-02 14:35:43] POST /api/cart 201 52ms"},{container:s.name,message:"[2025-11-02 14:35:44] GET /api/checkout 200 38ms"},{container:s.name,message:"[2025-11-02 14:35:45] POST /api/orders 201 127ms"},{container:s.name,message:"[2025-11-02 14:35:46] GET / 200 15ms (cached)"}):e.push({container:s.name,message:"[2025-11-02 14:35:42] Processing background job #1234"},{container:s.name,message:"[2025-11-02 14:35:43] â†’ Job completed in 89ms"},{container:s.name,message:"[2025-11-02 14:35:44] Handling internal API call"}))}),e.map((e,t)=>(0,s.jsxs)("div",{children:["all"===w&&(0,s.jsxs)("span",{className:"text-purple-400",children:["[",e.container,"] "]}),e.message]},t))})()})]}),"metrics"===d&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Performance Metrics"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"Average Response Time"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-purple-600",children:"45ms"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"â†“ 12% from yesterday"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"Error Rate"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-green-600",children:"0.02%"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Excellent reliability"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"99th Percentile (p99)"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-blue-600",children:"234ms"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Well within SLA"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"Requests Today"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-slate-900",children:"1.8M"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"â†‘ 23% from yesterday"})]})]})]}),"events"===d&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Recent Events"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex gap-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,s.jsx)("span",{className:"text-2xl",children:"ðŸ“¤"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-blue-900",children:"Deployment Completed"}),(0,s.jsx)("p",{className:"text-sm text-blue-700",children:"All replicas healthy and serving traffic"}),(0,s.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"2 hours ago"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("span",{className:"text-2xl",children:"ðŸ“Š"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Auto-scaling triggered"}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Scaled from 2 to 4 replicas due to high traffic"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"45 minutes ago"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("span",{className:"text-2xl",children:"ðŸ”„"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Database backup completed"}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Automatic daily backup successful (5.2 GB)"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"1 hour ago"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,s.jsx)("span",{className:"text-2xl",children:"âœ…"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-green-900",children:"SSL certificate renewed"}),(0,s.jsx)("p",{className:"text-sm text-green-700",children:"Auto-renewal for HTTPS certificate successful"}),(0,s.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"3 days ago"})]})]})]})]}),"settings"===d&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-purple-50 border border-purple-200 p-6 rounded-lg",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Settings moved to Overview"}),(0,s.jsx)("p",{className:"text-slate-700 mb-4",children:"Edit your current deployment configuration in the Overview tab. Use the left sidebar to pick a resource and the right panel to edit. You can preview and apply staged changes."}),(0,s.jsx)("button",{onClick:()=>m("overview"),className:"px-5 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium",children:"Go to Overview"})]}),(0,s.jsx)("div",{className:"text-xs text-slate-500",children:"Looking for advanced settings? Weâ€™ll surface them here soon. For now, everything configurable is available in Overview."})]}),"nextSteps"===d&&(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 p-6 rounded-lg border border-purple-200",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-slate-900 mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"ðŸš€"}),(0,s.jsx)("span",{children:"Enable Continuous Deployment"})]}),(0,s.jsx)("p",{className:"text-slate-600",children:"Your application is now live! The next step is to enable automatic deployments from your GitHub repository using the Unhazzle CLI and GitHub Actions."}),(0,s.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[(0,s.jsxs)("a",{href:"/unhazzle.io/cli-demo/cli-guide.html",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium",children:["Experience the Unhazzle CLI",(0,s.jsx)("span",{"aria-hidden":"true",children:"â†—"})]}),(0,s.jsx)("span",{className:"text-sm text-slate-600",children:"Simulate the same deployment flow directly from your terminal."})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"1"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-slate-900",children:"Export Your Infrastructure Configuration"})]}),(0,s.jsx)("p",{className:"text-slate-600 ml-11",children:"Below is your infrastructure configuration in YAML format. This file describes all your resources, environment variables, and settings. Copy it to your repository for version control and CI/CD integration."}),(0,s.jsx)("div",{className:"ml-11 space-y-3",children:(0,s.jsxs)("div",{className:"bg-slate-900 rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-slate-800 px-4 py-3 flex items-center justify-between border-b border-slate-700",children:[(0,s.jsx)("span",{className:"text-white font-mono text-sm",children:"unhazzle.yaml"}),(0,s.jsx)("button",{onClick:()=>{let e=g(i);navigator.clipboard.writeText(e),alert("YAML copied to clipboard!")},className:"px-3 py-1 bg-purple-600 text-white text-xs rounded hover:bg-purple-700 transition",children:"Copy"})]}),(0,s.jsx)("pre",{className:"p-4 text-white font-mono text-xs overflow-x-auto max-h-72",children:(0,s.jsx)("code",{children:g(i)})})]})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"2"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-slate-900",children:"Add YAML to Your Repository"})]}),(0,s.jsx)("p",{className:"text-slate-600 ml-11",children:"Commit the unhazzle.yaml file to the root of your repository:"}),(0,s.jsxs)("div",{className:"ml-11 bg-slate-100 rounded-lg p-4 font-mono text-sm space-y-1",children:[(0,s.jsx)("div",{className:"text-slate-700",children:"$ git add unhazzle.yaml"}),(0,s.jsx)("div",{className:"text-slate-700",children:'$ git commit -m "Add Unhazzle deployment config"'}),(0,s.jsx)("div",{className:"text-slate-700",children:"$ git push origin main"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"3"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-slate-900",children:"Set Up GitHub Actions Workflow"})]}),(0,s.jsx)("p",{className:"text-slate-600 ml-11",children:"Create a GitHub Actions workflow to automatically deploy on every push:"}),(0,s.jsx)("div",{className:"ml-11 space-y-3",children:(0,s.jsxs)("div",{className:"bg-slate-900 rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-slate-800 px-4 py-3 flex items-center justify-between border-b border-slate-700",children:[(0,s.jsx)("span",{className:"text-white font-mono text-sm",children:".github/workflows/deploy.yml"}),(0,s.jsx)("button",{onClick:()=>{let e=f();navigator.clipboard.writeText(e),alert("Workflow copied to clipboard!")},className:"px-3 py-1 bg-purple-600 text-white text-xs rounded hover:bg-purple-700 transition",children:"Copy"})]}),(0,s.jsx)("pre",{className:"p-4 text-white font-mono text-xs overflow-x-auto max-h-72",children:(0,s.jsx)("code",{children:f()})})]})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"4"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-slate-900",children:"Install Unhazzle CLI"})]}),(0,s.jsx)("p",{className:"text-slate-600 ml-11",children:"Install the Unhazzle CLI locally for development and debugging:"}),(0,s.jsxs)("div",{className:"ml-11 bg-slate-100 rounded-lg p-4 font-mono text-sm space-y-1",children:[(0,s.jsx)("div",{className:"text-slate-700",children:"$ npm install -g @unhazzle/cli"}),(0,s.jsx)("div",{className:"text-slate-700 mt-3",children:"# Or authenticate with GitHub"}),(0,s.jsx)("div",{className:"text-slate-700",children:"$ unhazzle auth login"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"5"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-slate-900",children:"All Set! Continuous Deployment Enabled"})]}),(0,s.jsx)("p",{className:"text-slate-600 ml-11",children:"From now on, every time you push to your main branch:"}),(0,s.jsxs)("div",{className:"ml-11 space-y-2 text-slate-600",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-purple-600 font-bold mt-1",children:"â€¢"}),(0,s.jsx)("span",{children:"GitHub Actions picks up the unhazzle.yaml file"})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-purple-600 font-bold mt-1",children:"â€¢"}),(0,s.jsx)("span",{children:"Unhazzle CLI automatically deploys your app with the exact configuration"})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-purple-600 font-bold mt-1",children:"â€¢"}),(0,s.jsx)("span",{children:"No manual steps, no configuration drift, fully automated"})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-purple-600 font-bold mt-1",children:"â€¢"}),(0,s.jsx)("span",{children:"Deployment status is reflected in your GitHub PR"})]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 p-6 rounded-lg border border-slate-200 space-y-4",children:[(0,s.jsx)("h4",{className:"font-bold text-slate-900",children:"ðŸ”§ Useful CLI Commands"}),(0,s.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-mono text-slate-700 mb-1",children:"$ unhazzle status"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Check application health and metrics"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-mono text-slate-700 mb-1",children:"$ unhazzle logs --follow"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Stream real-time application logs"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-mono text-slate-700 mb-1",children:"$ unhazzle env set KEY=VALUE"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Update environment variables on the fly"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-mono text-slate-700 mb-1",children:"$ unhazzle deploy --config unhazzle.yaml"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Manual deployment using your YAML config"})]})]})]}),(0,s.jsxs)("div",{className:"text-center p-6 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border border-purple-200",children:[(0,s.jsx)("p",{className:"text-slate-600 mb-4",children:"Want to learn more about continuous deployment?"}),(0,s.jsx)("a",{href:"https://docs.unhazzle.io/cli",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium",children:"Read the CLI Documentation â†’"})]})]})]})]})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-8 px-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Dashboard"}),(0,s.jsxs)("p",{className:"text-slate-600",children:["Welcome, ",null==(n=i.user)?void 0:n.name,"!"]})]})})}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-12",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-100 to-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)("svg",{className:"w-12 h-12 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"No Projects Yet"}),(0,s.jsx)("p",{className:"text-slate-600 mb-8 leading-relaxed",children:"Get started by creating your first project. Answer 4 quick questions about your application, and we'll automatically configure production-ready infrastructure for you."}),(0,s.jsxs)("button",{onClick:()=>r.push("/questionnaire"),className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold shadow-lg inline-flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:"+"}),(0,s.jsx)("span",{children:"Create Your First Project"})]})]})})]})}):null}function x(e){var a,n,r;let{project:i,state:c}=e,{updateContainer:o,updateResources:d,removeDatabase:m,removeCache:x,removeContainer:u}=(0,l.useDeployment)(),[g,f]=(0,t.useState)(()=>{var e,s,t;return(null==i||null==(t=i.environments)||null==(s=t[0])||null==(e=s.containers)?void 0:e[0])?{kind:"container",id:i.environments[0].containers[0].id,envId:i.environments[0].id}:{kind:"architecture"}}),[N,y]=(0,t.useState)(null),[w,k]=(0,t.useState)(null),[C,S]=(0,t.useState)(null),[A,E]=(0,t.useState)(!1),[z,R]=(0,t.useState)(!1),[P,B]=(0,t.useState)(!1),T=()=>{if(!(null==i?void 0:i.environments))return null;if("container"===g.kind)for(let s of i.environments){var e;let t=null==(e=s.containers)?void 0:e.find(e=>e.id===g.id);if(t)return{type:"container",data:t,env:s}}else if("database"===g.kind){let e=i.environments.find(e=>e.id===g.envId);if(null==e?void 0:e.database)return{type:"database",data:e.database,env:e}}else if("cache"===g.kind){let e=i.environments.find(e=>e.id===g.envId);if(null==e?void 0:e.cache)return{type:"cache",data:e.cache,env:e}}return null},G=T();return((0,t.useEffect)(()=>{let e=T();if("container"===g.kind&&(null==e?void 0:e.data)){let s=JSON.parse(JSON.stringify(e.data));Array.isArray(s.environmentVariables)||(s.environmentVariables=[]),y(s)}else"database"===g.kind&&(null==e?void 0:e.data)?(k(JSON.parse(JSON.stringify(e.data))),y(null)):"cache"===g.kind&&(null==e?void 0:e.data)?(S(JSON.parse(JSON.stringify(e.data))),y(null)):(y(null),k(null),S(null))},[g,i]),i)?(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,s.jsx)("div",{className:"col-span-12 lg:col-span-4 xl:col-span-3",children:(0,s.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl p-4 space-y-4 sticky top-4 border border-slate-200",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-slate-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"ðŸ“¦"}),(0,s.jsx)("h3",{className:"font-bold text-slate-900 text-lg",children:i.name})]}),(0,s.jsxs)("div",{className:"text-xs text-slate-600",children:[(null==(a=i.environments)?void 0:a.length)||0," environment",(null==(n=i.environments)?void 0:n.length)!==1?"s":""]})]}),null==(r=i.environments)?void 0:r.map(e=>{let t=e.containers||[],a=!!e.database,l=!!e.cache;return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 px-4 py-3 border-b border-slate-200",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"ðŸ”§"}),(0,s.jsx)("span",{className:"font-bold text-slate-900",children:e.name}),(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 bg-green-600 rounded-full"}),"Live"]})]})}),(0,s.jsxs)("div",{className:"p-3 space-y-3",children:[t.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-xs font-semibold text-slate-600 mb-2 flex items-center gap-1",children:[(0,s.jsx)("span",{children:"ðŸš€"}),(0,s.jsxs)("span",{children:["Containers (",t.length,")"]})]}),(0,s.jsx)("div",{className:"space-y-1",children:t.map((t,a)=>{var l,n,r;let i=(null==(l=t.imageUrl.split("/").pop())?void 0:l.split(":")[0])||"app-".concat(a+1),c="container"===g.kind&&g.id===t.id;return null==(n=t.serviceAccess)||n.database,null==(r=t.serviceAccess)||r.cache,(0,s.jsx)("button",{onClick:()=>f({kind:"container",id:t.id,envId:e.id}),className:"w-full text-left px-3 py-2 rounded-lg border transition ".concat(c?"border-purple-400 bg-purple-50 shadow-sm":"border-slate-200 hover:border-purple-300 hover:bg-slate-50"),children:(0,s.jsx)("div",{className:"text-sm font-medium text-slate-900 truncate",children:i})},t.id)})})]}),a&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-xs font-semibold text-slate-600 mb-2 flex items-center gap-1",children:[(0,s.jsx)("span",{children:"ðŸ’¾"}),(0,s.jsx)("span",{children:"Database"})]}),(0,s.jsx)("button",{onClick:()=>f({kind:"database",envId:e.id}),className:"w-full text-left px-3 py-2 rounded-lg border transition ".concat("database"===g.kind&&g.envId===e.id?"border-green-400 bg-green-50 shadow-sm":"border-slate-200 hover:border-green-300 hover:bg-slate-50"),children:(0,s.jsx)("div",{className:"text-sm font-medium text-slate-900",children:"PostgreSQL"})})]}),l&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-xs font-semibold text-slate-600 mb-2 flex items-center gap-1",children:[(0,s.jsx)("span",{children:"âš¡"}),(0,s.jsx)("span",{children:"Cache"})]}),(0,s.jsx)("button",{onClick:()=>f({kind:"cache",envId:e.id}),className:"w-full text-left px-3 py-2 rounded-lg border transition ".concat("cache"===g.kind&&g.envId===e.id?"border-red-400 bg-red-50 shadow-sm":"border-slate-200 hover:border-red-300 hover:bg-slate-50"),children:(0,s.jsx)("div",{className:"text-sm font-medium text-slate-900",children:"Redis"})})]})]})]},e.id)}),(0,s.jsx)("button",{onClick:()=>f({kind:"architecture"}),className:"w-full text-left px-4 py-3 rounded-lg border transition ".concat("architecture"===g.kind?"border-purple-400 bg-purple-50 shadow-sm":"border-slate-200 hover:border-purple-300 hover:bg-slate-50 bg-white"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[(0,s.jsx)("span",{className:"text-xl",children:"ðŸ—ï¸"}),(0,s.jsx)("span",{children:"Architecture Diagram"})]})})]})}),(0,s.jsxs)("div",{className:"col-span-12 lg:col-span-8 xl:col-span-9",children:["container"===g.kind&&G&&N&&(0,s.jsx)(h,{container:G.data,draftContainer:N,setDraftContainer:y,hasChanges:!!(null==G?void 0:G.data)&&!!N&&"container"===g.kind&&JSON.stringify({resources:N.resources,healthCheck:N.healthCheck,exposure:N.exposure,serviceAccess:N.serviceAccess,environmentVariables:N.environmentVariables})!==JSON.stringify({resources:G.data.resources,healthCheck:G.data.healthCheck,exposure:G.data.exposure,serviceAccess:G.data.serviceAccess,environmentVariables:G.data.environmentVariables}),showChanges:A,setShowChanges:E,onApply:()=>R(!0),isApplying:P,state:c,onRemove:u}),"database"===g.kind&&G&&w&&(0,s.jsx)(p,{database:G.data,draftDatabase:w,setDraftDatabase:k,hasChanges:!!(null==G?void 0:G.data)&&!!w&&"database"===g.kind&&JSON.stringify(w)!==JSON.stringify(G.data),showChanges:A,setShowChanges:E,onApply:()=>R(!0),isApplying:P,state:c,onRemove:m}),"cache"===g.kind&&G&&C&&(0,s.jsx)(b,{cache:G.data,draftCache:C,setDraftCache:S,hasChanges:!!(null==G?void 0:G.data)&&!!C&&"cache"===g.kind&&JSON.stringify(C)!==JSON.stringify(G.data),showChanges:A,setShowChanges:E,onApply:()=>R(!0),isApplying:P,state:c,onRemove:x}),"architecture"===g.kind&&(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"ðŸ—ï¸"}),(0,s.jsx)("span",{children:"Architecture Diagram"})]}),(0,s.jsx)("p",{className:"text-slate-600 mb-6",children:"Visual representation of your deployed infrastructure, including container connections and internal DNS."})]}),(0,s.jsx)(j,{state:c})]})]}),z&&(0,s.jsx)(v,{selected:g,selectedResource:G,draftContainer:N,draftDatabase:w,draftCache:C,onCancel:()=>R(!1),onConfirm:()=>{"container"===g.kind?(null==G?void 0:G.data)&&N&&(R(!1),B(!0),setTimeout(()=>{o(G.data.id,{resources:N.resources,healthCheck:N.healthCheck,exposure:N.exposure,serviceAccess:N.serviceAccess,environmentVariables:N.environmentVariables}),B(!1)},800)):"database"===g.kind?(()=>{if(!w||!c.resources)return;let e=c.resources;R(!1),B(!0),setTimeout(()=>{d({replicas:e.replicas,cpu:e.cpu,memory:e.memory,database:w,cache:e.cache}),B(!1)},800)})():"cache"===g.kind&&(()=>{if(!C||!c.resources)return;let e=c.resources;R(!1),B(!0),setTimeout(()=>{d({replicas:e.replicas,cpu:e.cpu,memory:e.memory,database:e.database,cache:C}),B(!1)},800)})()}})]}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ“¦"}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"No Projects Yet"}),(0,s.jsx)("p",{className:"text-slate-600 mb-6",children:"Create your first project to get started with Unhazzle"}),(0,s.jsx)("button",{onClick:()=>window.location.href="/questionnaire",className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold",children:"Create Project"})]})}function h(e){var t,a,l,n;let{container:r,draftContainer:i,setDraftContainer:c,hasChanges:o,showChanges:d,setShowChanges:m,onApply:x,isApplying:h,state:p,onRemove:b}=e;return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-slate-900",children:r.name||"Application Container"}),(0,s.jsxs)("p",{className:"text-xs text-slate-500",children:["Image: ",r.imageUrl]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>m(!0),disabled:!o||h,className:"px-4 py-2 rounded-lg text-sm font-medium border ".concat(o?"border-amber-300 text-amber-700 bg-amber-50":"border-slate-200 text-slate-400"," disabled:opacity-50"),children:"Show Changes"}),(0,s.jsx)("button",{onClick:x,disabled:!o||h,className:"px-4 py-2 rounded-lg text-sm font-semibold bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-50",children:h?"Applyingâ€¦":"Apply"}),(0,s.jsx)("button",{onClick:()=>{if((p.containers||[]).length<=1)return void alert("Cannot remove the last container. Your project must have at least one container.");window.confirm('Remove container "'.concat(r.name||"container",'"? This action cannot be undone in demo mode.'))&&b(r.id)},disabled:h,className:"px-4 py-2 rounded-lg text-sm font-medium border border-red-300 text-red-600 hover:bg-red-50 disabled:opacity-50",children:"Remove"})]})]}),"public"===r.exposure&&(()=>{var e;let t=(null==(e=r.imageUrl.split("/").pop())?void 0:e.split(":")[0])||"app",a=r.id.substring(0,6),l="".concat(t,"-").concat(a,".unhazzle.app");return(0,s.jsx)("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Public Endpoint"}),(0,s.jsx)("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded-full",children:"Live"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("code",{className:"text-sm text-purple-600 font-mono",children:["https://",l]}),(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText("https://".concat(l))},className:"p-1 hover:bg-slate-200 rounded transition text-sm",title:"Copy to clipboard",children:"ðŸ“‹"})]}),(0,s.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["Port ",r.port," â€¢ SSL Enabled â€¢ CDN Cached"]})]})})})})(),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Resources"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"CPU"}),(0,s.jsxs)("select",{value:i.resources.cpu,onChange:e=>c({...i,resources:{...i.resources,cpu:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"0.25",children:"0.25"}),(0,s.jsx)("option",{value:"0.5",children:"0.5"}),(0,s.jsx)("option",{value:"1",children:"1"}),(0,s.jsx)("option",{value:"2",children:"2"}),(0,s.jsx)("option",{value:"4",children:"4"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Memory"}),(0,s.jsxs)("select",{value:i.resources.memory,onChange:e=>c({...i,resources:{...i.resources,memory:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"0.5GB",children:"0.5GB"}),(0,s.jsx)("option",{value:"1GB",children:"1GB"}),(0,s.jsx)("option",{value:"2GB",children:"2GB"}),(0,s.jsx)("option",{value:"4GB",children:"4GB"}),(0,s.jsx)("option",{value:"8GB",children:"8GB"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Replicas (min)"}),(0,s.jsx)("input",{type:"number",min:1,value:i.resources.replicas.min,onChange:e=>c({...i,resources:{...i.resources,replicas:{...i.resources.replicas,min:Math.max(1,parseInt(e.target.value)||1)}}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Set min=max for fixed scaling. Different values enable auto-scaling."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Environment Variables"}),(0,s.jsxs)("div",{className:"space-y-3",children:[0===i.environmentVariables.length&&(0,s.jsx)("div",{className:"text-xs text-slate-500",children:"No variables defined yet."}),i.environmentVariables.map((e,t)=>(0,s.jsxs)("div",{className:"grid md:grid-cols-12 gap-3 items-start",children:[(0,s.jsxs)("div",{className:"md:col-span-4",children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Key"}),(0,s.jsx)("input",{type:"text",value:e.key,onChange:e=>{let s=[...i.environmentVariables];s[t]={...s[t],key:e.target.value},c({...i,environmentVariables:s})},placeholder:"KEY",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono"})]}),(0,s.jsxs)("div",{className:"md:col-span-6",children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Value"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:!1===e.masked?"text":"password",value:e.value,onChange:e=>{let s=[...i.environmentVariables];s[t]={...s[t],value:e.target.value},c({...i,environmentVariables:s})},placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono"}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e=[...i.environmentVariables],s=!1!==e[t].masked;e[t]={...e[t],masked:!s},c({...i,environmentVariables:e})},className:"p-2 rounded-lg border border-slate-300 hover:bg-slate-50 text-slate-900","aria-label":!1===e.masked?"Hide value":"Show value",title:!1===e.masked?"Hide value":"Show value",children:!1===e.masked?"ðŸ‘ï¸â€ðŸ—¨ï¸":"ðŸ‘ï¸"})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs mb-1 invisible",children:"Action"}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e=i.environmentVariables.filter((e,s)=>s!==t);c({...i,environmentVariables:e})},className:"w-full md:w-auto px-3 py-2 text-xs rounded-lg border border-red-300 text-red-700 hover:bg-red-50",children:"Remove"})]})]},t)),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"ðŸ”"}),(0,s.jsx)("span",{children:"Values are masked by default and stored encrypted."})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e=[...i.environmentVariables,{key:"",value:"",masked:!0}];c({...i,environmentVariables:e})},className:"px-3 py-2 text-xs rounded-lg border border-slate-300 hover:bg-slate-50 text-slate-900",children:"+ Add variable"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Health Check"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Protocol"}),(0,s.jsxs)("select",{value:i.healthCheck.protocol,onChange:e=>c({...i,healthCheck:{...i.healthCheck,protocol:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"HTTP",children:"HTTP"}),(0,s.jsx)("option",{value:"TCP",children:"TCP"}),(0,s.jsx)("option",{value:"gRPC",children:"gRPC"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Port"}),(0,s.jsx)("input",{type:"number",value:i.healthCheck.port,onChange:e=>c({...i,healthCheck:{...i.healthCheck,port:parseInt(e.target.value)||i.port}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Path"}),(0,s.jsx)("input",{type:"text",value:i.healthCheck.path||"",onChange:e=>c({...i,healthCheck:{...i.healthCheck,path:e.target.value}}),placeholder:"/health",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Networking"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Visibility"}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,s.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",checked:"public"===i.exposure,onChange:()=>c({...i,exposure:"public"})}),(0,s.jsx)("span",{className:"text-slate-900",children:"Public"})]}),(0,s.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",checked:"private"===i.exposure,onChange:()=>c({...i,exposure:"private"})}),(0,s.jsx)("span",{className:"text-slate-900",children:"Private"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Domain"}),(0,s.jsx)("div",{className:"text-sm text-slate-900",children:(null==(t=p.domain)?void 0:t.customDomain)||"".concat(null==(a=p.domain)?void 0:a.defaultSubdomain,".unhazzle.app")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Port"}),(0,s.jsx)("div",{className:"text-sm font-mono text-slate-900",children:i.port})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Service Access"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(null==(l=p.resources)?void 0:l.database)&&(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:i.serviceAccess.database,onChange:e=>{let s=e.target.checked,t="UNHAZZLE_POSTGRES_URL",a=[...i.environmentVariables];s?a.some(e=>e.key===t)||a.push({key:t,value:"",masked:!1}):a=a.filter(e=>e.key!==t),c({...i,serviceAccess:{...i.serviceAccess,database:s},environmentVariables:a})}}),(0,s.jsx)("span",{className:"text-slate-900",children:"PostgreSQL"})]}),(null==(n=p.resources)?void 0:n.cache)&&(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:i.serviceAccess.cache,onChange:e=>{let s=e.target.checked,t="UNHAZZLE_REDIS_URL",a=[...i.environmentVariables];s?a.some(e=>e.key===t)||a.push({key:t,value:"",masked:!1}):a=a.filter(e=>e.key!==t),c({...i,serviceAccess:{...i.serviceAccess,cache:s},environmentVariables:a})}}),(0,s.jsx)("span",{className:"text-slate-900",children:"Redis"})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Connection strings are auto-injected as environment variables."})]})]}),d&&o&&(0,s.jsx)(u,{current:r,draft:i,onClose:()=>m(!1)})]})}function u(e){let{current:t,draft:a,onClose:l}=e,n=c(t.resources.cpu,t.resources.memory,t.resources.replicas,a.resources.cpu,a.resources.memory,a.resources.replicas);return(0,s.jsxs)("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h5",{className:"font-semibold text-amber-900",children:"ðŸ“ Pending Changes"}),(0,s.jsx)("button",{onClick:l,className:"text-xs text-amber-700 underline",children:"Hide"})]}),(0,s.jsxs)("ul",{className:"text-sm text-amber-900 list-disc ml-5 space-y-1",children:[t.resources.cpu!==a.resources.cpu&&(0,s.jsxs)("li",{children:["CPU: ",t.resources.cpu," â†’ ",a.resources.cpu]}),t.resources.memory!==a.resources.memory&&(0,s.jsxs)("li",{children:["Memory: ",t.resources.memory," â†’ ",a.resources.memory]}),t.resources.replicas.min!==a.resources.replicas.min&&(0,s.jsxs)("li",{children:["Replicas (min): ",t.resources.replicas.min," â†’ ",a.resources.replicas.min]}),t.exposure!==a.exposure&&(0,s.jsxs)("li",{children:["Visibility: ",t.exposure," â†’ ",a.exposure]}),JSON.stringify(t.environmentVariables)!==JSON.stringify(a.environmentVariables)&&(0,s.jsx)("li",{children:"Environment variables updated"})]}),(0,s.jsxs)("div",{className:"text-xs text-amber-800 mt-3",children:["Impact: CPU/RAM changes require rolling restart. Estimated duration: ~2 minutes. Zero-downtime ensured.",0!==n&&(0,s.jsxs)("div",{className:"font-semibold mt-1",children:["ðŸ’° Cost impact: ",n>0?"+":"","$",Math.abs(n).toFixed(2),"/month"]})]})]})}function p(e){let{database:t,draftDatabase:a,setDraftDatabase:l,hasChanges:n,showChanges:r,setShowChanges:i,onApply:c,isApplying:d,state:m,onRemove:x}=e;return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-slate-900",children:"PostgreSQL Database"}),(0,s.jsxs)("p",{className:"text-xs text-slate-500",children:["Managed ",a.engine," instance"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>i(!0),disabled:!n||d,className:"px-4 py-2 rounded-lg text-sm font-medium border ".concat(n?"border-amber-300 text-amber-700 bg-amber-50":"border-slate-200 text-slate-400"," disabled:opacity-50"),children:"Show Changes"}),(0,s.jsx)("button",{onClick:c,disabled:!n||d,className:"px-4 py-2 rounded-lg text-sm font-semibold bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-50",children:d?"Applyingâ€¦":"Apply"}),(0,s.jsx)("button",{onClick:()=>{if((m.containers||[]).some(e=>{var s;return null==(s=e.serviceAccess)?void 0:s.database}))return void alert("Cannot remove database: one or more containers are still connected. Disable database access in container settings first.");window.confirm("Remove database from deployed configuration? This action cannot be undone in demo mode.")&&x()},disabled:d,className:"px-4 py-2 rounded-lg text-sm font-medium border border-red-300 text-red-600 hover:bg-red-50 disabled:opacity-50",children:"Remove"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Resources"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"CPU"}),(0,s.jsxs)("select",{value:a.cpu,onChange:e=>l({...a,cpu:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"0.5",children:"0.5"}),(0,s.jsx)("option",{value:"1",children:"1"}),(0,s.jsx)("option",{value:"2",children:"2"}),(0,s.jsx)("option",{value:"4",children:"4"}),(0,s.jsx)("option",{value:"8",children:"8"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Memory"}),(0,s.jsxs)("select",{value:a.memory,onChange:e=>l({...a,memory:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"1GB",children:"1GB"}),(0,s.jsx)("option",{value:"2GB",children:"2GB"}),(0,s.jsx)("option",{value:"4GB",children:"4GB"}),(0,s.jsx)("option",{value:"8GB",children:"8GB"}),(0,s.jsx)("option",{value:"16GB",children:"16GB"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Storage"}),(0,s.jsxs)("select",{value:a.storage,onChange:e=>l({...a,storage:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"10GB",children:"10GB"}),(0,s.jsx)("option",{value:"20GB",children:"20GB"}),(0,s.jsx)("option",{value:"50GB",children:"50GB"}),(0,s.jsx)("option",{value:"100GB",children:"100GB"}),(0,s.jsx)("option",{value:"200GB",children:"200GB"}),(0,s.jsx)("option",{value:"500GB",children:"500GB"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Backups"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Frequency"}),(0,s.jsxs)("select",{value:a.backups.frequency,onChange:e=>l({...a,backups:{...a.backups,frequency:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"hourly",children:"Hourly"}),(0,s.jsx)("option",{value:"daily",children:"Daily"}),(0,s.jsx)("option",{value:"weekly",children:"Weekly"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Retention"}),(0,s.jsxs)("select",{value:a.backups.retention,onChange:e=>l({...a,backups:{...a.backups,retention:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"7 days",children:"7 days"}),(0,s.jsx)("option",{value:"14 days",children:"14 days"}),(0,s.jsx)("option",{value:"30 days",children:"30 days"}),(0,s.jsx)("option",{value:"90 days",children:"90 days"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Enabled"}),(0,s.jsxs)("label",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:a.backups.enabled,onChange:e=>l({...a,backups:{...a.backups,enabled:e.target.checked}})}),(0,s.jsx)("span",{className:"text-sm text-slate-900",children:"Automatic backups"})]})]})]})]}),r&&n&&(0,s.jsxs)("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h5",{className:"font-semibold text-amber-900",children:"ðŸ“ Pending Changes"}),(0,s.jsx)("button",{onClick:()=>i(!1),className:"text-xs text-amber-700 underline",children:"Hide"})]}),(0,s.jsxs)("ul",{className:"text-sm text-amber-900 list-disc ml-5 space-y-1",children:[t.cpu!==a.cpu&&(0,s.jsxs)("li",{children:["CPU: ",t.cpu," â†’ ",a.cpu]}),t.memory!==a.memory&&(0,s.jsxs)("li",{children:["Memory: ",t.memory," â†’ ",a.memory]}),t.storage!==a.storage&&(0,s.jsxs)("li",{children:["Storage: ",t.storage," â†’ ",a.storage]})]}),(0,s.jsxs)("div",{className:"text-xs text-amber-800 mt-3",children:["Impact: Storage changes are instant. CPU/Memory changes require brief maintenance window (~3 min).",(()=>{let e=o(t,a);return 0!==e?(0,s.jsxs)("div",{className:"font-semibold mt-1",children:["ðŸ’° Cost impact: ",e>0?"+":"","$",Math.abs(e).toFixed(2),"/month"]}):null})()]})]})]})}function b(e){let{cache:t,draftCache:a,setDraftCache:l,hasChanges:n,showChanges:r,setShowChanges:i,onApply:c,isApplying:o,state:m,onRemove:x}=e;return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-slate-900",children:"Redis Cache"}),(0,s.jsxs)("p",{className:"text-xs text-slate-500",children:["Managed ",a.engine," instance"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>i(!0),disabled:!n||o,className:"px-4 py-2 rounded-lg text-sm font-medium border ".concat(n?"border-amber-300 text-amber-700 bg-amber-50":"border-slate-200 text-slate-400"," disabled:opacity-50"),children:"Show Changes"}),(0,s.jsx)("button",{onClick:c,disabled:!n||o,className:"px-4 py-2 rounded-lg text-sm font-semibold bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-50",children:o?"Applyingâ€¦":"Apply"}),(0,s.jsx)("button",{onClick:()=>{if((m.containers||[]).some(e=>{var s;return null==(s=e.serviceAccess)?void 0:s.cache}))return void alert("Cannot remove cache: one or more containers are still connected. Disable cache access in container settings first.");window.confirm("Remove cache from deployed configuration? This action cannot be undone in demo mode.")&&x()},disabled:o,className:"px-4 py-2 rounded-lg text-sm font-medium border border-red-300 text-red-600 hover:bg-red-50 disabled:opacity-50",children:"Remove"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Resources"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Memory"}),(0,s.jsxs)("select",{value:a.memory,onChange:e=>l({...a,memory:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"256MB",children:"256MB"}),(0,s.jsx)("option",{value:"512MB",children:"512MB"}),(0,s.jsx)("option",{value:"1GB",children:"1GB"}),(0,s.jsx)("option",{value:"2GB",children:"2GB"}),(0,s.jsx)("option",{value:"4GB",children:"4GB"}),(0,s.jsx)("option",{value:"8GB",children:"8GB"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Version"}),(0,s.jsxs)("select",{value:a.version,onChange:e=>l({...a,version:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"7.2",children:"7.2 (Latest)"}),(0,s.jsx)("option",{value:"7.0",children:"7.0"}),(0,s.jsx)("option",{value:"6.2",children:"6.2"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Configuration"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Eviction Policy"}),(0,s.jsxs)("select",{value:a.evictionPolicy,onChange:e=>l({...a,evictionPolicy:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"allkeys-lru",children:"allkeys-lru (Recommended)"}),(0,s.jsx)("option",{value:"volatile-lru",children:"volatile-lru"}),(0,s.jsx)("option",{value:"allkeys-lfu",children:"allkeys-lfu"}),(0,s.jsx)("option",{value:"volatile-lfu",children:"volatile-lfu"}),(0,s.jsx)("option",{value:"noeviction",children:"noeviction"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Persistence"}),(0,s.jsxs)("select",{value:a.persistence,onChange:e=>l({...a,persistence:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"aof",children:"AOF (Append-only file)"}),(0,s.jsx)("option",{value:"rdb",children:"RDB (Snapshots)"}),(0,s.jsx)("option",{value:"both",children:"Both (AOF + RDB)"}),(0,s.jsx)("option",{value:"none",children:"None (In-memory only)"})]})]})]})]}),r&&n&&(0,s.jsxs)("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h5",{className:"font-semibold text-amber-900",children:"ðŸ“ Pending Changes"}),(0,s.jsx)("button",{onClick:()=>i(!1),className:"text-xs text-amber-700 underline",children:"Hide"})]}),(0,s.jsxs)("ul",{className:"text-sm text-amber-900 list-disc ml-5 space-y-1",children:[t.memory!==a.memory&&(0,s.jsxs)("li",{children:["Memory: ",t.memory," â†’ ",a.memory]}),t.version!==a.version&&(0,s.jsxs)("li",{children:["Version: ",t.version," â†’ ",a.version]}),t.evictionPolicy!==a.evictionPolicy&&(0,s.jsxs)("li",{children:["Eviction Policy: ",t.evictionPolicy," â†’ ",a.evictionPolicy]})]}),(0,s.jsxs)("div",{className:"text-xs text-amber-800 mt-3",children:["Impact: Memory changes require restart (~30 sec). Data persisted if AOF/RDB enabled.",(()=>{let e=d(t.memory,a.memory);return 0!==e?(0,s.jsxs)("div",{className:"font-semibold mt-1",children:["ðŸ’° Cost impact: ",e>0?"+":"","$",Math.abs(e).toFixed(2),"/month"]}):null})()]})]})]})}function v(e){var t;let{selected:a,selectedResource:l,draftContainer:n,draftDatabase:r,draftCache:i,onCancel:m,onConfirm:x}=e;return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:"âš ï¸"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Apply Configuration Changes?"}),"container"===a.kind&&l&&n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-slate-700 mb-4",children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Summary:"}),(0,s.jsxs)("p",{className:"text-slate-600",children:["Container: ",(0,s.jsx)("span",{className:"font-mono",children:l.data.name||(null==(t=l.data.imageUrl.split("/").pop())?void 0:t.split(":")[0])})]}),(0,s.jsxs)("ul",{className:"list-disc ml-5 mt-2 space-y-1 text-slate-600",children:[l.data.resources.cpu!==n.resources.cpu&&(0,s.jsxs)("li",{children:["CPU: ",l.data.resources.cpu," â†’ ",n.resources.cpu," cores"]}),l.data.resources.memory!==n.resources.memory&&(0,s.jsxs)("li",{children:["Memory: ",l.data.resources.memory," â†’ ",n.resources.memory]}),l.data.resources.replicas.min!==n.resources.replicas.min&&(0,s.jsxs)("li",{children:["Min replicas: ",l.data.resources.replicas.min," â†’ ",n.resources.replicas.min]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2 text-sm",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Impact Assessment:"}),(0,s.jsx)("p",{className:"text-slate-600",children:"âš ï¸ Rolling restart required"}),(0,s.jsx)("p",{className:"text-slate-600",children:"â±ï¸ Estimated time: ~2 minutes"}),(0,s.jsx)("p",{className:"text-slate-600",children:"âœ… No expected traffic disruption"}),(()=>{let e=c(l.data.resources.cpu,l.data.resources.memory,l.data.resources.replicas,n.resources.cpu,n.resources.memory,n.resources.replicas);return 0!==e?(0,s.jsxs)("p",{className:"text-slate-600 font-medium",children:["ðŸ’° Cost impact: ",e>0?"+":"","$",Math.abs(e).toFixed(2),"/month"]}):null})()]})]}),"database"===a.kind&&l&&r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-slate-700 mb-4",children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Summary:"}),(0,s.jsxs)("p",{className:"text-slate-600",children:["Resource: ",(0,s.jsx)("span",{className:"font-mono",children:"PostgreSQL Database"})]}),(0,s.jsxs)("ul",{className:"list-disc ml-5 mt-2 space-y-1 text-slate-600",children:[l.data.cpu!==r.cpu&&(0,s.jsxs)("li",{children:["CPU: ",l.data.cpu," â†’ ",r.cpu," cores"]}),l.data.memory!==r.memory&&(0,s.jsxs)("li",{children:["Memory: ",l.data.memory," â†’ ",r.memory]}),l.data.storage!==r.storage&&(0,s.jsxs)("li",{children:["Storage: ",l.data.storage," â†’ ",r.storage]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2 text-sm",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Impact Assessment:"}),(0,s.jsx)("p",{className:"text-slate-600",children:"âš ï¸ Maintenance window required for CPU/Memory changes"}),(0,s.jsx)("p",{className:"text-slate-600",children:"â±ï¸ Estimated time: ~3 minutes"}),(0,s.jsx)("p",{className:"text-slate-600",children:"âœ… Zero data loss guaranteed"}),(()=>{let e=o(l.data,r);return 0!==e?(0,s.jsxs)("p",{className:"text-slate-600 font-medium",children:["ðŸ’° Cost impact: ",e>0?"+":"","$",Math.abs(e).toFixed(2),"/month"]}):null})()]})]}),"cache"===a.kind&&l&&i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-slate-700 mb-4",children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Summary:"}),(0,s.jsxs)("p",{className:"text-slate-600",children:["Resource: ",(0,s.jsx)("span",{className:"font-mono",children:"Redis Cache"})]}),(0,s.jsxs)("ul",{className:"list-disc ml-5 mt-2 space-y-1 text-slate-600",children:[l.data.memory!==i.memory&&(0,s.jsxs)("li",{children:["Memory: ",l.data.memory," â†’ ",i.memory]}),l.data.version!==i.version&&(0,s.jsxs)("li",{children:["Version: ",l.data.version," â†’ ",i.version]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2 text-sm",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Impact Assessment:"}),(0,s.jsx)("p",{className:"text-slate-600",children:"âš ï¸ Restart required (~30 seconds)"}),(0,s.jsx)("p",{className:"text-slate-600",children:"âœ… Data persisted if AOF/RDB enabled"}),(()=>{let e=d(l.data.memory,i.memory);return 0!==e?(0,s.jsxs)("p",{className:"text-slate-600 font-medium",children:["ðŸ’° Cost impact: ",e>0?"+":"","$",Math.abs(e).toFixed(2),"/month"]}):null})()]})]}),(0,s.jsx)("p",{className:"text-sm text-slate-600 mt-4",children:"Are you sure you want to apply these changes?"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[(0,s.jsx)("button",{onClick:m,className:"px-5 py-2 rounded-lg border border-slate-300 text-slate-700 hover:bg-slate-50 font-medium",children:"Cancel"}),(0,s.jsx)("button",{onClick:x,className:"px-5 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 font-medium",children:"Apply Changes"})]})]})})}function j(e){var t,a,l,n;let{state:r}=e,i=r.containers.filter(e=>"public"===e.exposure),c=r.containers.filter(e=>"private"===e.exposure),o=i.length>0,d=!!(null==(t=r.resources)?void 0:t.database),m=!!(null==(a=r.resources)?void 0:a.cache),x=e=>{var s;return(null==(s=e.split("/").pop())?void 0:s.split(":")[0])||"container"},h=e=>e.serviceName||"container-".concat(e.id.substring(0,8));return(0,s.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl p-8 border border-slate-200",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-8",children:[o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-purple-500 text-white rounded-lg p-6 shadow-lg text-center min-w-[200px]",children:[(0,s.jsx)("div",{className:"text-3xl mb-2",children:"âš–ï¸"}),(0,s.jsx)("div",{className:"font-bold",children:"Load Balancer"}),(0,s.jsx)("div",{className:"text-sm opacity-90 mt-1",children:(null==(l=r.domain)?void 0:l.customDomain)||"".concat(null==(n=r.domain)?void 0:n.defaultSubdomain,".unhazzle.io")})]}),(0,s.jsx)("div",{className:"text-slate-400",children:(0,s.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",children:[(0,s.jsx)("line",{x1:"20",y1:"0",x2:"20",y2:"30",stroke:"currentColor",strokeWidth:"3"}),(0,s.jsx)("polygon",{points:"20,40 15,30 25,30",fill:"currentColor"})]})})]}),i.length>0&&(0,s.jsx)("div",{className:"flex gap-6 flex-wrap justify-center",children:i.map((e,t)=>{let a=x(e.imageUrl),l=h(e),n=r.containers.indexOf(e)+1;return(0,s.jsxs)("div",{className:"bg-blue-500 text-white rounded-lg p-4 shadow-lg text-center min-w-[160px]",children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:"ðŸš€"}),(0,s.jsxs)("div",{className:"font-bold text-sm",children:["Container ",n]}),(0,s.jsx)("div",{className:"text-xs opacity-90 mt-1",children:a}),(0,s.jsxs)("div",{className:"text-xs opacity-75 mt-2",children:[":",e.port]}),(0,s.jsxs)("div",{className:"text-xs font-mono bg-blue-600 rounded px-2 py-1 mt-2",children:[l,".internal"]})]},e.id)})}),c.length>0&&(0,s.jsxs)(s.Fragment,{children:[i.length>0&&(0,s.jsx)("div",{className:"text-slate-400 text-sm",children:"Internal Network"}),(0,s.jsx)("div",{className:"flex gap-6 flex-wrap justify-center",children:c.map((e,t)=>{let a=x(e.imageUrl),l=h(e),n=r.containers.indexOf(e)+1;return(0,s.jsxs)("div",{className:"bg-slate-500 text-white rounded-lg p-4 shadow-lg text-center min-w-[160px]",children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:"ðŸ”’"}),(0,s.jsxs)("div",{className:"font-bold text-sm",children:["Container ",n]}),(0,s.jsx)("div",{className:"text-xs opacity-90 mt-1",children:a}),(0,s.jsxs)("div",{className:"text-xs opacity-75 mt-2",children:[":",e.port]}),(0,s.jsxs)("div",{className:"text-xs font-mono bg-slate-600 rounded px-2 py-1 mt-2",children:[l,".internal"]})]},e.id)})})]}),(d||m)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-slate-400 text-sm",children:"Backend Services"}),(0,s.jsxs)("div",{className:"flex gap-6",children:[d&&(0,s.jsxs)("div",{className:"bg-green-500 text-white rounded-lg p-4 shadow-lg text-center min-w-[160px]",children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:"ðŸ˜"}),(0,s.jsx)("div",{className:"font-bold text-sm",children:"PostgreSQL"}),(0,s.jsxs)("div",{className:"text-xs opacity-90 mt-1",children:[r.resources.database.cpu," CPU"]}),(0,s.jsx)("div",{className:"text-xs font-mono bg-green-600 rounded px-2 py-1 mt-2",children:"postgres.internal"})]}),m&&(0,s.jsxs)("div",{className:"bg-red-500 text-white rounded-lg p-4 shadow-lg text-center min-w-[160px]",children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:"âš¡"}),(0,s.jsx)("div",{className:"font-bold text-sm",children:"Redis"}),(0,s.jsxs)("div",{className:"text-xs opacity-90 mt-1",children:[r.resources.cache.memory," RAM"]}),(0,s.jsx)("div",{className:"text-xs font-mono bg-red-600 rounded px-2 py-1 mt-2",children:"redis.internal"})]})]})]})]}),(0,s.jsxs)("div",{className:"mt-8 pt-6 border-t border-slate-300 flex flex-wrap gap-4 justify-center text-sm",children:[o&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-purple-500 rounded"}),(0,s.jsx)("span",{className:"text-slate-700",children:"Public Internet"})]}),i.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded"}),(0,s.jsx)("span",{className:"text-slate-700",children:"Public Container"})]}),c.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-slate-500 rounded"}),(0,s.jsx)("span",{className:"text-slate-700",children:"Private Container"})]}),d&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded"}),(0,s.jsx)("span",{className:"text-slate-700",children:"Database"})]}),m&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded"}),(0,s.jsx)("span",{className:"text-slate-700",children:"Cache"})]})]})]})}function g(e){var s,t,a,l,n,r,i,c,o,d,m,x,h,u,p;let b=(null==(s=e.questionnaire)?void 0:s.appType)||"web",v=null==(t=e.resources)?void 0:t.database,j=null==(a=e.resources)?void 0:a.cache;null==(l=e.environment)||l.autogenerated;let g=(null==(n=e.environment)?void 0:n.userSecrets)||{},f="environment:\n";v&&(f+="  DATABASE_URL: ${{ secrets.DATABASE_URL }}\n"),j&&(f+="  REDIS_URL: ${{ secrets.REDIS_URL }}\n"),Object.keys(g).length>0&&Object.keys(g).forEach(e=>{f+="  ".concat(e,": ${{ secrets.").concat(e," }}\n")}),"ecommerce"===b?(f+="  NODE_ENV: production\n",f+="  STRIPE_PUBLIC_KEY: ${{ secrets.STRIPE_PUBLIC_KEY }}\n",f+="  STRIPE_SECRET_KEY: ${{ secrets.STRIPE_SECRET_KEY }}\n",f+="  STRIPE_WEBHOOK_SECRET: ${{ secrets.STRIPE_WEBHOOK_SECRET }}\n",f+="  NEXTAUTH_URL: https://".concat((null==(x=e.domain)?void 0:x.customDomain)||(null==(h=e.domain)?void 0:h.defaultSubdomain),"\n"),f+="  NEXTAUTH_SECRET: ${{ secrets.NEXTAUTH_SECRET }}\n"):"saas"===b?(f+="  NODE_ENV: production\n",f+="  API_KEY: ${{ secrets.API_KEY }}\n",f+="  JWT_SECRET: ${{ secrets.JWT_SECRET }}\n",f+="  APP_URL: https://".concat((null==(u=e.domain)?void 0:u.customDomain)||(null==(p=e.domain)?void 0:p.defaultSubdomain),"\n")):(f+="  NODE_ENV: production\n",f+="  LOG_LEVEL: info\n");let N="";return e.containers&&e.containers.length>0&&(N="containers:\n",e.containers.forEach((e,s)=>{var t;let a=(null==(t=e.imageUrl.split("/").pop())?void 0:t.split(":")[0])||"container-".concat(s+1);N+="  - name: ".concat(a,"\n"),N+="    image: ".concat(e.imageUrl,"\n"),N+="    port: ".concat(e.port,"\n"),N+="    exposure: ".concat(e.exposure,"\n"),N+="    resources:\n",N+="      cpu: ".concat(e.resources.cpu,"\n"),N+="      memory: ".concat(e.resources.memory,"\n"),N+="      replicas:\n",N+="        min: ".concat(e.resources.replicas.min,"\n"),N+="        max: ".concat(e.resources.replicas.max,"\n"),e.volume&&(N+="    volume:\n",N+="      mount_path: ".concat(e.volume.mountPath,"\n"),N+="      size: ".concat(e.volume.sizeGB,"GB\n"),N+="      auto_scale: ".concat(e.volume.autoScale,"\n"),N+="      backup_frequency: ".concat(e.volume.backupFrequency,"\n"),N+="      delete_with_container: ".concat(e.volume.deleteWithContainer,"\n")),N+="\n"})),"# Unhazzle Deployment Configuration\n# Generated from your application setup\n# Reference: https://docs.unhazzle.io/yaml-config\n\nproject: ".concat((null==(i=e.user)||null==(r=i.name)?void 0:r.toLowerCase().replace(/\s+/g,"-"))||"my-app","\nenvironment: production\n\ndomain: ").concat((null==(c=e.domain)?void 0:c.customDomain)||(null==(o=e.domain)?void 0:o.defaultSubdomain)||"your-app.unhazzle.io","\nssl: true  # Auto-provisioned with Let's Encrypt\n\n").concat(N).concat(v?"services:\n  database:\n    type: ".concat(e.resources.database.engine,'\n    version: "').concat("postgres"===e.resources.database.engine?"16":"8.0",'"\n    cpu: ').concat(e.resources.database.cpu,"\n    memory: ").concat(e.resources.database.memory,"\n    storage: ").concat(e.resources.database.storage,'\n    backups:\n      enabled: true\n      retention_days: 30\n      frequency: daily\n      time: "02:00"  # 2 AM UTC\n    ha_replica: true\n    connection_pooling: true\n'):"services: {}  # No database services\n","\n").concat(j?"  cache:\n    type: ".concat(e.resources.cache.engine,'\n    version: "').concat("redis"===e.resources.cache.engine?"7.2":"latest",'"\n    memory: ').concat(e.resources.cache.memory,"\n    persistence: true\n    eviction_policy: allkeys-lru\n"):"","\n\n").concat(f,"\n\n# Monitoring and alerting\nmonitoring:\n  enabled: true\n  metrics_retention: 90d\n  alerts:\n    - name: high_cpu\n      threshold: 85%\n      duration: 5m\n    - name: high_memory\n      threshold: 90%\n      duration: 5m\n    - name: deployment_failure\n      threshold: any\n      duration: 1m\n\n# Security\nsecurity:\n  auto_https: true\n  hsts_enabled: true\n  cors_origins:\n    - https://").concat((null==(d=e.domain)?void 0:d.customDomain)||(null==(m=e.domain)?void 0:m.defaultSubdomain),"\n\n# For more information, visit: https://docs.unhazzle.io/yaml-configuration\n")}function f(){return"name: Deploy to Unhazzle\n\non:\n  push:\n    branches:\n      - main\n    paths:\n      - 'unhazzle.yaml'\n      - 'src/**'\n      - 'package.json'\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    \n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v4\n      \n      - name: Install Unhazzle CLI\n        run: npm install -g @unhazzle/cli\n      \n      - name: Authenticate with Unhazzle\n        env:\n          UNHAZZLE_TOKEN: ${{ secrets.UNHAZZLE_TOKEN }}\n        run: unhazzle auth token $UNHAZZLE_TOKEN\n      \n      - name: Deploy application\n        run: unhazzle deploy --config unhazzle.yaml\n      \n      - name: Wait for deployment\n        run: unhazzle status --wait\n\n      - name: Run health checks\n        run: unhazzle health-check\n\n      - name: Comment PR with deployment info\n        uses: actions/github-script@v7\n        if: github.event_name == 'pull_request'\n        with:\n          script: |\n            const deploymentStatus = await exec('unhazzle status --json');\n            github.rest.issues.createComment({\n              issue_number: context.issue.number,\n              owner: context.repo.owner,\n              repo: context.repo.repo,\n              body: `âœ… Deployed to Unhazzle!\n\nView your app: https://app.unhazzle.io`\n            });\n"}}]);