(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78928,e=>{"use strict";e.s(["default",()=>N],78928);var s=e.i(43476),t=e.i(71645),a=e.i(18566),l=e.i(23312),n=e.i(23876);function r(e){let{project:a,selected:l,onSelect:n}=e,[r,i]=(0,t.useState)(null);(0,t.useEffect)(()=>{"environment"===l.kind&&l.envId&&i(l.envId)},[l]);let[,d]=(0,t.useState)(0);(0,t.useEffect)(()=>{let e=setInterval(()=>{d(e=>e+1)},6e4);return()=>clearInterval(e)},[]);let c=e=>e.deployed?"provisioning"===e.status?(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-yellow-100 text-yellow-700 text-xs rounded-full",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 bg-yellow-600 rounded-full animate-pulse"}),"Provisioning"]}):"paused"===e.status?(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-700 text-xs rounded-full",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 bg-amber-600 rounded-full"}),"Paused"]}):"deleting"===e.status?(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded-full",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 bg-red-600 rounded-full"}),"Deleting"]}):"deleted"===e.status||"expired"===e.status?(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-slate-100 text-slate-700 text-xs rounded-full",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 bg-slate-600 rounded-full"}),"expired"===e.status?"Expired":"Deleted"]}):(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 bg-green-600 rounded-full"}),"Live"]}):null,o=a.environments.filter(e=>"deleted"!==e.status&&"expired"!==e.status),x=o.filter(e=>"standard"===e.type||"non-prod"===e.type||"prod"===e.type),m=o.filter(e=>"pr"===e.type);return(0,s.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl p-4 space-y-4 sticky top-4 border border-slate-200",children:[(0,s.jsxs)("button",{onClick:()=>n({kind:"project-settings"}),className:"w-full bg-white rounded-lg p-4 shadow-sm border border-slate-200 hover:bg-slate-50 transition text-left ".concat("project-settings"===l.kind?"ring-2 ring-purple-500":""),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"üì¶"}),(0,s.jsx)("h3",{className:"font-bold text-slate-900 text-lg",children:a.name}),(0,s.jsx)("span",{className:"ml-auto",children:(0,s.jsxs)("svg",{className:"w-4 h-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),(0,s.jsxs)("div",{className:"text-xs text-slate-600 space-y-1",children:[(0,s.jsxs)("div",{children:[o.length," environment",1!==o.length?"s":""]}),m.length>0&&(0,s.jsxs)("div",{className:"text-blue-600 font-medium",children:[m.length,"/",a.prEnvs.maxEnvs," PR environments"]})]})]}),x.map(e=>{var t,a;let d=e.containers||[],o=!!e.database,x="environment"===l.kind&&l.envId===e.id,m=r===e.id;return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>{m?i(null):i(e.id),n({kind:"environment",envId:e.id})},className:"w-full bg-gradient-to-r from-purple-50 to-blue-50 px-4 py-3 hover:from-purple-100 hover:to-blue-100 transition text-left ".concat(x?"ring-2 ring-purple-500 ring-inset":""," ").concat(m?"border-b border-slate-200":"border-b-0"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-slate-500 transition-transform ".concat(m?"rotate-90":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,s.jsx)("span",{className:"text-lg",children:"üîß"}),(0,s.jsx)("span",{className:"font-bold text-slate-900",children:e.name}),"prod"===e.type&&(0,s.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-orange-100 text-orange-700 text-xs rounded font-medium",children:"PROD"}),"non-prod"===e.type&&(0,s.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded font-medium",children:"DEV"})]}),c(e)]}),(0,s.jsx)("div",{className:"text-xs text-slate-600 ml-6",children:e.baseDomain})]}),m&&(0,s.jsxs)("div",{className:"p-3 space-y-3 border-t border-slate-200",children:[d.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-xs font-semibold text-slate-600 mb-2 flex items-center gap-1",children:[(0,s.jsx)("span",{children:"üöÄ"}),(0,s.jsxs)("span",{children:["Containers (",d.length,")"]})]}),(0,s.jsx)("div",{className:"space-y-1",children:d.map((t,a)=>{var r;let i=t.name||(null==(r=t.imageUrl.split("/").pop())?void 0:r.split(":")[0])||"app-".concat(a+1),d="container"===l.kind&&l.id===t.id;return(0,s.jsxs)("button",{onClick:()=>n({kind:"container",id:t.id,envId:e.id}),className:"w-full text-left px-3 py-2 rounded-lg border transition ".concat(d?"border-purple-400 bg-purple-50 shadow-sm":"border-slate-200 hover:border-purple-300 hover:bg-slate-50"),children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-900 truncate",children:i}),"public"===t.exposure&&(0,s.jsx)("div",{className:"text-xs text-slate-500",children:"Public"})]},t.id)})})]}),o&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-xs font-semibold text-slate-600 mb-2 flex items-center gap-1",children:[(0,s.jsx)("span",{children:"üíæ"}),(0,s.jsx)("span",{children:"Database"})]}),(0,s.jsx)("button",{onClick:()=>n({kind:"database",envId:e.id}),className:"w-full text-left px-3 py-2 rounded-lg border transition ".concat("database"===l.kind&&l.envId===e.id?"border-green-400 bg-green-50 shadow-sm":"border-slate-200 hover:border-green-300 hover:bg-slate-50"),children:(0,s.jsx)("div",{className:"text-sm font-medium text-slate-900",children:(null==(t=e.database)?void 0:t.engine)==="postgres"?"PostgreSQL":null==(a=e.database)?void 0:a.engine})})]}),(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-slate-200",children:(0,s.jsxs)("button",{onClick:()=>n({kind:"add-container",envId:e.id}),className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-300 hover:border-blue-400 hover:bg-blue-50 bg-white transition text-xs font-medium text-slate-700 hover:text-blue-700",children:[(0,s.jsx)("span",{className:"text-sm",children:"üì¶"}),(0,s.jsx)("span",{children:"Add Container"})]})})]})]},e.id)}),m.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"text-xs font-semibold text-slate-600 px-2 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"‚ö°"}),(0,s.jsx)("span",{children:"PR Environments"})]}),m.map(e=>{let t="environment"===l.kind&&l.envId===e.id,a=r===e.id,d=(e=>{if(!e)return"";let s=new Date().getTime(),t=new Date(e).getTime()-s;if(t<=0)return"Expired";let a=Math.floor(t/36e5),l=Math.floor(t%36e5/6e4);return a>0?"".concat(a,"h ").concat(l,"m"):"".concat(l,"m")})(e.expiresAt);return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>{a?i(null):i(e.id),n({kind:"environment",envId:e.id})},className:"w-full text-left p-3 hover:bg-blue-50 transition ".concat(t?"ring-2 ring-blue-500 ring-inset bg-blue-50":""),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-slate-500 transition-transform flex-shrink-0 ".concat(a?"rotate-90":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,s.jsx)("span",{className:"text-sm font-medium text-slate-900 truncate",children:e.name})]}),(e=>{if("pr"===e.type){var t;return(0,s.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded font-medium",children:["PR #",(null==(t=e.prSource)?void 0:t.prNumber)||"?"]})}return null})(e)]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs ml-6",children:[c(e),e.expiresAt&&"active"===e.status&&(0,s.jsxs)("span",{className:"text-slate-600",children:["‚è±Ô∏è ",d]})]}),e.prSource&&!a&&(0,s.jsxs)("div",{className:"text-xs text-slate-600 mt-2 truncate ml-6",children:[e.prSource.repository," ‚Ä¢ ",e.prSource.branchName]})]}),a&&e.prSource&&(0,s.jsxs)("div",{className:"px-3 pb-3 space-y-2 border-t border-slate-200 pt-2",children:[(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsx)("div",{className:"text-slate-600",children:"Repository"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:e.prSource.repository})]}),(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsx)("div",{className:"text-slate-600",children:"Branch"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:e.prSource.branchName})]}),(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsx)("div",{className:"text-slate-600",children:"PR Title"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:e.prSource.prTitle})]})]})]},e.id)})]}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-200",children:(0,s.jsxs)("button",{onClick:()=>n({kind:"create-environment"}),className:"w-full flex items-center gap-2 px-4 py-2.5 rounded-lg border border-slate-300 hover:border-purple-400 hover:bg-purple-50 bg-white transition text-sm font-medium text-slate-700 hover:text-purple-700",children:[(0,s.jsx)("span",{className:"text-base",children:"üåç"}),(0,s.jsx)("span",{children:"Create Environment"})]})}),(0,s.jsx)("button",{onClick:()=>n({kind:"architecture"}),className:"w-full text-left px-4 py-3 rounded-lg border transition mt-4 ".concat("architecture"===l.kind?"border-purple-400 bg-purple-50 shadow-sm":"border-slate-200 hover:border-purple-300 hover:bg-slate-50 bg-white"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[(0,s.jsx)("span",{className:"text-xl",children:"üèóÔ∏è"}),(0,s.jsx)("span",{children:"Architecture Diagram"})]})})]})}function i(e){var l;let{environment:n,onClone:r,onPromote:i,onDelete:d,onPause:c,onResume:o,onAddContainer:x}=e,[m,h]=(0,t.useState)(!1),p=(0,a.useRouter)(),u=(()=>{if(0===n.containers.length)return 0;let e=0;return n.containers.forEach(s=>{let t=parseFloat(s.resources.cpu),a=parseFloat(s.resources.memory),l=(s.resources.replicas.min+s.resources.replicas.max)/2,n=4.99;(t>1||a>2)&&(n=5.49),(t>2||a>4)&&(n=9.49),(t>4||a>8)&&(n=17.49),e+=Math.ceil(l/2)*n,s.volume&&(e+=.044*s.volume.sizeGB)}),e+=22,e*=1.3})(),b="pr"===n.type,g="deleted"===n.status||"expired"===n.status,j=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold",children:n.name}),b&&(0,s.jsxs)("span",{className:"px-3 py-1 bg-white/20 backdrop-blur-sm rounded-lg text-sm font-medium",children:["PR #",null==(l=n.prSource)?void 0:l.prNumber]})]}),(0,s.jsxs)("div",{className:"text-purple-100 text-sm space-y-1",children:[(0,s.jsx)("div",{children:n.baseDomain}),"active"===n.status&&n.publicContainers.length>0&&(0,s.jsxs)("div",{children:[n.publicContainers.length," public container",1!==n.publicContainers.length?"s":""]})]})]}),(0,s.jsxs)("div",{children:["active"===n.status&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 bg-green-500/20 backdrop-blur-sm text-white px-3 py-1.5 rounded-full text-sm font-medium",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-green-300 rounded-full animate-pulse"}),"Live"]}),"paused"===n.status&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 bg-amber-500/20 backdrop-blur-sm text-white px-3 py-1.5 rounded-full text-sm font-medium",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-amber-300 rounded-full"}),"Paused"]}),"provisioning"===n.status&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 bg-yellow-500/20 backdrop-blur-sm text-white px-3 py-1.5 rounded-full text-sm font-medium",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-yellow-300 rounded-full animate-pulse"}),"Provisioning"]}),"deleting"===n.status&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 bg-red-500/20 backdrop-blur-sm text-white px-3 py-1.5 rounded-full text-sm font-medium",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-red-300 rounded-full"}),"Deleting"]})]})]}),!g&&(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-purple-100 text-sm mb-1",children:"Estimated Cost"}),(0,s.jsxs)("div",{className:"text-3xl font-bold",children:["‚Ç¨",b?"0.08":u.toFixed(2),(0,s.jsxs)("span",{className:"text-lg font-normal text-purple-100 ml-2",children:["/",b?"2 hours":"month"]})]})]}),b&&n.expiresAt&&(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-purple-100 text-sm mb-1",children:"Expires In"}),(0,s.jsx)("div",{className:"text-2xl font-bold",children:(()=>{if(!n.expiresAt)return null;let e=new Date().getTime(),s=new Date(n.expiresAt).getTime()-e;if(s<=0)return"Expired";let t=Math.floor(s/36e5),a=Math.floor(s%36e5/6e4);return t>0?"".concat(t,"h ").concat(a,"m"):"".concat(a,"m")})()})]})]})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[!g&&!b&&!n.deployed&&n.containers.length>0&&(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-bold text-green-900 mb-1",children:"Ready to Deploy"}),(0,s.jsxs)("p",{className:"text-sm text-green-700",children:["Your environment is configured with ",n.containers.length," container",1!==n.containers.length?"s":"",". Deploy to provision infrastructure."]})]}),(0,s.jsxs)("button",{onClick:()=>{p.push("/review?mode=deploy")},className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg transition font-bold shadow-lg flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üöÄ"}),(0,s.jsx)("span",{children:"Deploy Environment"})]})]})}),!g&&!b&&n.deployed&&n.pendingChanges&&(0,s.jsx)("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-2 border-amber-300 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-bold text-amber-900 mb-1",children:"Pending Changes"}),(0,s.jsx)("p",{className:"text-sm text-amber-700",children:"You have uncommitted changes to this environment. Review and apply them to update the infrastructure."})]}),(0,s.jsxs)("button",{onClick:()=>{p.push("/review?mode=changes")},className:"px-6 py-3 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 text-white rounded-lg transition font-bold shadow-lg flex items-center gap-2",children:[(0,s.jsx)("span",{children:"‚ö°"}),(0,s.jsx)("span",{children:"Apply Changes"})]})]})}),!g&&!b&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-3",children:(0,s.jsxs)("button",{onClick:x,className:"px-4 py-2 bg-purple-100 hover:bg-purple-200 text-purple-900 rounded-lg transition font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üì¶"}),(0,s.jsx)("span",{children:"Add Container"})]})}),"active"===n.status&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsxs)("button",{onClick:c,className:"px-4 py-2 bg-amber-100 hover:bg-amber-200 text-amber-900 rounded-lg transition font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{children:"‚è∏Ô∏è"}),(0,s.jsx)("span",{children:"Pause"})]}),(0,s.jsxs)("button",{onClick:r,className:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-900 rounded-lg transition font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üìã"}),(0,s.jsx)("span",{children:"Clone"})]}),(0,s.jsxs)("button",{onClick:i,className:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-900 rounded-lg transition font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üöÄ"}),(0,s.jsx)("span",{children:"Promote"})]}),(0,s.jsxs)("button",{onClick:d,className:"px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üóëÔ∏è"}),(0,s.jsx)("span",{children:"Delete"})]})]})]}),!g&&!b&&"paused"===n.status&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsxs)("button",{onClick:o,className:"px-4 py-2 bg-green-100 hover:bg-green-200 text-green-900 rounded-lg transition font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{children:"‚ñ∂Ô∏è"}),(0,s.jsx)("span",{children:"Resume"})]}),(0,s.jsxs)("button",{onClick:d,className:"px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üóëÔ∏è"}),(0,s.jsx)("span",{children:"Delete"})]})]}),!g&&b&&(0,s.jsx)("div",{className:"flex flex-wrap gap-3",children:(0,s.jsxs)("button",{onClick:d,className:"px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üóëÔ∏è"}),(0,s.jsx)("span",{children:"Delete"})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Environment Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Type"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:"prod"===n.type?"Production":"non-prod"===n.type?"Non-Production":"pr"===n.type?"Pull Request":"Standard"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Status"}),(0,s.jsx)("div",{className:"font-medium text-slate-900 capitalize",children:n.status})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Created"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:j(n.createdAt)})]}),b&&n.expiresAt&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Expires"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:j(n.expiresAt)})]})]})]}),b&&n.prSource&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Pull Request Details"}),(0,s.jsxs)("div",{className:"space-y-3 bg-blue-50 rounded-lg p-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Repository"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:n.prSource.repository})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"PR Title"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:n.prSource.prTitle})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Branch"}),(0,s.jsx)("div",{className:"font-mono text-sm text-slate-900 bg-white px-2 py-1 rounded",children:n.prSource.branchName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Commit"}),(0,s.jsx)("div",{className:"font-mono text-sm text-slate-900 bg-white px-2 py-1 rounded",children:n.prSource.commitSha.substring(0,7)})]})]}),n.serviceOverride&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Override"}),(0,s.jsxs)("div",{className:"font-medium text-slate-900",children:["Container ",(0,s.jsx)("code",{className:"bg-white px-2 py-0.5 rounded text-sm",children:n.serviceOverride.serviceName})," using custom image"]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Resources"}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"üöÄ"}),(0,s.jsx)("span",{className:"font-medium text-slate-900",children:"Containers"})]}),(0,s.jsx)("span",{className:"text-slate-600",children:n.containers.length})]})})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"üí°"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-blue-900 mb-1",children:"pr"!==n.type?"Edit Resources":"View Only"}),(0,s.jsx)("div",{className:"text-sm text-blue-700",children:"pr"!==n.type?"Click on a resource in the sidebar to edit its configuration.":"PR environments are read-only. To edit configuration, update the unhazzle.yaml manifest."})]})]})})]})]})}let d=[{name:"acme/ecommerce-shop",tag:"v2.1.0",size:"324 MB",lastUpdated:"2024-10-28T14:30:00Z",description:"Main e-commerce application with Next.js frontend"},{name:"acme/api-gateway",tag:"v1.5.2",size:"156 MB",lastUpdated:"2024-10-25T09:15:00Z",description:"GraphQL API gateway service"},{name:"acme/payment-processor",tag:"v3.0.1",size:"89 MB",lastUpdated:"2024-10-30T16:45:00Z",description:"Payment processing microservice"},{name:"acme/notification-service",tag:"v2.3.0",size:"112 MB",lastUpdated:"2024-10-29T11:20:00Z",description:"Email and SMS notification handler"},{name:"acme/background-worker",tag:"v1.8.4",size:"78 MB",lastUpdated:"2024-10-27T13:10:00Z",description:"Background job processing worker"}];function c(e){var n,r,i,c,o,x,m,h,p,u,b,g,j,v;let{project:f,onSave:N,initialTab:y="general",onCreateEnvironment:w}=e,C=(0,a.useRouter)(),{createAppsFromImages:k,getActiveEnvironment:S,setActiveEnvironment:E}=(0,l.useDeployment)(),[P,z]=(0,t.useState)(f.name),[T,R]=(0,t.useState)(f.slug),[A,D]=(0,t.useState)(f.description||""),[U,L]=(0,t.useState)((null==(n=f.repository)?void 0:n.url)||""),[I,M]=(0,t.useState)((null==(r=f.repository)?void 0:r.branch)||"main"),[B,G]=(0,t.useState)((null==(i=f.repository)?void 0:i.configPath)||"unhazzle.yaml"),[F,_]=(0,t.useState)(null==(u=null==(c=f.repository)?void 0:c.autoDeployEnabled)||u),[H,O]=(0,t.useState)(f.githubPAT||""),[V,W]=(0,t.useState)(!1),[$,q]=(0,t.useState)([]),[Y,Z]=(0,t.useState)(!1),[K,J]=(0,t.useState)(null!=(b=null==(o=f.prEnvironmentSettings)?void 0:o.enabled)&&b),[Q,X]=(0,t.useState)(null==(g=null==(x=f.prEnvironmentSettings)?void 0:x.autoCreateOnPR)||g),[ee,es]=(0,t.useState)(null==(j=null==(m=f.prEnvironmentSettings)?void 0:m.autoDeleteOnMerge)||j),[et,ea]=(0,t.useState)(null!=(v=null==(h=f.prEnvironmentSettings)?void 0:h.expirationHours)?v:72),[el,en]=(0,t.useState)((null==(p=f.prEnvironmentSettings)?void 0:p.nameTemplate)||"pr-{number}"),[er,ei]=(0,t.useState)(y),[ed,ec]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{ei(y)},[y]),(0,s.jsxs)("div",{className:"h-full flex flex-col bg-white",children:[(0,s.jsxs)("div",{className:"flex-none border-b border-gray-200 px-6 py-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Project Settings"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Configure project details, repository integration, and PR environment behavior"})]}),(0,s.jsx)("div",{className:"flex-none border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex space-x-8 px-6",children:[(0,s.jsx)("button",{onClick:()=>ei("general"),className:"py-3 text-sm font-medium border-b-2 transition-colors ".concat("general"===er?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"General"}),(0,s.jsx)("button",{onClick:()=>ei("environments"),className:"py-3 text-sm font-medium border-b-2 transition-colors ".concat("environments"===er?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Environments"}),(0,s.jsx)("button",{onClick:()=>ei("repository"),className:"py-3 text-sm font-medium border-b-2 transition-colors ".concat("repository"===er?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Repository Integration"}),(0,s.jsx)("button",{onClick:()=>ei("registry"),className:"py-3 text-sm font-medium border-b-2 transition-colors ".concat("registry"===er?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Container Registry"}),(0,s.jsx)("button",{onClick:()=>ei("pr-environments"),className:"py-3 text-sm font-medium border-b-2 transition-colors ".concat("pr-environments"===er?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"PR Environments"})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,s.jsxs)("div",{className:"px-6 py-6 max-w-2xl",children:["environments"===er&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Environments"}),(0,s.jsxs)("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:[(0,s.jsx)("span",{className:"text-base",children:"üåç"}),(0,s.jsx)("span",{children:"Create Environment"})]})]}),(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Est. Cost"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.environments.map(e=>{let t=0;return e.containers.length>0&&(e.containers.forEach(e=>{let s=parseFloat(e.resources.cpu),a=parseFloat(e.resources.memory),l=(e.resources.replicas.min+e.resources.replicas.max)/2,n=4.99;(s>1||a>2)&&(n=5.49),(s>2||a>4)&&(n=9.49),(s>4||a>8)&&(n=17.49),t+=Math.ceil(l/2)*n,e.volume&&(t+=.044*e.volume.sizeGB)}),t+=22,t*=1.3),(0,s.jsxs)("tr",{onClick:()=>{E(e.id),C.push("/dashboard?selection=environment&env=".concat(e.id))},className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.baseDomain})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("prod"===e.type?"bg-purple-100 text-purple-800":"non-prod"===e.type?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:"prod"===e.type?"Production":"non-prod"===e.type?"Non-Prod":"Standard"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("active"===e.status?"bg-green-100 text-green-800":"provisioning"===e.status?"bg-yellow-100 text-yellow-800":"paused"===e.status?"bg-amber-100 text-amber-800":"bg-red-100 text-red-800"),children:e.status})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["‚Ç¨",t.toFixed(2),"/mo"]})]},e.id)})})]})})]}),"general"===er&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),(0,s.jsx)("input",{type:"text",value:P,onChange:e=>{z(e.target.value),ec(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"My Awesome App"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"A friendly name for your project"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Slug"}),(0,s.jsx)("input",{type:"text",value:T,onChange:e=>{R(e.target.value),ec(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"my-awesome-app"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Used in URLs and CLI commands (lowercase, hyphens only)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{value:A,onChange:e=>{D(e.target.value),ec(!0)},rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"A brief description of your project (optional)"})]}),(0,s.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Danger Zone"}),(0,s.jsx)("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-red-900",children:"Delete Project"}),(0,s.jsx)("p",{className:"text-xs text-red-700 mt-1",children:"Permanently delete this project and all its environments"})]}),(0,s.jsx)("button",{className:"px-3 py-1.5 text-sm font-medium text-red-700 border border-red-300 rounded hover:bg-red-100 transition-colors",children:"Delete"})]})})]})]}),"repository"===er&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Repository URL"}),(0,s.jsx)("input",{type:"text",value:U,onChange:e=>{L(e.target.value),ec(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://github.com/username/repo"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"GitHub repository URL"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Branch"}),(0,s.jsx)("input",{type:"text",value:I,onChange:e=>{M(e.target.value),ec(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"main"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Branch used for production deployments"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Config File Path"}),(0,s.jsx)("input",{type:"text",value:B,onChange:e=>{G(e.target.value),ec(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"unhazzle.yaml"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Path to your Unhazzle configuration file in the repository"})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("input",{type:"checkbox",id:"auto-deploy",checked:F,onChange:e=>{_(e.target.checked),ec(!0)},className:"mt-1 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"auto-deploy",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Enable Auto-Deploy"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically deploy when changes are pushed to tracked branches"})]})]}),(0,s.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Connection Status"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Connected to GitHub"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"Last synced: 2 hours ago"})]})})]}),"registry"===er&&(0,s.jsx)("div",{className:"space-y-6",children:V?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"Select Images to Deploy (max 5)"}),(0,s.jsx)("div",{className:"space-y-3",children:d.map(e=>{let t="".concat(e.name,":").concat(e.tag),a=$.includes(t);return(0,s.jsx)("button",{onClick:()=>(e=>{if($.includes(e))q($.filter(s=>s!==e));else{if($.length>=5)return void alert("Maximum 5 images allowed");q([...$,e])}})(t),className:"w-full p-4 border-2 rounded-lg text-left transition ".concat(a?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-5 h-5 rounded border-2 flex-shrink-0 mt-1 ".concat(a?"bg-blue-600 border-blue-600":"border-gray-300"),children:a&&(0,s.jsx)("svg",{className:"w-full h-full text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"font-semibold text-gray-900 mb-1",children:["ghcr.io/",e.name,":",(0,s.jsx)("span",{className:"text-blue-600",children:e.tag})]}),(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,s.jsx)("span",{children:e.size}),(0,s.jsx)("span",{children:"‚Ä¢"}),(0,s.jsxs)("span",{children:["Updated ",(e=>{let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/864e5);return 0===t?"Today":1===t?"Yesterday":t<7?"".concat(t," days ago"):s.toLocaleDateString()})(e.lastUpdated)]})]})]})]})},t)})})]}),(0,s.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-700",children:[$.length," image",1!==$.length?"s":""," selected",$.length>0&&" - containers will be auto-configured with smart defaults"]})}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("button",{onClick:()=>C.push("/dashboard"),className:"px-6 py-3 border border-gray-300 rounded-md hover:bg-gray-50 transition font-medium text-gray-700",children:"Skip & Add Manually"}),(0,s.jsx)("button",{onClick:()=>{let e=S();if(!e)return;Z(!0);let s=$.map(e=>{var s;let t=d.find(s=>"".concat(s.name,":").concat(s.tag)===e);if(!t)return null;let a=(null==(s=t.name.split("/").pop())?void 0:s.split(":")[0].toLowerCase().replace(/[^a-z0-9-]/g,"-"))||"app";return{name:"".concat(t.name,":").concat(t.tag),url:"ghcr.io/".concat(t.name,":").concat(t.tag),autoName:a,tag:t.tag,description:t.description}}).filter(Boolean);s.length>0&&k(e.id,s),setTimeout(()=>{Z(!1),E(e.id),C.push("/dashboard?selection=environment&env=".concat(e.id))},1e3)},disabled:0===$.length||Y,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-md hover:from-purple-700 hover:to-blue-700 transition font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"Creating Containers..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{children:["Continue with ",$.length," Container",1!==$.length?"s":""]}),(0,s.jsx)("span",{children:"‚Üí"})]})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GitHub Personal Access Token"}),(0,s.jsx)("input",{type:"password",value:H,onChange:e=>{O(e.target.value),ec(!0)},placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Token needs ",(0,s.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"read:packages"})," scope to access ghcr.io"]})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"‚ÑπÔ∏è"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-blue-900",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"Connect to GitHub Container Registry"}),(0,s.jsx)("p",{children:"Link your GitHub account to quickly import container images from ghcr.io. This is optional - you can always add containers manually."})]})]})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{onClick:()=>{if(!H.trim())return void alert("Please enter a GitHub Personal Access Token");N({githubPAT:H}),W(!0)},disabled:!H.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:"Fetch Images"})})]})}),"pr-environments"===er&&(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("span",{className:"text-2xl",children:"üöÄ"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-blue-900 mb-2",children:"Coming Soon"}),(0,s.jsx)("p",{className:"text-blue-800 mb-4",children:"PR Environments are a high-priority feature for Unhazzle, but they won't be available in the initial MVP release."}),(0,s.jsx)("p",{className:"text-sm text-blue-700",children:"We're working on a seamless integration with GitHub Actions to automatically spin up ephemeral environments for every pull request. Stay tuned!"})]})]})})]})}),ed&&(0,s.jsx)("div",{className:"flex-none border-t border-gray-200 px-6 py-4 bg-gray-50",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"You have unsaved changes"}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:()=>{var e,s,t,a,l,n,r,i,d,c,o,x,m,h;z(f.name),R(f.slug),D(f.description||""),L((null==(e=f.repository)?void 0:e.url)||""),M((null==(s=f.repository)?void 0:s.branch)||"main"),G((null==(t=f.repository)?void 0:t.configPath)||"unhazzle.yaml"),_(null==(c=null==(a=f.repository)?void 0:a.autoDeployEnabled)||c),J(null!=(o=null==(l=f.prEnvironmentSettings)?void 0:l.enabled)&&o),X(null==(x=null==(n=f.prEnvironmentSettings)?void 0:n.autoCreateOnPR)||x),es(null==(m=null==(r=f.prEnvironmentSettings)?void 0:r.autoDeleteOnMerge)||m),ea(null!=(h=null==(i=f.prEnvironmentSettings)?void 0:i.expirationHours)?h:72),en((null==(d=f.prEnvironmentSettings)?void 0:d.nameTemplate)||"pr-{number}"),ec(!1)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Reset"}),(0,s.jsx)("button",{onClick:()=>{N({name:P,slug:T,description:A,githubPAT:H,repository:{url:U,branch:I,autoDeployEnabled:F,configPath:B},prEnvironmentSettings:{enabled:K,autoCreateOnPR:Q,autoDeleteOnMerge:ee,expirationHours:et,nameTemplate:el}}),ec(!1)},className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})})]})}function o(e){let{environment:a}=e,[l,r]=(0,t.useState)(!1),{current:i,max:d,breakdown:c}=(0,n.calculateEnvironmentCost)(a),o=d<50?"text-green-600":d<200?"text-yellow-600":"text-orange-600";return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"bg-white border border-slate-200 rounded-lg px-4 py-3 shadow-sm cursor-pointer hover:shadow-md transition",onClick:()=>r(!l),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-slate-600 font-medium mb-1",children:"Monthly Cost"}),(0,s.jsxs)("div",{className:"text-2xl font-bold ".concat(o),children:["‚Ç¨",i.toFixed(2)]})]}),d!==i&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-slate-500 font-medium mb-1",children:"Max (scaled)"}),(0,s.jsxs)("div",{className:"text-lg font-semibold ".concat(o),children:["‚Ç¨",d.toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["prod"===a.type&&(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded font-medium",children:"PRODUCTION"}),(0,s.jsx)("svg",{className:"w-5 h-5 text-slate-400 transition-transform ".concat(l?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),l&&(0,s.jsxs)("div",{className:"absolute top-full mt-2 left-0 right-0 bg-white border border-slate-200 rounded-lg shadow-lg p-4 z-10",children:[(0,s.jsx)("h4",{className:"text-sm font-bold text-slate-900 mb-3",children:"Cost Breakdown"}),c.containers&&c.containers.length>0&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("div",{className:"text-xs font-semibold text-slate-600 mb-2",children:"Containers"}),c.containers.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs py-1",children:[(0,s.jsx)("span",{className:"text-slate-700",children:e.name}),(0,s.jsxs)("span",{className:"font-mono text-slate-900",children:["‚Ç¨",e.current.toFixed(2),e.max!==e.current&&(0,s.jsxs)("span",{className:"text-slate-500",children:[" - ‚Ç¨",e.max.toFixed(2)]})]})]},t))]}),c.database&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("div",{className:"text-xs font-semibold text-slate-600 mb-2",children:"Database"}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs py-1",children:[(0,s.jsx)("span",{className:"text-slate-700",children:"PostgreSQL"}),(0,s.jsxs)("span",{className:"font-mono text-slate-900",children:["‚Ç¨",c.database.toFixed(2)]})]})]}),c.cache&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("div",{className:"text-xs font-semibold text-slate-600 mb-2",children:"Cache"}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs py-1",children:[(0,s.jsx)("span",{className:"text-slate-700",children:"Redis"}),(0,s.jsxs)("span",{className:"font-mono text-slate-900",children:["‚Ç¨",c.cache.toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("div",{className:"text-xs font-semibold text-slate-600 mb-2",children:"Infrastructure"}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs py-1",children:[(0,s.jsx)("span",{className:"text-slate-700",children:"Load Balancer + SSL"}),(0,s.jsxs)("span",{className:"font-mono text-slate-900",children:["‚Ç¨",c.loadBalancer.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs py-1",children:[(0,s.jsx)("span",{className:"text-slate-700",children:"Bandwidth (estimated)"}),(0,s.jsxs)("span",{className:"font-mono text-slate-900",children:["‚Ç¨",c.bandwidth.toFixed(2)]})]})]}),(0,s.jsx)("div",{className:"border-t border-slate-200 pt-2 mt-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm font-bold",children:[(0,s.jsx)("span",{className:"text-slate-900",children:"Total"}),(0,s.jsxs)("span",{className:"font-mono ".concat(o),children:["‚Ç¨",i.toFixed(2)," - ‚Ç¨",d.toFixed(2),"/mo"]})]})}),(0,s.jsx)("div",{className:"mt-3 text-xs text-slate-500",children:"üí° Prices based on Hetzner Cloud instances in Germany"})]})]})}function x(e){let{sourceEnvironment:a,onClose:l,onConfirm:n}=e,[r,i]=(0,t.useState)("".concat(a.name,"-copy")),[d,c]=(0,t.useState)(!1);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-200",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Clone Environment"}),(0,s.jsx)("p",{className:"text-slate-600 mt-1",children:"Create a copy of this environment's configuration"})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-2",children:"Source Environment"}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900",children:a.name}),(0,s.jsx)("div",{className:"text-sm text-slate-600 mt-1",children:a.baseDomain})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"New Environment Name"}),(0,s.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"staging",autoFocus:!0}),(0,s.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Lowercase letters, numbers, and hyphens only. 3-63 characters."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-3",children:"What will be cloned:"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[(0,s.jsx)("span",{className:"text-green-600",children:"‚úì"}),(0,s.jsxs)("span",{children:[a.containers.length," container",1!==a.containers.length?"s":""," (configuration only)"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[(0,s.jsx)("span",{className:"text-green-600",children:"‚úì"}),(0,s.jsx)("span",{children:"Environment variables"})]})]})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"‚ÑπÔ∏è"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-blue-900",children:[(0,s.jsx)("strong",{children:"Note:"})," Only configuration is cloned. Runtime data, logs, and metrics are not copied."]})]})}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-4 border border-purple-200",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-1",children:"Estimated Monthly Cost"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-slate-900",children:["‚Ç¨169",(0,s.jsx)("span",{className:"text-lg font-normal text-slate-600",children:"/month"})]})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:l,disabled:d,className:"px-6 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{r.trim()&&(c(!0),setTimeout(()=>{n(r.trim()),c(!1)},1e3))},disabled:d||!r.trim(),className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"Cloning..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"üìã"}),(0,s.jsx)("span",{children:"Clone Environment"})]})})]})]})})}function m(e){var a;let{sourceEnvironment:l,availableTargets:n,onClose:r,onConfirm:i}=e,[d,c]=(0,t.useState)(""),[o,x]=(0,t.useState)(!1);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-200",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Promote Environment"}),(0,s.jsx)("p",{className:"text-slate-600 mt-1",children:"Copy configuration to another environment"})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-2",children:"Source Environment"}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-4 border border-purple-200",children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900",children:l.name}),(0,s.jsx)("div",{className:"text-sm text-slate-600 mt-1",children:l.baseDomain})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Target Environment"}),(0,s.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"Select target environment..."}),n.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),d&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-3",children:"Changes to be applied:"}),(0,s.jsx)("div",{className:"bg-slate-50 rounded-lg p-4 space-y-3 border border-slate-200",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-900 mb-2",children:"Containers:"}),(0,s.jsx)("div",{className:"space-y-1",children:l.containers.map((e,t)=>(0,s.jsxs)("div",{className:"text-sm text-slate-700 pl-4",children:["‚Ä¢ ",e.name||"Container ".concat(t+1),": Image will be updated"]},e.id))})]})})]}),(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"‚ö†Ô∏è"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-yellow-900 mb-1",children:"Warning"}),(0,s.jsx)("div",{className:"text-sm text-yellow-800",children:"This will redeploy the target environment with the source configuration. The target environment will experience downtime during the update."})]})]})})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:r,disabled:o,className:"px-6 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{d&&(x(!0),setTimeout(()=>{i(d),x(!1)},1500))},disabled:o||!d,className:"px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"Promoting..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"üöÄ"}),(0,s.jsxs)("span",{children:["Promote to ",(null==(a=n.find(e=>e.id===d))?void 0:a.name)||"Target"]})]})})]})]})})}function h(e){let{environment:a,onClose:l,onConfirm:n}=e,[r,i]=(0,t.useState)(""),[d,c]=(0,t.useState)(!1),o="pr"===a.type,x=o||r===a.name;return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-6 border-b border-slate-200 bg-red-50",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-3xl",children:"‚ö†Ô∏è"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-red-900",children:"Delete Environment"}),(0,s.jsx)("p",{className:"text-red-700 mt-1",children:o?"Delete this PR environment?":'Delete "'.concat(a.name,'" environment?')})]})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-3",children:"This will permanently delete:"}),(0,s.jsxs)("div",{className:"space-y-2 bg-red-50 rounded-lg p-4 border border-red-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-900",children:[(0,s.jsx)("span",{children:"‚Ä¢"}),(0,s.jsxs)("span",{children:[a.containers.length," container",1!==a.containers.length?"s":""]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-900",children:[(0,s.jsx)("span",{children:"‚Ä¢"}),(0,s.jsx)("span",{children:"All environment variables"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-900",children:[(0,s.jsx)("span",{children:"‚Ä¢"}),(0,s.jsx)("span",{children:"Persistent volumes (if configured)"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 rounded-lg p-4 border border-slate-200",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-1",children:"Cost Savings"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-slate-900",children:o?"‚Ç¨0.08/2 hours":"‚Ç¨169/month"})]}),(0,s.jsx)("div",{className:"bg-red-100 border-2 border-red-300 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"‚ùå"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-bold text-red-900 mb-1",children:"This action cannot be undone"}),(0,s.jsx)("div",{className:"text-sm text-red-800",children:"All data in this environment will be permanently lost. Make sure you have backups if needed."})]})]})}),!o&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Type ",(0,s.jsx)("code",{className:"bg-slate-100 px-2 py-0.5 rounded text-red-600 font-bold",children:a.name})," to confirm:"]}),(0,s.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:a.name,autoFocus:!0})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:l,disabled:d,className:"px-6 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{x&&(c(!0),setTimeout(()=>{n(),c(!1)},1e3))},disabled:d||!x,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-semibold disabled:opacity-50 disabled:bg-slate-400 flex items-center gap-2",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"Deleting..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"üóëÔ∏è"}),(0,s.jsx)("span",{children:"Delete Environment"})]})})]})]})})}function p(e){let{environment:a,onClose:l,onConfirm:n}=e,[r,i]=(0,t.useState)(!1);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-6 border-b border-slate-200",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-3xl",children:"‚è∏Ô∏è"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Pause Environment"}),(0,s.jsxs)("p",{className:"text-slate-600 mt-1",children:['Temporarily stop "',a.name,'" to save costs']})]})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-3",children:"When paused, this environment will:"}),(0,s.jsxs)("div",{className:"space-y-2 bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,s.jsxs)("div",{className:"flex items-start gap-2 text-sm text-blue-900",children:[(0,s.jsx)("span",{className:"text-lg",children:"üì¶"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Containers:"})," Scale all replicas to 0 (no running instances)"]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2 text-sm text-blue-900",children:[(0,s.jsx)("span",{className:"text-lg",children:"üåê"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Domain:"})," Will return 503 Service Unavailable"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-6 border-2 border-green-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-green-900",children:"Estimated Monthly Savings"}),(0,s.jsx)("span",{className:"text-4xl",children:"üí∞"})]}),(0,s.jsxs)("div",{className:"text-4xl font-bold text-green-900",children:["‚Ç¨",169,(0,s.jsx)("span",{className:"text-lg font-normal text-green-700 ml-2",children:"/month"})]}),(0,s.jsxs)("div",{className:"text-sm text-green-700 mt-2",children:["Pay only for persistent storage (~‚Ç¨","8.45","/month)"]})]}),(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"üí°"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-yellow-900 mb-1",children:"Good to know:"}),(0,s.jsxs)("ul",{className:"text-sm text-yellow-800 space-y-1 list-disc list-inside",children:[(0,s.jsx)("li",{children:"Configuration is preserved - you can resume anytime"}),(0,s.jsx)("li",{children:"Container data in volumes is safe in persistent storage"}),(0,s.jsx)("li",{children:"Environment URLs will be unavailable until resumed"}),(0,s.jsx)("li",{children:"Resume takes ~30 seconds to restore services"})]})]})]})})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:l,disabled:r,className:"px-6 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{i(!0),setTimeout(()=>{n(),i(!1)},1e3)},disabled:r,className:"px-6 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"Pausing..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"‚è∏Ô∏è"}),(0,s.jsx)("span",{children:"Pause Environment"})]})})]})]})})}function u(e){let{environment:a,onClose:l,onConfirm:n}=e,[r,i]=(0,t.useState)(!1);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-6 border-b border-slate-200",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-3xl",children:"‚ñ∂Ô∏è"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Resume Environment"}),(0,s.jsxs)("p",{className:"text-slate-600 mt-1",children:['Restore "',a.name,'" to active state']})]})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-3",children:"Resuming will:"}),(0,s.jsxs)("div",{className:"space-y-2 bg-green-50 rounded-lg p-4 border border-green-200",children:[(0,s.jsxs)("div",{className:"flex items-start gap-2 text-sm text-green-900",children:[(0,s.jsx)("span",{className:"text-lg",children:"üì¶"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Containers:"})," Scale replicas back to configured values"]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2 text-sm text-green-900",children:[(0,s.jsx)("span",{className:"text-lg",children:"üåê"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Domain:"})," Will be accessible after ~30 seconds"]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-3",children:"Resume Timeline:"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-bold text-sm",children:"1"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-slate-700",children:[(0,s.jsx)("strong",{children:"0-10s:"})," Provisioning infrastructure"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-bold text-sm",children:"2"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-slate-700",children:[(0,s.jsx)("strong",{children:"10-20s:"})," Preparing container services"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-bold text-sm",children:"3"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-slate-700",children:[(0,s.jsx)("strong",{children:"20-30s:"})," Deploying containers"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-green-600 font-bold text-sm",children:"‚úì"}),(0,s.jsx)("div",{className:"flex-1 text-sm font-medium text-green-700",children:"Environment ready!"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 rounded-lg p-4 border border-slate-200",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-1",children:"Cost Impact"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-slate-900",children:["‚Ç¨169",(0,s.jsx)("span",{className:"text-lg font-normal text-slate-600",children:"/month"})]}),(0,s.jsx)("div",{className:"text-sm text-slate-600 mt-1",children:"Billing resumes immediately upon starting services"})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:l,disabled:r,className:"px-6 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{i(!0),setTimeout(()=>{n(),i(!1)},1e3)},disabled:r,className:"px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"Resuming..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"‚ñ∂Ô∏è"}),(0,s.jsx)("span",{children:"Resume Environment"})]})})]})]})})}function b(e){let{onClose:a,onConfirm:l}=e,[n,r]=(0,t.useState)(""),[i,d]=(0,t.useState)("non-prod"),[c,o]=(0,t.useState)(!1),x=n.length>=3&&n.length<=63&&/^[a-z0-9]([a-z0-9-]{1,61}[a-z0-9])$/.test(n);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-200",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Create Environment"}),(0,s.jsx)("p",{className:"text-slate-600 mt-1",children:"Add a new environment to your project"})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Environment Name *"}),(0,s.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value.toLowerCase()),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"staging",autoFocus:!0}),n&&!x&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"3-63 characters, lowercase alphanumeric + hyphens, start/end with alphanumeric"}),(0,s.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Lowercase letters, numbers, and hyphens only."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Environment Type *"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{onClick:()=>d("non-prod"),className:"p-4 border-2 rounded-lg transition text-left ".concat("non-prod"===i?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Non-Production"}),(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"Development, testing, staging"})]}),(0,s.jsxs)("button",{onClick:()=>d("prod"),className:"p-4 border-2 rounded-lg transition text-left ".concat("prod"===i?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Production"}),(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"Live, customer-facing"})]})]})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:a,disabled:c,className:"px-6 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{x&&(o(!0),setTimeout(()=>{l(n,i),o(!1)},1e3))},disabled:c||!x,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"Creating..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"‚ú®"}),(0,s.jsx)("span",{children:"Create Environment"})]})})]})]})})}function g(e){let{onClose:a,onAdd:l,availableImages:n=[]}=e,[r,i]=(0,t.useState)(""),[d,c]=(0,t.useState)(""),[o,x]=(0,t.useState)("private"),[m,h]=(0,t.useState)({}),p=e=>e?e.length<3||e.length>63?"Name must be 3-63 characters":/^[a-z0-9]([a-z0-9-]{1,61}[a-z0-9])?$/.test(e)?void 0:"Name must be lowercase alphanumeric with hyphens, start and end with alphanumeric":"Container name is required",u=e=>e?/^[a-z0-9\.\-\/]+:[a-z0-9\.\-]+$/i.test(e)?void 0:"Image URL must be in format: registry/image:tag or image:tag":"Image URL is required";return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-6 rounded-t-xl",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-1",children:"Add Container"}),(0,s.jsx)("p",{className:"text-purple-100 text-sm",children:"Deploy a new container from any image"})]}),(0,s.jsx)("button",{onClick:a,className:"text-white hover:bg-white/20 rounded-lg p-2 transition",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-900 mb-3",children:"Exposure Type"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("button",{onClick:()=>x("private"),className:"p-4 border-2 rounded-lg transition ".concat("private"===o?"border-purple-600 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:"üîí"}),(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Private"}),(0,s.jsx)("div",{className:"text-xs text-slate-600",children:"Internal services only"})]}),(0,s.jsxs)("button",{onClick:()=>x("public"),className:"p-4 border-2 rounded-lg transition ".concat("public"===o?"border-purple-600 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:"üåê"}),(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Public"}),(0,s.jsx)("div",{className:"text-xs text-slate-600",children:"Internet accessible"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Container Name"}),(0,s.jsx)("input",{type:"text",value:r,onChange:e=>(e=>{i(e);let s=p(e);h(e=>({...e,name:s}))})(e.target.value),placeholder:"my-api-service",className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent ".concat(m.name?"border-red-300":"border-slate-300")}),m.name&&(0,s.jsx)("p",{className:"mt-2 text-sm text-red-600",children:m.name}),(0,s.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:"3-63 characters, lowercase alphanumeric with hyphens"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Image URL"}),(0,s.jsx)("input",{type:"text",value:d,onChange:e=>(e=>{c(e);let s=u(e);if(h(e=>({...e,imageUrl:s})),!r&&n.length>0){let s=n.find(s=>"ghcr.io/".concat(s.name,":").concat(s.tag)===e||"".concat(s.name,":").concat(s.tag)===e);if(s){var t;let e=(null==(t=s.name.split("/").pop())?void 0:t.split(":")[0].toLowerCase().replace(/[^a-z0-9-]/g,"-"))||"";e&&(i(e),h(e=>({...e,name:void 0})))}}})(e.target.value),placeholder:"nginx:alpine or docker.io/library/nginx:alpine",list:"available-images",className:"w-full px-4 py-3 border rounded-lg font-mono text-sm focus:ring-2 focus:ring-purple-600 focus:border-transparent ".concat(m.imageUrl?"border-red-300":"border-slate-300")}),(0,s.jsx)("datalist",{id:"available-images",children:n.map((e,t)=>(0,s.jsx)("option",{value:"ghcr.io/".concat(e.name,":").concat(e.tag)},t))}),m.imageUrl&&(0,s.jsx)("p",{className:"mt-2 text-sm text-red-600",children:m.imageUrl}),(0,s.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:"Format: registry/image:tag or image:tag (defaults to Docker Hub)"})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"üí°"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-blue-900 mb-1 text-sm",children:"Smart Defaults"}),(0,s.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[(0,s.jsx)("div",{children:"‚Ä¢ Resources: 1 vCPU, 2GB RAM, 2-10 replicas"}),(0,s.jsx)("div",{children:"‚Ä¢ Health check: HTTP on port 3000"}),(0,s.jsx)("div",{children:"‚Ä¢ Public containers get automatic SSL domains"}),(0,s.jsx)("div",{children:"‚Ä¢ Private containers accessible via internal DNS"})]})]})]})})]}),(0,s.jsxs)("div",{className:"border-t border-slate-200 p-6 flex items-center justify-between bg-slate-50 rounded-b-xl",children:[(0,s.jsx)("button",{onClick:a,className:"px-6 py-2 text-slate-600 hover:text-slate-900 font-medium transition",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{let e=p(r),s=u(d);if(e||s)return void h({name:e,imageUrl:s});l({name:r,imageUrl:d,exposure:o}),a()},disabled:!!m.name||!!m.imageUrl||!r||!d,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Container"})]})]})})}function j(e){let{containerName:t,onClose:a,onConfirm:l}=e;return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white p-6 rounded-t-xl",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"text-3xl",children:"üóëÔ∏è"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-1",children:"Remove Container"}),(0,s.jsx)("p",{className:"text-red-100 text-sm",children:"This action cannot be undone"})]})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,s.jsxs)("p",{className:"text-slate-900",children:["Are you sure you want to remove the container ",(0,s.jsxs)("span",{className:"font-semibold text-red-700",children:['"',t,'"']}),"?"]})}),(0,s.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"‚ö†Ô∏è"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-amber-900 mb-1 text-sm",children:"Warning"}),(0,s.jsxs)("div",{className:"text-xs text-amber-700 space-y-1",children:[(0,s.jsx)("div",{children:"‚Ä¢ All container configurations will be lost"}),(0,s.jsx)("div",{children:"‚Ä¢ Environment variables will be removed"}),(0,s.jsx)("div",{children:"‚Ä¢ This change takes effect immediately in demo mode"})]})]})]})})]}),(0,s.jsxs)("div",{className:"border-t border-slate-200 p-6 flex items-center justify-between bg-slate-50 rounded-b-xl",children:[(0,s.jsx)("button",{onClick:a,className:"px-6 py-2 text-slate-600 hover:text-slate-900 font-medium transition",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{l(),a()},className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg font-semibold transition shadow-lg",children:"Remove Container"})]})]})})}function v(){let{state:e,createEnvironment:n,setActiveEnvironment:r}=(0,l.useDeployment)(),i=(0,a.useRouter)(),[d,c]=(0,t.useState)(""),[o,x]=(0,t.useState)("non-prod"),[m,h]=(0,t.useState)(!1),p=d.length>=3&&d.length<=63&&/^[a-z0-9]([a-z0-9-]{1,61}[a-z0-9])$/.test(d);return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-8 px-4",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Create Your First Environment"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Environments isolate your deployments. Start with development, staging, or production."})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Environment Name *"}),(0,s.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value.toLowerCase()),placeholder:"development",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),d&&!p&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"3-63 characters, lowercase alphanumeric + hyphens, start/end with alphanumeric"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Environment Type *"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{onClick:()=>x("non-prod"),className:"p-4 border-2 rounded-lg transition ".concat("non-prod"===o?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Non-Production"}),(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"Development, testing, staging"})]}),(0,s.jsxs)("button",{onClick:()=>x("prod"),className:"p-4 border-2 rounded-lg transition ".concat("prod"===o?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Production"}),(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"Live, customer-facing"})]})]})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"üí°"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-blue-900",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"Naming Recommendation"}),(0,s.jsx)("p",{children:'Use descriptive names like "production", "staging", "development", or "test". Environment type helps Unhazzle apply appropriate safeguards (e.g., extra confirmations for production changes).'})]})]})}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:()=>{if(!p||!e.project)return;h(!0);let s=n({name:d,type:o,status:"provisioning",deployed:!1,pendingChanges:!1});setTimeout(()=>{h(!1),r(s.id),i.push("/dashboard?selection=project-settings&tab=registry")},500)},disabled:!p||m,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"Creating..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"Create Environment"}),(0,s.jsx)("span",{children:"‚Üí"})]})})})]}),e.project&&(0,s.jsxs)("div",{className:"mt-6 text-center text-sm text-slate-600",children:["Project: ",(0,s.jsx)("span",{className:"font-medium text-slate-900",children:e.project.name}),e.region&&(0,s.jsxs)("span",{className:"ml-4",children:[(0,s.jsx)("span",{role:"img","aria-label":e.region.country,children:e.region.flag})," ",e.region.label]})]})]})})}let f=[{name:"acme/ecommerce-shop",tag:"v2.1.0",size:"324 MB",lastUpdated:"2024-10-28T14:30:00Z",description:"Main e-commerce application with Next.js frontend"},{name:"acme/api-gateway",tag:"v1.5.2",size:"156 MB",lastUpdated:"2024-10-25T09:15:00Z",description:"GraphQL API gateway service"},{name:"acme/payment-processor",tag:"v3.0.1",size:"89 MB",lastUpdated:"2024-10-30T16:45:00Z",description:"Payment processing microservice"},{name:"acme/notification-service",tag:"v2.3.0",size:"112 MB",lastUpdated:"2024-10-29T11:20:00Z",description:"Email and SMS notification handler"},{name:"acme/background-worker",tag:"v1.8.4",size:"78 MB",lastUpdated:"2024-10-27T13:10:00Z",description:"Background job processing worker"}];function N(){var e,n,r,i;let d=(0,a.useRouter)(),{state:c,removeDatabase:x,removeCache:m}=(0,l.useDeployment)(),[h,p]=(0,t.useState)("projects"),[u,b]=(0,t.useState)(99.98),[g,j]=(0,t.useState)(42),[f,N]=(0,t.useState)(58),[w,C]=(0,t.useState)(1240),[k,S]=(0,t.useState)("all"),[E,T]=(0,t.useState)(!1);if((0,t.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,t.useEffect)(()=>{T(!0)},[]),(0,t.useEffect)(()=>{E&&!c.user&&d.push("/")},[E,c.user,d]),(0,t.useEffect)(()=>{let e=setInterval(()=>{j(e=>Math.max(15,Math.min(80,e+(Math.random()-.5)*10))),N(e=>Math.max(30,Math.min(85,e+(Math.random()-.5)*8))),C(e=>Math.max(800,Math.min(2e3,e+(Math.random()-.5)*200))),b(99.95+.05*Math.random())},3e3);return()=>clearInterval(e)},[]),!E)return null;if(!c.project)return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-8 px-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Dashboard"}),(0,s.jsxs)("p",{className:"text-slate-600",children:["Welcome, ",null==(i=c.user)?void 0:i.name,"!"]})]})})}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-12",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-100 to-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)("svg",{className:"w-12 h-12 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"No Projects Yet"}),(0,s.jsx)("p",{className:"text-slate-600 mb-8 leading-relaxed",children:"Get started by creating your first project. Answer 5 quick questions about your workload, and we'll automatically configure production-ready infrastructure for you."}),(0,s.jsxs)("button",{onClick:()=>d.push("/questionnaire"),className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold shadow-lg inline-flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:"+"}),(0,s.jsx)("span",{children:"Create Your First Project"})]})]})})]})});if(c.project&&0===c.project.environments.length)return(0,s.jsx)(v,{});let R=(null==(e=c.project)?void 0:e.environments.find(e=>e.id===c.activeEnvironmentId))||(null==(n=c.project)?void 0:n.environments[0]);return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-8 px-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Dashboard"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(null==(r=c.domain)?void 0:r.defaultSubdomain)&&(0,s.jsxs)("span",{className:"text-sm text-slate-600",children:["Deployed to: ",(0,s.jsx)("code",{className:"bg-white px-2 py-1 rounded text-xs font-mono",children:c.domain.defaultSubdomain})]}),c.region&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 bg-slate-100 text-slate-700 px-3 py-1 rounded-full text-sm",children:[(0,s.jsx)("span",{role:"img","aria-label":c.region.country,children:c.region.flag}),(0,s.jsx)("span",{children:c.region.label})]}),c.deployed&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"}),"Live"]})]})]}),R&&R.containers.length>0&&(0,s.jsx)("div",{className:"ml-6",children:(0,s.jsx)(o,{environment:R})}),!c.project&&(0,s.jsxs)("button",{onClick:()=>d.push("/questionnaire"),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold shadow-lg flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"+"}),(0,s.jsx)("span",{children:"Create Project"})]})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"border-b border-slate-200 flex",children:["projects","logs","metrics","events","settings","nextSteps"].map(e=>(0,s.jsx)("button",{onClick:()=>p(e),className:"flex-1 px-6 py-4 font-medium transition text-center relative ".concat("nextSteps"===e?h===e?"border-b-2 border-amber-500 text-amber-600 bg-amber-50":"border-b-2 border-transparent text-amber-600 hover:text-amber-700 bg-gradient-to-b from-amber-50 to-transparent":h===e?"border-b-2 border-purple-600 text-purple-600 bg-purple-50":"text-slate-600 hover:text-slate-900"),children:(0,s.jsx)("div",{className:"flex items-center justify-center gap-2",children:"nextSteps"===e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"Next Steps"}),(0,s.jsx)("span",{className:"animate-pulse text-lg",children:"‚Üí"}),(0,s.jsx)("span",{className:"inline-block px-2 py-0.5 bg-amber-500 text-white text-xs rounded-full font-bold",children:"IMPORTANT"})]}):e.charAt(0).toUpperCase()+e.slice(1)})},e))}),(0,s.jsxs)("div",{className:"p-6",children:["projects"===h&&(0,s.jsx)(y,{project:c.project,state:c}),"logs"===h&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Application:"}),(0,s.jsxs)("select",{value:k,onChange:e=>S(e.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm bg-white",children:[(0,s.jsx)("option",{value:"all",children:"All Applications"}),c.containers.map((e,t)=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsx)("div",{className:"bg-slate-900 rounded-lg p-4 font-mono text-sm text-green-400 space-y-1 max-h-96 overflow-y-auto",children:(()=>{let e=[];return c.containers.forEach((s,t)=>{("all"===k||k===s.id)&&(e.push({container:s.name,message:"[2025-11-02 14:32:15] Application started successfully"},{container:s.name,message:"[2025-11-02 14:32:17] ‚Üí HTTP server listening on port ".concat(s.port)},{container:s.name,message:"[2025-11-02 14:32:18] ‚úì Health check passed"},{container:s.name,message:"[2025-11-02 14:32:19] ‚Üí Replica 1 reporting healthy"},{container:s.name,message:"[2025-11-02 14:32:20] ‚Üí Replica 2 reporting healthy"}),s.serviceAccess.database&&e.push({container:s.name,message:"[2025-11-02 14:32:16] ‚úì Database connection established"}),s.serviceAccess.cache&&e.push({container:s.name,message:"[2025-11-02 14:32:16] ‚úì Redis cache connected"}),"public"===s.exposure?e.push({container:s.name,message:"[2025-11-02 14:35:42] GET /api/products 200 45ms"},{container:s.name,message:"[2025-11-02 14:35:43] POST /api/cart 201 52ms"},{container:s.name,message:"[2025-11-02 14:35:44] GET /api/checkout 200 38ms"},{container:s.name,message:"[2025-11-02 14:35:45] POST /api/orders 201 127ms"},{container:s.name,message:"[2025-11-02 14:35:46] GET / 200 15ms (cached)"}):e.push({container:s.name,message:"[2025-11-02 14:35:42] Processing background job #1234"},{container:s.name,message:"[2025-11-02 14:35:43] ‚Üí Job completed in 89ms"},{container:s.name,message:"[2025-11-02 14:35:44] Handling internal API call"}))}),e.map((e,t)=>(0,s.jsxs)("div",{children:["all"===k&&(0,s.jsxs)("span",{className:"text-purple-400",children:["[",e.container,"] "]}),e.message]},t))})()})]}),"metrics"===h&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Performance Metrics"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"Average Response Time"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-purple-600",children:"45ms"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"‚Üì 12% from yesterday"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"Error Rate"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-green-600",children:"0.02%"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Excellent reliability"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"99th Percentile (p99)"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-blue-600",children:"234ms"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Well within SLA"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"Requests Today"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-slate-900",children:"1.8M"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"‚Üë 23% from yesterday"})]})]})]}),"events"===h&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Recent Events"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex gap-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,s.jsx)("span",{className:"text-2xl",children:"üì§"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-blue-900",children:"Deployment Completed"}),(0,s.jsx)("p",{className:"text-sm text-blue-700",children:"All replicas healthy and serving traffic"}),(0,s.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"2 hours ago"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("span",{className:"text-2xl",children:"üìä"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Auto-scaling triggered"}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Scaled from 2 to 4 replicas due to high traffic"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"45 minutes ago"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("span",{className:"text-2xl",children:"üîÑ"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Database backup completed"}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Automatic daily backup successful (5.2 GB)"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"1 hour ago"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,s.jsx)("span",{className:"text-2xl",children:"‚úÖ"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-green-900",children:"SSL certificate renewed"}),(0,s.jsx)("p",{className:"text-sm text-green-700",children:"Auto-renewal for HTTPS certificate successful"}),(0,s.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"3 days ago"})]})]})]})]}),"settings"===h&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-purple-50 border border-purple-200 p-6 rounded-lg",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Settings moved to Projects"}),(0,s.jsx)("p",{className:"text-slate-700 mb-4",children:"Edit your current deployment configuration in the Projects tab. Use the left sidebar to pick a resource and the right panel to edit. You can preview and apply staged changes."}),(0,s.jsx)("button",{onClick:()=>p("projects"),className:"px-5 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium",children:"Go to Projects"})]}),(0,s.jsx)("div",{className:"text-xs text-slate-500",children:"Looking for advanced settings? We‚Äôll surface them here soon. For now, everything configurable is available in Projects."})]}),"nextSteps"===h&&(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 p-6 rounded-lg border border-purple-200",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-slate-900 mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üöÄ"}),(0,s.jsx)("span",{children:"Enable Continuous Deployment"})]}),(0,s.jsx)("p",{className:"text-slate-600",children:"Your application is now live! The next step is to enable automatic deployments from your GitHub repository using the Unhazzle CLI and GitHub Actions."}),(0,s.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[(0,s.jsxs)("a",{href:"/unhazzle.io/cli-demo/cli-guide.html",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium",children:["Experience the Unhazzle CLI",(0,s.jsx)("span",{"aria-hidden":"true",children:"‚Üó"})]}),(0,s.jsx)("span",{className:"text-sm text-slate-600",children:"Simulate the same deployment flow directly from your terminal."})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"1"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-slate-900",children:"Export Your Infrastructure Configuration"})]}),(0,s.jsx)("p",{className:"text-slate-600 ml-11",children:"Below is your infrastructure configuration in YAML format. This file describes all your resources, environment variables, and settings. Copy it to your repository for version control and CI/CD integration."}),(0,s.jsx)("div",{className:"ml-11 space-y-3",children:(0,s.jsxs)("div",{className:"bg-slate-900 rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-slate-800 px-4 py-3 flex items-center justify-between border-b border-slate-700",children:[(0,s.jsx)("span",{className:"text-white font-mono text-sm",children:"unhazzle.yaml"}),(0,s.jsx)("button",{onClick:()=>{let e=P(c);navigator.clipboard.writeText(e),alert("YAML copied to clipboard!")},className:"px-3 py-1 bg-purple-600 text-white text-xs rounded hover:bg-purple-700 transition",children:"Copy"})]}),(0,s.jsx)("pre",{className:"p-4 text-white font-mono text-xs overflow-x-auto max-h-72",children:(0,s.jsx)("code",{children:P(c)})})]})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"2"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-slate-900",children:"Add YAML to Your Repository"})]}),(0,s.jsx)("p",{className:"text-slate-600 ml-11",children:"Commit the unhazzle.yaml file to the root of your repository:"}),(0,s.jsxs)("div",{className:"ml-11 bg-slate-100 rounded-lg p-4 font-mono text-sm space-y-1",children:[(0,s.jsx)("div",{className:"text-slate-700",children:"$ git add unhazzle.yaml"}),(0,s.jsx)("div",{className:"text-slate-700",children:'$ git commit -m "Add Unhazzle deployment config"'}),(0,s.jsx)("div",{className:"text-slate-700",children:"$ git push origin main"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"3"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-slate-900",children:"Set Up GitHub Actions Workflow"})]}),(0,s.jsx)("p",{className:"text-slate-600 ml-11",children:"Create a GitHub Actions workflow to automatically deploy on every push:"}),(0,s.jsx)("div",{className:"ml-11 space-y-3",children:(0,s.jsxs)("div",{className:"bg-slate-900 rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-slate-800 px-4 py-3 flex items-center justify-between border-b border-slate-700",children:[(0,s.jsx)("span",{className:"text-white font-mono text-sm",children:".github/workflows/deploy.yml"}),(0,s.jsx)("button",{onClick:()=>{let e=z();navigator.clipboard.writeText(e),alert("Workflow copied to clipboard!")},className:"px-3 py-1 bg-purple-600 text-white text-xs rounded hover:bg-purple-700 transition",children:"Copy"})]}),(0,s.jsx)("pre",{className:"p-4 text-white font-mono text-xs overflow-x-auto max-h-72",children:(0,s.jsx)("code",{children:z()})})]})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"4"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-slate-900",children:"Install Unhazzle CLI"})]}),(0,s.jsx)("p",{className:"text-slate-600 ml-11",children:"Install the Unhazzle CLI locally for development and debugging:"}),(0,s.jsxs)("div",{className:"ml-11 bg-slate-100 rounded-lg p-4 font-mono text-sm space-y-1",children:[(0,s.jsx)("div",{className:"text-slate-700",children:"$ npm install -g @unhazzle/cli"}),(0,s.jsx)("div",{className:"text-slate-700 mt-3",children:"# Or authenticate with GitHub"}),(0,s.jsx)("div",{className:"text-slate-700",children:"$ unhazzle auth login"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"5"}),(0,s.jsx)("h4",{className:"text-lg font-bold text-slate-900",children:"All Set! Continuous Deployment Enabled"})]}),(0,s.jsx)("p",{className:"text-slate-600 ml-11",children:"From now on, every time you push to your main branch:"}),(0,s.jsxs)("div",{className:"ml-11 space-y-2 text-slate-600",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-purple-600 font-bold mt-1",children:"‚Ä¢"}),(0,s.jsx)("span",{children:"GitHub Actions picks up the unhazzle.yaml file"})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-purple-600 font-bold mt-1",children:"‚Ä¢"}),(0,s.jsx)("span",{children:"Unhazzle CLI automatically deploys your app with the exact configuration"})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-purple-600 font-bold mt-1",children:"‚Ä¢"}),(0,s.jsx)("span",{children:"No manual steps, no configuration drift, fully automated"})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-purple-600 font-bold mt-1",children:"‚Ä¢"}),(0,s.jsx)("span",{children:"Deployment status is reflected in your GitHub PR"})]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 p-6 rounded-lg border border-slate-200 space-y-4",children:[(0,s.jsx)("h4",{className:"font-bold text-slate-900",children:"üîß Useful CLI Commands"}),(0,s.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-mono text-slate-700 mb-1",children:"$ unhazzle status"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Check application health and metrics"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-mono text-slate-700 mb-1",children:"$ unhazzle logs --follow"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Stream real-time application logs"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-mono text-slate-700 mb-1",children:"$ unhazzle env set KEY=VALUE"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Update environment variables on the fly"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-mono text-slate-700 mb-1",children:"$ unhazzle deploy --config unhazzle.yaml"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Manual deployment using your YAML config"})]})]})]}),(0,s.jsxs)("div",{className:"text-center p-6 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border border-purple-200",children:[(0,s.jsx)("p",{className:"text-slate-600 mb-4",children:"Want to learn more about continuous deployment?"}),(0,s.jsx)("a",{href:"https://docs.unhazzle.io/cli",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium",children:"Read the CLI Documentation ‚Üí"})]})]})]})]})]})})}function y(e){var n,d;let{project:o,state:v}=e,N=(0,a.useRouter)(),y=(0,a.useSearchParams)(),{updateContainer:C,updateResources:P,removeDatabase:z,removeCache:T,removeContainer:R,cloneEnvironment:A,promoteEnvironment:D,deleteEnvironment:U,pauseEnvironment:L,resumeEnvironment:I,updateProject:M,createAppsFromImages:B,getActiveEnvironment:G,updateEnvironmentConfig:F,createEnvironment:_}=(0,l.useDeployment)(),[H,O]=(0,t.useState)({kind:"project-settings"}),[V,W]=(0,t.useState)("general"),[$,q]=(0,t.useState)(!1),[Y,Z]=(0,t.useState)(!1),[K,J]=(0,t.useState)(!1),[Q,X]=(0,t.useState)(!1),[ee,es]=(0,t.useState)(!1),[et,ea]=(0,t.useState)(!1),[el,en]=(0,t.useState)(!1),[er,ei]=(0,t.useState)(!1),[ed,ec]=(0,t.useState)(null),[eo,ex]=(0,t.useState)(null),[em,eh]=(0,t.useState)(null),[ep,eu]=(0,t.useState)(null),[eb,eg]=(0,t.useState)(!1),[ej,ev]=(0,t.useState)(!1),[ef,eN]=(0,t.useState)(!1),[ey,ew]=(0,t.useState)((null==(n=v.project)?void 0:n.githubPAT)||""),[eC,ek]=(0,t.useState)(!1),[eS,eE]=(0,t.useState)([]),[eP,ez]=(0,t.useState)(!1),[eT,eR]=(0,t.useState)({}),eA=()=>{if(!(null==o?void 0:o.environments))return null;if("container"===H.kind)for(let s of o.environments){var e;let t=null==(e=s.containers)?void 0:e.find(e=>e.id===H.id);if(t)return{type:"container",data:t,env:s}}else if("database"===H.kind){let e=o.environments.find(e=>e.id===H.envId);if(null==e?void 0:e.database)return{type:"database",data:e.database,env:e}}return null},eD=eA();(0,t.useEffect)(()=>{let e=y.get("selection"),s=y.get("env"),t=y.get("id"),a=y.get("tab");"project-settings"===e?(O({kind:"project-settings"}),a&&("registry"===a||"repository"===a||"pr-environments"===a||"general"===a)&&W(a)):"container"===e&&t&&s?O({kind:"container",id:t,envId:s}):"environment"===e&&s&&O({kind:"environment",envId:s})},[y]),(0,t.useEffect)(()=>{let e=eA();if("container"===H.kind&&(null==e?void 0:e.data)){let s=JSON.parse(JSON.stringify(e.data));Array.isArray(s.environmentVariables)||(s.environmentVariables=[]),ex(s)}else"database"===H.kind&&(null==e?void 0:e.data)?(eh(JSON.parse(JSON.stringify(e.data))),ex(null)):(ex(null),eh(null),eu(null))},[H,o]);let eU=()=>{if(!ey.trim())return void alert("Please enter a GitHub Personal Access Token");v.project&&M({githubPAT:ey}),ek(!0)},eL=()=>{let e=G();if(!e)return;ez(!0);let s=eS.map(e=>{var s;let t=f.find(s=>"".concat(s.name,":").concat(s.tag)===e);if(!t)return null;let a=(null==(s=t.name.split("/").pop())?void 0:s.split(":")[0].toLowerCase().replace(/[^a-z0-9-]/g,"-"))||"app";return{name:"".concat(t.name,":").concat(t.tag),url:"ghcr.io/".concat(t.name,":").concat(t.tag),autoName:a,tag:t.tag,description:t.description}}).filter(Boolean);s.length>0&&B(e.id,s),setTimeout(()=>{ez(!1),ek(!1),eE([])},1e3)};return o?(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,s.jsx)("div",{className:"col-span-12 lg:col-span-4 xl:col-span-3",children:(0,s.jsx)(r,{project:o,selected:H,onSelect:e=>"add-container"===e.kind?void ea(!0):"create-environment"===e.kind?void en(!0):void O(e)})}),(0,s.jsxs)("div",{className:"col-span-12 lg:col-span-8 xl:col-span-9",children:["project-settings"===H.kind&&(0,s.jsx)(c,{project:o,initialTab:V,onSave:e=>{M(e)},onCreateEnvironment:()=>{en(!0)}}),"environment"===H.kind&&H.envId&&(()=>{var e,t;let a=null==(e=o.environments)?void 0:e.find(e=>e.id===H.envId);return a?(0,s.jsxs)(s.Fragment,{children:[0!==a.containers.length||a.deployed||eT[a.id]||o.githubPAT?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i,{environment:a,onClone:()=>q(!0),onPromote:()=>Z(!0),onDelete:()=>J(!0),onPause:()=>X(!0),onResume:()=>es(!0),onAddContainer:()=>{O({kind:"add-container",envId:a.id}),ea(!0)}})}):(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Connect Your Container Registry"}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Connect to GitHub Container Registry to deploy your private images to ",(0,s.jsx)("span",{className:"font-semibold",children:a.name})]})]}),eC?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Images to Deploy"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[eS.length," / 5 selected"]})]}),(0,s.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:f.map(e=>{let t="".concat(e.name,":").concat(e.tag),a=eS.includes(t);return(0,s.jsx)("button",{onClick:()=>(e=>{if(eS.includes(e))eE(eS.filter(s=>s!==e));else{if(eS.length>=5)return void alert("Maximum 5 images allowed");eE([...eS,e])}})(t),className:"w-full p-4 border-2 rounded-lg text-left transition ".concat(a?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-5 h-5 rounded border-2 flex-shrink-0 mt-1 ".concat(a?"bg-blue-600 border-blue-600":"border-gray-300"),children:a&&(0,s.jsx)("svg",{className:"w-full h-full text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"font-semibold text-gray-900 mb-1",children:["ghcr.io/",e.name,":",(0,s.jsx)("span",{className:"text-blue-600",children:e.tag})]}),(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,s.jsx)("span",{children:e.size}),(0,s.jsx)("span",{children:"‚Ä¢"}),(0,s.jsxs)("span",{children:["Updated ",(e=>{let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/864e5);return 0===t?"Today":1===t?"Yesterday":t<7?"".concat(t," days ago"):s.toLocaleDateString()})(e.lastUpdated)]})]})]})]})},t)})})]}),(0,s.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-700",children:[eS.length," image",1!==eS.length?"s":""," selected",eS.length>0&&" - containers will be auto-configured with smart defaults"]})}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>ek(!1),disabled:eP,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-md font-medium hover:bg-gray-50 transition disabled:opacity-50",children:"Back"}),(0,s.jsx)("button",{onClick:eL,disabled:0===eS.length||eP,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-md hover:from-purple-700 hover:to-blue-700 transition font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex-1 flex items-center justify-center gap-2",children:eP?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"Creating Containers..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{children:["Continue with ",eS.length," Container",1!==eS.length?"s":""]}),(0,s.jsx)("span",{children:"‚Üí"})]})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GitHub Personal Access Token"}),(0,s.jsx)("input",{type:"password",value:ey,onChange:e=>ew(e.target.value),placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Token needs ",(0,s.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"read:packages"})," scope to access ghcr.io"]})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"‚ÑπÔ∏è"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-blue-900",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"Connect to GitHub Container Registry"}),(0,s.jsx)("p",{children:"Link your GitHub account to quickly import container images from ghcr.io. This is optional - you can always add containers manually."})]})]})}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:eU,disabled:!ey.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed font-medium flex-1",children:"Fetch Images"}),(0,s.jsx)("button",{onClick:()=>eR(e=>({...e,[a.id]:!0})),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-md font-medium hover:bg-gray-50 transition",children:"Skip for Now"})]})]})]}),$&&(0,s.jsx)(x,{sourceEnvironment:a,onClose:()=>q(!1),onConfirm:e=>{A(a.id,e),q(!1)}}),Y&&(0,s.jsx)(m,{sourceEnvironment:a,availableTargets:(null==(t=o.environments)?void 0:t.filter(e=>("standard"===e.type||"non-prod"===e.type||"prod"===e.type)&&e.id!==a.id&&"active"===e.status))||[],onClose:()=>Z(!1),onConfirm:e=>{D(a.id,e),Z(!1)}}),Q&&(0,s.jsx)(p,{environment:a,onClose:()=>X(!1),onConfirm:()=>{L(a.id),X(!1)}}),ee&&(0,s.jsx)(u,{environment:a,onClose:()=>es(!1),onConfirm:()=>{I(a.id),es(!1)}}),K&&(0,s.jsx)(h,{environment:a,onClose:()=>J(!1),onConfirm:()=>{var e;U(a.id),J(!1);let s=null==(e=o.environments)?void 0:e.filter(e=>e.id!==a.id&&"deleted"!==e.status);(null==s?void 0:s[0])?O({kind:"environment",envId:s[0].id}):O({kind:"architecture"})}})]}):null})(),et&&H.envId&&(0,s.jsx)(g,{onClose:()=>ea(!1),availableImages:(null==(d=v.project)?void 0:d.githubPAT)?f:[],onAdd:e=>{var s;let{name:t,imageUrl:a,exposure:l}=e,n=G();if(!n)return;let r="container-".concat(Date.now(),"-0");B(n.id,[{name:(null==(s=a.split("/").pop())?void 0:s.split(":")[0])||t,url:a,autoName:t,tag:a.split(":").pop()||"latest",description:"".concat(t," container"),exposure:l}]),ea(!1),setTimeout(()=>{N.push("/dashboard?selection=container&id=".concat(r,"&env=").concat(n.id))},150)}}),er&&ed&&(0,s.jsx)(j,{containerName:ed.name,onClose:()=>{ei(!1),ec(null)},onConfirm:()=>{R(ed.id,ed.envId),ei(!1),ec(null),N.push("/dashboard?selection=environment&env=".concat(ed.envId))}}),el&&(0,s.jsx)(b,{onClose:()=>en(!1),onConfirm:(e,s)=>{let t=_({name:e,type:s,status:"provisioning",deployed:!1,pendingChanges:!1});en(!1),N.push("/dashboard?selection=environment&env=".concat(t.id))}}),"container"===H.kind&&eD&&eo&&(0,s.jsx)(w,{container:eD.data,environment:eD.env,draftContainer:eo,setDraftContainer:ex,hasChanges:!!(null==eD?void 0:eD.data)&&!!eo&&"container"===H.kind&&JSON.stringify({imageUrl:eo.imageUrl,resources:eo.resources,healthCheck:eo.healthCheck,exposure:eo.exposure,serviceAccess:eo.serviceAccess,environmentVariables:eo.environmentVariables})!==JSON.stringify({imageUrl:eD.data.imageUrl,resources:eD.data.resources,healthCheck:eD.data.healthCheck,exposure:eD.data.exposure,serviceAccess:eD.data.serviceAccess,environmentVariables:eD.data.environmentVariables}),showChanges:eb,setShowChanges:eg,onApply:()=>ev(!0),isApplying:ef,state:v,onRequestRemove:(e,s,t)=>{ec({id:e,name:s,envId:t}),ei(!0)}}),"database"===H.kind&&eD&&em&&(0,s.jsx)(k,{database:eD.data,environment:eD.env,draftDatabase:em,setDraftDatabase:eh,hasChanges:!!(null==eD?void 0:eD.data)&&!!em&&"database"===H.kind&&JSON.stringify(em)!==JSON.stringify(eD.data),showChanges:eb,setShowChanges:eg,onApply:()=>ev(!0),isApplying:ef,state:v,onRemove:z}),"architecture"===H.kind&&(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üèóÔ∏è"}),(0,s.jsx)("span",{children:"Architecture Diagram"})]}),(0,s.jsx)("p",{className:"text-slate-600 mb-6",children:"Visual representation of your deployed infrastructure, including container connections and internal DNS."})]}),(0,s.jsx)(E,{state:v})]})]}),ej&&(0,s.jsx)(S,{selected:H,selectedResource:eD,draftContainer:eo,draftDatabase:em,draftCache:ep,onCancel:()=>ev(!1),onConfirm:()=>{"container"===H.kind?(null==eD?void 0:eD.data)&&eo&&(ev(!1),eN(!0),setTimeout(()=>{C(eD.data.id,{imageUrl:eo.imageUrl,resources:eo.resources,healthCheck:eo.healthCheck,exposure:eo.exposure,serviceAccess:eo.serviceAccess,environmentVariables:eo.environmentVariables}),eN(!1)},800)):"database"===H.kind&&(()=>{if(!em||!v.resources)return;let e=v.resources;ev(!1),eN(!0),setTimeout(()=>{P({replicas:e.replicas,cpu:e.cpu,memory:e.memory,database:em,cache:e.cache}),eN(!1)},800)})()}})]}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"üì¶"}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"No Projects Yet"}),(0,s.jsx)("p",{className:"text-slate-600 mb-6",children:"Create your first project to get started with Unhazzle"}),(0,s.jsx)("button",{onClick:()=>window.location.href="/questionnaire",className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold",children:"Create Project"})]})}function w(e){var t,a,l,n;let{container:r,environment:i,draftContainer:d,setDraftContainer:c,hasChanges:o,showChanges:x,setShowChanges:m,onApply:h,isApplying:p,state:u,onRequestRemove:b}=e,g=(null==i?void 0:i.deployed)||!1;return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-slate-900",children:r.name||"Application Container"}),(0,s.jsxs)("p",{className:"text-xs text-slate-500",children:["Image: ",r.imageUrl]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[g&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>m(!0),disabled:!o||p,className:"px-4 py-2 rounded-lg text-sm font-medium border ".concat(o?"border-amber-300 text-amber-700 bg-amber-50":"border-slate-200 text-slate-400"," disabled:opacity-50"),children:"Show Changes"}),(0,s.jsx)("button",{onClick:h,disabled:!o||p,className:"px-4 py-2 rounded-lg text-sm font-semibold bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-50",children:p?"Applying‚Ä¶":"Apply"})]}),(0,s.jsx)("button",{onClick:()=>{b(r.id,r.name||"container",i.id)},disabled:p,className:"px-4 py-2 rounded-lg text-sm font-medium border border-red-300 text-red-600 hover:bg-red-50 disabled:opacity-50",children:"Remove"})]})]}),"public"===r.exposure&&(()=>{var e;let t=(null==(e=r.imageUrl.split("/").pop())?void 0:e.split(":")[0])||"app",a=r.id.substring(0,6),l="".concat(t,"-").concat(a,".unhazzle.app");return(0,s.jsx)("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Public Endpoint"}),(0,s.jsx)("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded-full",children:"Live"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("code",{className:"text-sm text-purple-600 font-mono",children:["https://",l]}),(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText("https://".concat(l))},className:"p-1 hover:bg-slate-200 rounded transition text-sm",title:"Copy to clipboard",children:"üìã"})]}),(0,s.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["Port ",r.port," ‚Ä¢ SSL Enabled ‚Ä¢ CDN Cached"]})]})})})})(),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Container Image"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Image URL"}),(0,s.jsx)("input",{type:"text",value:d.imageUrl,onChange:e=>c({...d,imageUrl:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono",placeholder:"ghcr.io/username/image:tag"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Resources"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"CPU"}),(0,s.jsxs)("select",{value:d.resources.cpu,onChange:e=>c({...d,resources:{...d.resources,cpu:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"0.25",children:"0.25"}),(0,s.jsx)("option",{value:"0.5",children:"0.5"}),(0,s.jsx)("option",{value:"1",children:"1"}),(0,s.jsx)("option",{value:"2",children:"2"}),(0,s.jsx)("option",{value:"4",children:"4"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Memory"}),(0,s.jsxs)("select",{value:d.resources.memory,onChange:e=>c({...d,resources:{...d.resources,memory:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"0.5GB",children:"0.5GB"}),(0,s.jsx)("option",{value:"1GB",children:"1GB"}),(0,s.jsx)("option",{value:"2GB",children:"2GB"}),(0,s.jsx)("option",{value:"4GB",children:"4GB"}),(0,s.jsx)("option",{value:"8GB",children:"8GB"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Replicas (min)"}),(0,s.jsx)("input",{type:"number",min:1,value:d.resources.replicas.min,onChange:e=>{let s=Math.max(1,parseInt(e.target.value)||1),t=d.resources.replicas.max;c({...d,resources:{...d.resources,replicas:{...d.resources.replicas,min:s,max:Math.max(s,t)}}})},className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Replicas (max)"}),(0,s.jsx)("input",{type:"number",min:d.resources.replicas.min,value:d.resources.replicas.max,onChange:e=>{let s=Math.max(d.resources.replicas.min,parseInt(e.target.value)||1);c({...d,resources:{...d.resources,replicas:{...d.resources.replicas,max:s}}})},className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Set min=max for fixed scaling. Different values enable auto-scaling."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Environment Variables"}),(0,s.jsxs)("div",{className:"space-y-3",children:[0===d.environmentVariables.length&&(0,s.jsx)("div",{className:"text-xs text-slate-500",children:"No variables defined yet."}),d.environmentVariables.map((e,t)=>(0,s.jsxs)("div",{className:"grid md:grid-cols-12 gap-3 items-start",children:[(0,s.jsxs)("div",{className:"md:col-span-4",children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Key"}),(0,s.jsx)("input",{type:"text",value:e.key,onChange:e=>{let s=[...d.environmentVariables];s[t]={...s[t],key:e.target.value},c({...d,environmentVariables:s})},placeholder:"KEY",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono"})]}),(0,s.jsxs)("div",{className:"md:col-span-6",children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Value"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:!1===e.masked?"text":"password",value:e.value,onChange:e=>{let s=[...d.environmentVariables];s[t]={...s[t],value:e.target.value},c({...d,environmentVariables:s})},placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono"}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e=[...d.environmentVariables],s=!1!==e[t].masked;e[t]={...e[t],masked:!s},c({...d,environmentVariables:e})},className:"p-2 rounded-lg border border-slate-300 hover:bg-slate-50 text-slate-900","aria-label":!1===e.masked?"Hide value":"Show value",title:!1===e.masked?"Hide value":"Show value",children:!1===e.masked?"üëÅÔ∏è‚Äçüó®Ô∏è":"üëÅÔ∏è"})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs mb-1 invisible",children:"Action"}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e=d.environmentVariables.filter((e,s)=>s!==t);c({...d,environmentVariables:e})},className:"w-full md:w-auto px-3 py-2 text-xs rounded-lg border border-red-300 text-red-700 hover:bg-red-50",children:"Remove"})]})]},t)),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"üîê"}),(0,s.jsx)("span",{children:"Values are masked by default and stored encrypted."})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e=[...d.environmentVariables,{key:"",value:"",masked:!0}];c({...d,environmentVariables:e})},className:"px-3 py-2 text-xs rounded-lg border border-slate-300 hover:bg-slate-50 text-slate-900",children:"+ Add variable"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Health Check"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Protocol"}),(0,s.jsxs)("select",{value:d.healthCheck.protocol,onChange:e=>c({...d,healthCheck:{...d.healthCheck,protocol:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"HTTP",children:"HTTP"}),(0,s.jsx)("option",{value:"TCP",children:"TCP"}),(0,s.jsx)("option",{value:"gRPC",children:"gRPC"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Port"}),(0,s.jsx)("input",{type:"number",value:d.healthCheck.port,onChange:e=>c({...d,healthCheck:{...d.healthCheck,port:parseInt(e.target.value)||d.port}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Path"}),(0,s.jsx)("input",{type:"text",value:d.healthCheck.path||"",onChange:e=>c({...d,healthCheck:{...d.healthCheck,path:e.target.value}}),placeholder:"/health",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Networking"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Visibility"}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,s.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",checked:"public"===d.exposure,onChange:()=>c({...d,exposure:"public"})}),(0,s.jsx)("span",{className:"text-slate-900",children:"Public"})]}),(0,s.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",checked:"private"===d.exposure,onChange:()=>c({...d,exposure:"private"})}),(0,s.jsx)("span",{className:"text-slate-900",children:"Private"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Domain"}),(0,s.jsx)("div",{className:"text-sm text-slate-900",children:(null==(t=u.domain)?void 0:t.customDomain)||"".concat(null==(a=u.domain)?void 0:a.defaultSubdomain,".unhazzle.app")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Port"}),(0,s.jsx)("div",{className:"text-sm font-mono text-slate-900",children:d.port})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Service Access"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(null==(l=u.resources)?void 0:l.database)&&(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:d.serviceAccess.database,onChange:e=>{let s=e.target.checked,t="UNHAZZLE_POSTGRES_URL",a=[...d.environmentVariables];s?a.some(e=>e.key===t)||a.push({key:t,value:"",masked:!1}):a=a.filter(e=>e.key!==t),c({...d,serviceAccess:{...d.serviceAccess,database:s},environmentVariables:a})}}),(0,s.jsx)("span",{className:"text-slate-900",children:"PostgreSQL"})]}),(null==(n=u.resources)?void 0:n.cache)&&(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:d.serviceAccess.cache,onChange:e=>{let s=e.target.checked,t="UNHAZZLE_REDIS_URL",a=[...d.environmentVariables];s?a.some(e=>e.key===t)||a.push({key:t,value:"",masked:!1}):a=a.filter(e=>e.key!==t),c({...d,serviceAccess:{...d.serviceAccess,cache:s},environmentVariables:a})}}),(0,s.jsx)("span",{className:"text-slate-900",children:"Redis"})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Connection strings are auto-injected as environment variables."})]})]}),x&&o&&(0,s.jsx)(C,{current:r,draft:d,onClose:()=>m(!1)})]})}function C(e){let{current:t,draft:a,onClose:l}=e,r=(0,n.calculateContainerCostImpact)(t.resources.cpu,t.resources.memory,t.resources.replicas,a.resources.cpu,a.resources.memory,a.resources.replicas);return(0,s.jsxs)("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h5",{className:"font-semibold text-amber-900",children:"üìù Pending Changes"}),(0,s.jsx)("button",{onClick:l,className:"text-xs text-amber-700 underline",children:"Hide"})]}),(0,s.jsxs)("ul",{className:"text-sm text-amber-900 list-disc ml-5 space-y-1",children:[t.resources.cpu!==a.resources.cpu&&(0,s.jsxs)("li",{children:["CPU: ",t.resources.cpu," ‚Üí ",a.resources.cpu]}),t.resources.memory!==a.resources.memory&&(0,s.jsxs)("li",{children:["Memory: ",t.resources.memory," ‚Üí ",a.resources.memory]}),t.resources.replicas.min!==a.resources.replicas.min&&(0,s.jsxs)("li",{children:["Replicas (min): ",t.resources.replicas.min," ‚Üí ",a.resources.replicas.min]}),t.exposure!==a.exposure&&(0,s.jsxs)("li",{children:["Visibility: ",t.exposure," ‚Üí ",a.exposure]}),JSON.stringify(t.environmentVariables)!==JSON.stringify(a.environmentVariables)&&(0,s.jsx)("li",{children:"Environment variables updated"})]}),(0,s.jsxs)("div",{className:"text-xs text-amber-800 mt-3",children:["Impact: CPU/RAM changes require rolling restart. Estimated duration: ~2 minutes. Zero-downtime ensured.",0!==r&&(0,s.jsxs)("div",{className:"font-semibold mt-1",children:["üí∞ Cost impact: ",r>0?"+":"","$",Math.abs(r).toFixed(2),"/month"]})]})]})}function k(e){let{database:t,environment:a,draftDatabase:l,setDraftDatabase:r,hasChanges:i,showChanges:d,setShowChanges:c,onApply:o,isApplying:x,state:m,onRemove:h}=e,p=()=>{if((m.containers||[]).some(e=>{var s;return null==(s=e.serviceAccess)?void 0:s.database}))return void alert("Cannot remove database: one or more containers are still connected. Disable database access in container settings first.");window.confirm("Remove database from deployed configuration? This action cannot be undone in demo mode.")&&h()};return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-slate-900",children:"PostgreSQL Database"}),(0,s.jsxs)("p",{className:"text-xs text-slate-500",children:["Managed ",l.engine," instance"]})]}),(null==a?void 0:a.deployed)&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>c(!0),disabled:!i||x,className:"px-4 py-2 rounded-lg text-sm font-medium border ".concat(i?"border-amber-300 text-amber-700 bg-amber-50":"border-slate-200 text-slate-400"," disabled:opacity-50"),children:"Show Changes"}),(0,s.jsx)("button",{onClick:o,disabled:!i||x,className:"px-4 py-2 rounded-lg text-sm font-semibold bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-50",children:x?"Applying‚Ä¶":"Apply"}),(0,s.jsx)("button",{onClick:p,disabled:x,className:"px-4 py-2 rounded-lg text-sm font-medium border border-red-300 text-red-600 hover:bg-red-50 disabled:opacity-50",children:"Remove"})]}),!(null==a?void 0:a.deployed)&&(0,s.jsx)("button",{onClick:p,className:"px-4 py-2 rounded-lg text-sm font-medium border border-red-300 text-red-600 hover:bg-red-50",children:"Remove"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Resources"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"CPU"}),(0,s.jsxs)("select",{value:l.cpu,onChange:e=>r({...l,cpu:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"0.5",children:"0.5"}),(0,s.jsx)("option",{value:"1",children:"1"}),(0,s.jsx)("option",{value:"2",children:"2"}),(0,s.jsx)("option",{value:"4",children:"4"}),(0,s.jsx)("option",{value:"8",children:"8"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Memory"}),(0,s.jsxs)("select",{value:l.memory,onChange:e=>r({...l,memory:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"1GB",children:"1GB"}),(0,s.jsx)("option",{value:"2GB",children:"2GB"}),(0,s.jsx)("option",{value:"4GB",children:"4GB"}),(0,s.jsx)("option",{value:"8GB",children:"8GB"}),(0,s.jsx)("option",{value:"16GB",children:"16GB"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Storage"}),(0,s.jsxs)("select",{value:l.storage,onChange:e=>r({...l,storage:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"10GB",children:"10GB"}),(0,s.jsx)("option",{value:"20GB",children:"20GB"}),(0,s.jsx)("option",{value:"50GB",children:"50GB"}),(0,s.jsx)("option",{value:"100GB",children:"100GB"}),(0,s.jsx)("option",{value:"200GB",children:"200GB"}),(0,s.jsx)("option",{value:"500GB",children:"500GB"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Backups"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Frequency"}),(0,s.jsxs)("select",{value:l.backups.frequency,onChange:e=>r({...l,backups:{...l.backups,frequency:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"hourly",children:"Hourly"}),(0,s.jsx)("option",{value:"daily",children:"Daily"}),(0,s.jsx)("option",{value:"weekly",children:"Weekly"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Retention"}),(0,s.jsxs)("select",{value:l.backups.retention,onChange:e=>r({...l,backups:{...l.backups,retention:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"7 days",children:"7 days"}),(0,s.jsx)("option",{value:"14 days",children:"14 days"}),(0,s.jsx)("option",{value:"30 days",children:"30 days"}),(0,s.jsx)("option",{value:"90 days",children:"90 days"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Enabled"}),(0,s.jsxs)("label",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:l.backups.enabled,onChange:e=>r({...l,backups:{...l.backups,enabled:e.target.checked}})}),(0,s.jsx)("span",{className:"text-sm text-slate-900",children:"Automatic backups"})]})]})]})]}),d&&i&&(0,s.jsxs)("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h5",{className:"font-semibold text-amber-900",children:"üìù Pending Changes"}),(0,s.jsx)("button",{onClick:()=>c(!1),className:"text-xs text-amber-700 underline",children:"Hide"})]}),(0,s.jsxs)("ul",{className:"text-sm text-amber-900 list-disc ml-5 space-y-1",children:[t.cpu!==l.cpu&&(0,s.jsxs)("li",{children:["CPU: ",t.cpu," ‚Üí ",l.cpu]}),t.memory!==l.memory&&(0,s.jsxs)("li",{children:["Memory: ",t.memory," ‚Üí ",l.memory]}),t.storage!==l.storage&&(0,s.jsxs)("li",{children:["Storage: ",t.storage," ‚Üí ",l.storage]})]}),(0,s.jsxs)("div",{className:"text-xs text-amber-800 mt-3",children:["Impact: Storage changes are instant. CPU/Memory changes require brief maintenance window (~3 min).",(()=>{let e=(0,n.calculateDatabaseCostImpact)(t,l);return 0!==e?(0,s.jsxs)("div",{className:"font-semibold mt-1",children:["üí∞ Cost impact: ",e>0?"+":"","$",Math.abs(e).toFixed(2),"/month"]}):null})()]})]})]})}function S(e){var t;let{selected:a,selectedResource:l,draftContainer:r,draftDatabase:i,draftCache:d,onCancel:c,onConfirm:o}=e;return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:"‚ö†Ô∏è"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Apply Configuration Changes?"}),"container"===a.kind&&l&&r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-slate-700 mb-4",children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Summary:"}),(0,s.jsxs)("p",{className:"text-slate-600",children:["Container: ",(0,s.jsx)("span",{className:"font-mono",children:l.data.name||(null==(t=l.data.imageUrl.split("/").pop())?void 0:t.split(":")[0])})]}),(0,s.jsxs)("ul",{className:"list-disc ml-5 mt-2 space-y-1 text-slate-600",children:[l.data.resources.cpu!==r.resources.cpu&&(0,s.jsxs)("li",{children:["CPU: ",l.data.resources.cpu," ‚Üí ",r.resources.cpu," cores"]}),l.data.resources.memory!==r.resources.memory&&(0,s.jsxs)("li",{children:["Memory: ",l.data.resources.memory," ‚Üí ",r.resources.memory]}),l.data.resources.replicas.min!==r.resources.replicas.min&&(0,s.jsxs)("li",{children:["Min replicas: ",l.data.resources.replicas.min," ‚Üí ",r.resources.replicas.min]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2 text-sm",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Impact Assessment:"}),(0,s.jsx)("p",{className:"text-slate-600",children:"‚ö†Ô∏è Rolling restart required"}),(0,s.jsx)("p",{className:"text-slate-600",children:"‚è±Ô∏è Estimated time: ~2 minutes"}),(0,s.jsx)("p",{className:"text-slate-600",children:"‚úÖ No expected traffic disruption"}),(()=>{let e=(0,n.calculateContainerCostImpact)(l.data.resources.cpu,l.data.resources.memory,l.data.resources.replicas,r.resources.cpu,r.resources.memory,r.resources.replicas);return 0!==e?(0,s.jsxs)("p",{className:"text-slate-600 font-medium",children:["üí∞ Cost impact: ",e>0?"+":"","$",Math.abs(e).toFixed(2),"/month"]}):null})()]})]}),"database"===a.kind&&l&&i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-slate-700 mb-4",children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Summary:"}),(0,s.jsxs)("p",{className:"text-slate-600",children:["Resource: ",(0,s.jsx)("span",{className:"font-mono",children:"PostgreSQL Database"})]}),(0,s.jsxs)("ul",{className:"list-disc ml-5 mt-2 space-y-1 text-slate-600",children:[l.data.cpu!==i.cpu&&(0,s.jsxs)("li",{children:["CPU: ",l.data.cpu," ‚Üí ",i.cpu," cores"]}),l.data.memory!==i.memory&&(0,s.jsxs)("li",{children:["Memory: ",l.data.memory," ‚Üí ",i.memory]}),l.data.storage!==i.storage&&(0,s.jsxs)("li",{children:["Storage: ",l.data.storage," ‚Üí ",i.storage]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2 text-sm",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Impact Assessment:"}),(0,s.jsx)("p",{className:"text-slate-600",children:"‚ö†Ô∏è Maintenance window required for CPU/Memory changes"}),(0,s.jsx)("p",{className:"text-slate-600",children:"‚è±Ô∏è Estimated time: ~3 minutes"}),(0,s.jsx)("p",{className:"text-slate-600",children:"‚úÖ Zero data loss guaranteed"}),(()=>{let e=(0,n.calculateDatabaseCostImpact)(l.data,i);return 0!==e?(0,s.jsxs)("p",{className:"text-slate-600 font-medium",children:["üí∞ Cost impact: ",e>0?"+":"","$",Math.abs(e).toFixed(2),"/month"]}):null})()]})]}),"cache"===a.kind&&l&&d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-slate-700 mb-4",children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Summary:"}),(0,s.jsxs)("p",{className:"text-slate-600",children:["Resource: ",(0,s.jsx)("span",{className:"font-mono",children:"Redis Cache"})]}),(0,s.jsxs)("ul",{className:"list-disc ml-5 mt-2 space-y-1 text-slate-600",children:[l.data.memory!==d.memory&&(0,s.jsxs)("li",{children:["Memory: ",l.data.memory," ‚Üí ",d.memory]}),l.data.version!==d.version&&(0,s.jsxs)("li",{children:["Version: ",l.data.version," ‚Üí ",d.version]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2 text-sm",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Impact Assessment:"}),(0,s.jsx)("p",{className:"text-slate-600",children:"‚ö†Ô∏è Restart required (~30 seconds)"}),(0,s.jsx)("p",{className:"text-slate-600",children:"‚úÖ Data persisted if AOF/RDB enabled"}),(()=>{let e=(0,n.calculateCacheCostImpact)(l.data.memory,d.memory);return 0!==e?(0,s.jsxs)("p",{className:"text-slate-600 font-medium",children:["üí∞ Cost impact: ",e>0?"+":"","$",Math.abs(e).toFixed(2),"/month"]}):null})()]})]}),(0,s.jsx)("p",{className:"text-sm text-slate-600 mt-4",children:"Are you sure you want to apply these changes?"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[(0,s.jsx)("button",{onClick:c,className:"px-5 py-2 rounded-lg border border-slate-300 text-slate-700 hover:bg-slate-50 font-medium",children:"Cancel"}),(0,s.jsx)("button",{onClick:o,className:"px-5 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 font-medium",children:"Apply Changes"})]})]})})}function E(e){var t,a,l,n;let{state:r}=e,i=r.containers.filter(e=>"public"===e.exposure),d=r.containers.filter(e=>"private"===e.exposure),c=i.length>0,o=!!(null==(t=r.resources)?void 0:t.database),x=!!(null==(a=r.resources)?void 0:a.cache),m=e=>{var s;return(null==(s=e.split("/").pop())?void 0:s.split(":")[0])||"container"},h=e=>e.serviceName||"container-".concat(e.id.substring(0,8));return(0,s.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl p-8 border border-slate-200",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-8",children:[c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-purple-500 text-white rounded-lg p-6 shadow-lg text-center min-w-[200px]",children:[(0,s.jsx)("div",{className:"text-3xl mb-2",children:"‚öñÔ∏è"}),(0,s.jsx)("div",{className:"font-bold",children:"Load Balancer"}),(0,s.jsx)("div",{className:"text-sm opacity-90 mt-1",children:(null==(l=r.domain)?void 0:l.customDomain)||"".concat(null==(n=r.domain)?void 0:n.defaultSubdomain,".unhazzle.io")})]}),(0,s.jsx)("div",{className:"text-slate-400",children:(0,s.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",children:[(0,s.jsx)("line",{x1:"20",y1:"0",x2:"20",y2:"30",stroke:"currentColor",strokeWidth:"3"}),(0,s.jsx)("polygon",{points:"20,40 15,30 25,30",fill:"currentColor"})]})})]}),i.length>0&&(0,s.jsx)("div",{className:"flex gap-6 flex-wrap justify-center",children:i.map((e,t)=>{let a=m(e.imageUrl),l=h(e),n=r.containers.indexOf(e)+1;return(0,s.jsxs)("div",{className:"bg-blue-500 text-white rounded-lg p-4 shadow-lg text-center min-w-[160px]",children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:"üöÄ"}),(0,s.jsxs)("div",{className:"font-bold text-sm",children:["Container ",n]}),(0,s.jsx)("div",{className:"text-xs opacity-90 mt-1",children:a}),(0,s.jsxs)("div",{className:"text-xs opacity-75 mt-2",children:[":",e.port]}),(0,s.jsxs)("div",{className:"text-xs font-mono bg-blue-600 rounded px-2 py-1 mt-2",children:[l,".internal"]})]},e.id)})}),d.length>0&&(0,s.jsxs)(s.Fragment,{children:[i.length>0&&(0,s.jsx)("div",{className:"text-slate-400 text-sm",children:"Internal Network"}),(0,s.jsx)("div",{className:"flex gap-6 flex-wrap justify-center",children:d.map((e,t)=>{let a=m(e.imageUrl),l=h(e),n=r.containers.indexOf(e)+1;return(0,s.jsxs)("div",{className:"bg-slate-500 text-white rounded-lg p-4 shadow-lg text-center min-w-[160px]",children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:"üîí"}),(0,s.jsxs)("div",{className:"font-bold text-sm",children:["Container ",n]}),(0,s.jsx)("div",{className:"text-xs opacity-90 mt-1",children:a}),(0,s.jsxs)("div",{className:"text-xs opacity-75 mt-2",children:[":",e.port]}),(0,s.jsxs)("div",{className:"text-xs font-mono bg-slate-600 rounded px-2 py-1 mt-2",children:[l,".internal"]})]},e.id)})})]}),(o||x)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-slate-400 text-sm",children:"Backend Services"}),(0,s.jsxs)("div",{className:"flex gap-6",children:[o&&(0,s.jsxs)("div",{className:"bg-green-500 text-white rounded-lg p-4 shadow-lg text-center min-w-[160px]",children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:"üêò"}),(0,s.jsx)("div",{className:"font-bold text-sm",children:"PostgreSQL"}),(0,s.jsxs)("div",{className:"text-xs opacity-90 mt-1",children:[r.resources.database.cpu," CPU"]}),(0,s.jsx)("div",{className:"text-xs font-mono bg-green-600 rounded px-2 py-1 mt-2",children:"postgres.internal"})]}),x&&(0,s.jsxs)("div",{className:"bg-red-500 text-white rounded-lg p-4 shadow-lg text-center min-w-[160px]",children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:"‚ö°"}),(0,s.jsx)("div",{className:"font-bold text-sm",children:"Redis"}),(0,s.jsxs)("div",{className:"text-xs opacity-90 mt-1",children:[r.resources.cache.memory," RAM"]}),(0,s.jsx)("div",{className:"text-xs font-mono bg-red-600 rounded px-2 py-1 mt-2",children:"redis.internal"})]})]})]})]}),(0,s.jsxs)("div",{className:"mt-8 pt-6 border-t border-slate-300 flex flex-wrap gap-4 justify-center text-sm",children:[c&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-purple-500 rounded"}),(0,s.jsx)("span",{className:"text-slate-700",children:"Public Internet"})]}),i.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded"}),(0,s.jsx)("span",{className:"text-slate-700",children:"Public Container"})]}),d.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-slate-500 rounded"}),(0,s.jsx)("span",{className:"text-slate-700",children:"Private Container"})]}),o&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded"}),(0,s.jsx)("span",{className:"text-slate-700",children:"Database"})]}),x&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded"}),(0,s.jsx)("span",{className:"text-slate-700",children:"Cache"})]})]})]})}function P(e){var s,t,a,l,n,r,i,d,c,o,x,m,h,p,u;let b=(null==(s=e.questionnaire)?void 0:s.appType)||"web",g=null==(t=e.resources)?void 0:t.database,j=null==(a=e.resources)?void 0:a.cache;null==(l=e.environment)||l.autogenerated;let v=(null==(n=e.environment)?void 0:n.userSecrets)||{},f="environment:\n";g&&(f+="  DATABASE_URL: ${{ secrets.DATABASE_URL }}\n"),j&&(f+="  REDIS_URL: ${{ secrets.REDIS_URL }}\n"),Object.keys(v).length>0&&Object.keys(v).forEach(e=>{f+="  ".concat(e,": ${{ secrets.").concat(e," }}\n")}),"ecommerce"===b?(f+="  NODE_ENV: production\n",f+="  STRIPE_PUBLIC_KEY: ${{ secrets.STRIPE_PUBLIC_KEY }}\n",f+="  STRIPE_SECRET_KEY: ${{ secrets.STRIPE_SECRET_KEY }}\n",f+="  STRIPE_WEBHOOK_SECRET: ${{ secrets.STRIPE_WEBHOOK_SECRET }}\n",f+="  NEXTAUTH_URL: https://".concat((null==(m=e.domain)?void 0:m.customDomain)||(null==(h=e.domain)?void 0:h.defaultSubdomain),"\n"),f+="  NEXTAUTH_SECRET: ${{ secrets.NEXTAUTH_SECRET }}\n"):"saas"===b?(f+="  NODE_ENV: production\n",f+="  API_KEY: ${{ secrets.API_KEY }}\n",f+="  JWT_SECRET: ${{ secrets.JWT_SECRET }}\n",f+="  APP_URL: https://".concat((null==(p=e.domain)?void 0:p.customDomain)||(null==(u=e.domain)?void 0:u.defaultSubdomain),"\n")):(f+="  NODE_ENV: production\n",f+="  LOG_LEVEL: info\n");let N="";return e.containers&&e.containers.length>0&&(N="containers:\n",e.containers.forEach((e,s)=>{var t;let a=(null==(t=e.imageUrl.split("/").pop())?void 0:t.split(":")[0])||"container-".concat(s+1);N+="  - name: ".concat(a,"\n"),N+="    image: ".concat(e.imageUrl,"\n"),N+="    port: ".concat(e.port,"\n"),N+="    exposure: ".concat(e.exposure,"\n"),N+="    resources:\n",N+="      cpu: ".concat(e.resources.cpu,"\n"),N+="      memory: ".concat(e.resources.memory,"\n"),N+="      replicas:\n",N+="        min: ".concat(e.resources.replicas.min,"\n"),N+="        max: ".concat(e.resources.replicas.max,"\n"),e.volume&&(N+="    volume:\n",N+="      mount_path: ".concat(e.volume.mountPath,"\n"),N+="      size: ".concat(e.volume.sizeGB,"GB\n"),N+="      auto_scale: ".concat(e.volume.autoScale,"\n"),N+="      backup_frequency: ".concat(e.volume.backupFrequency,"\n"),N+="      delete_with_container: ".concat(e.volume.deleteWithContainer,"\n")),N+="\n"})),"# Unhazzle Deployment Configuration\n# Generated from your application setup\n# Reference: https://docs.unhazzle.io/yaml-config\n\nproject: ".concat((null==(i=e.user)||null==(r=i.name)?void 0:r.toLowerCase().replace(/\s+/g,"-"))||"my-app","\nenvironment: production\n\ndomain: ").concat((null==(d=e.domain)?void 0:d.customDomain)||(null==(c=e.domain)?void 0:c.defaultSubdomain)||"your-app.unhazzle.io","\nssl: true  # Auto-provisioned with Let's Encrypt\n\n").concat(N).concat(g?"services:\n  database:\n    type: ".concat(e.resources.database.engine,'\n    version: "').concat("postgres"===e.resources.database.engine?"16":"8.0",'"\n    cpu: ').concat(e.resources.database.cpu,"\n    memory: ").concat(e.resources.database.memory,"\n    storage: ").concat(e.resources.database.storage,'\n    backups:\n      enabled: true\n      retention_days: 30\n      frequency: daily\n      time: "02:00"  # 2 AM UTC\n    ha_replica: true\n    connection_pooling: true\n'):"services: {}  # No database services\n","\n").concat(j?"  cache:\n    type: ".concat(e.resources.cache.engine,'\n    version: "').concat("redis"===e.resources.cache.engine?"7.2":"latest",'"\n    memory: ').concat(e.resources.cache.memory,"\n    persistence: true\n    eviction_policy: allkeys-lru\n"):"","\n\n").concat(f,"\n\n# Monitoring and alerting\nmonitoring:\n  enabled: true\n  metrics_retention: 90d\n  alerts:\n    - name: high_cpu\n      threshold: 85%\n      duration: 5m\n    - name: high_memory\n      threshold: 90%\n      duration: 5m\n    - name: deployment_failure\n      threshold: any\n      duration: 1m\n\n# Security\nsecurity:\n  auto_https: true\n  hsts_enabled: true\n  cors_origins:\n    - https://").concat((null==(o=e.domain)?void 0:o.customDomain)||(null==(x=e.domain)?void 0:x.defaultSubdomain),"\n\n# For more information, visit: https://docs.unhazzle.io/yaml-configuration\n")}function z(){return"name: Deploy to Unhazzle\n\non:\n  push:\n    branches:\n      - main\n    paths:\n      - 'unhazzle.yaml'\n      - 'src/**'\n      - 'package.json'\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    \n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v4\n      \n      - name: Install Unhazzle CLI\n        run: npm install -g @unhazzle/cli\n      \n      - name: Authenticate with Unhazzle\n        env:\n          UNHAZZLE_TOKEN: ${{ secrets.UNHAZZLE_TOKEN }}\n        run: unhazzle auth token $UNHAZZLE_TOKEN\n      \n      - name: Deploy application\n        run: unhazzle deploy --config unhazzle.yaml\n      \n      - name: Wait for deployment\n        run: unhazzle status --wait\n\n      - name: Run health checks\n        run: unhazzle health-check\n\n      - name: Comment PR with deployment info\n        uses: actions/github-script@v7\n        if: github.event_name == 'pull_request'\n        with:\n          script: |\n            const deploymentStatus = await exec('unhazzle status --json');\n            github.rest.issues.createComment({\n              issue_number: context.issue.number,\n              owner: context.repo.owner,\n              repo: context.repo.repo,\n              body: `‚úÖ Deployed to Unhazzle!\n\nView your app: https://app.unhazzle.io`\n            });\n"}}]);