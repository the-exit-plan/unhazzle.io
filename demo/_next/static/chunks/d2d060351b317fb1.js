(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,35105,e=>{"use strict";e.s(["default",()=>n]);var s=e.i(43476),l=e.i(71645),t=e.i(18566),a=e.i(23312);function r(){let e=(0,t.useRouter)(),r=(0,t.useSearchParams)().get("mode")||"deploy",{state:n,updateCost:i,updateApplication:c,updateApplicationConfig:o,updateResources:d,removeApplication:x,getActiveEnvironment:m,deployEnvironment:p,applyEnvironmentChanges:h,updateEnvironmentConfig:u}=(0,a.useDeployment)(),[j,b]=(0,l.useState)(null),[g,v]=(0,l.useState)(!1),[f,N]=(0,l.useState)(!1),y=m();(0,l.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,l.useEffect)(()=>{if(!y){console.log("No active environment, redirecting to dashboard"),e.push("/dashboard");return}if(0===y.applications.length){console.log("No applications in environment, redirecting to dashboard"),e.push("/dashboard");return}console.log("UseEffect triggered - activeEnv:",y.name,"applications:",y.applications.length);let s=setTimeout(()=>{console.log("About to call recalculateCost");try{G()}catch(e){console.error("Error in recalculateCost:",e)}},10);return()=>clearTimeout(s)},[y]);let w=e=>{if("number"==typeof e)return e;let s=parseFloat(e.trim().replace(" vCPU","").replace("vCPU",""));return isNaN(s)?(console.error("Invalid CPU value:",e),0):s},B=e=>{let s=e.trim(),l=parseFloat(s);return isNaN(l)?(console.error("Invalid memory value:",e),0):s.includes("MB")?l/1024:l},C=e=>{if("number"==typeof e)return e;let s=e.trim(),l=parseFloat(s);return isNaN(l)?(console.error("Invalid storage value:",e),0):s.includes("TB")?1e3*l:l},F=e=>{let s=w(e.resources.cpu),l=(7*s+3.5*B(e.resources.memory))*e.resources.replicas.min,t=0;return e.volume&&(t=.044*C(e.volume.sizeGB)+("disabled"!==e.volume.backupFrequency?.2*l:0)),l+t},G=()=>{var e,s;if(!y)return void console.log("No active environment for cost calculation");console.log("=== COST CALCULATION START ==="),console.log("Active Environment:",y.name,y.id),console.log("Applications:",y.applications);let l=0;y.applications.forEach((e,s)=>{var t;let a=F(e);console.log("Application ".concat(s+1,":"),{name:e.name,cpu:e.resources.cpu,memory:e.resources.memory,replicas:e.resources.replicas.min,volume:null==(t=e.volume)?void 0:t.sizeGB,cost:a.toFixed(2)}),l+=a}),console.log("Total Application Cost:",l.toFixed(2));let t=0;if(y.database){let e=w(y.database.cpu),s=B(y.database.memory),l=C(y.database.storage);t=10*e+4*s+.1*l,console.log("Database:",{cpu:y.database.cpu,cpuParsed:e,memory:y.database.memory,memoryGB:s.toFixed(2),storage:y.database.storage,storageGB:l.toFixed(2),cost:t.toFixed(2)})}let a=0;if(y.cache){let e=B(y.cache.memory);a=5*e,console.log("Cache:",{memory:y.cache.memory,memoryGB:e.toFixed(2),cost:a.toFixed(2)})}let r={application:l,database:y.database?t:void 0,cache:y.cache?a:void 0,loadBalancer:10,bandwidth:0,total:l+t+a+10};console.log("=== FINAL COST ===",{application:r.application.toFixed(2),database:null==(e=r.database)?void 0:e.toFixed(2),cache:null==(s=r.cache)?void 0:s.toFixed(2),loadBalancer:r.loadBalancer.toFixed(2),total:r.total.toFixed(2)}),console.log("Setting cost state with:",r),b(r),console.log("Cost state should be set now"),i(r)},A=()=>{N(!0),setTimeout(()=>{N(!1)},150)};if(!y||!j)return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-12 px-4 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin text-6xl mb-4",children:"âš™ï¸"}),(0,s.jsx)("p",{className:"text-slate-600",children:y?"Calculating costs...":"Loading environment..."})]})});y&&(y.database,y.cache);let T=y?y.applications.length:0;return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-12 px-4",children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium mb-4 ".concat("deploy"===r?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"),children:[(0,s.jsx)("span",{children:"deploy"===r?"ðŸš€":"âš¡"}),(0,s.jsx)("span",{children:"deploy"===r?"Initial Deployment":"Review Changes"})]}),(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-3",children:"deploy"===r?"Ready to Deploy":"Review & Apply Changes"}),(0,s.jsx)("p",{className:"text-lg text-slate-600",children:"deploy"===r?"Review and adjust resources before deployment":"Review the changes you made before applying them to your environment"}),(n.projectName||n.region)&&(0,s.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-3",children:[n.projectName&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 bg-slate-100 text-slate-700 px-3 py-1 rounded-full text-sm",children:[(0,s.jsx)("span",{children:"ðŸ“"}),(0,s.jsx)("span",{children:n.projectName})]}),n.region&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 bg-slate-100 text-slate-700 px-3 py-1 rounded-full text-sm",children:[(0,s.jsx)("span",{role:"img","aria-label":n.region.country,children:n.region.flag}),(0,s.jsx)("span",{children:n.region.label})]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-purple-600 to-blue-600 rounded-2xl shadow-2xl p-8 mb-6 text-white transition-opacity duration-150 ".concat(f?"opacity-50 pointer-events-none":"opacity-100"),children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("p",{className:"text-purple-100 text-sm font-medium mb-2",children:"ESTIMATED MONTHLY COST"}),(0,s.jsxs)("div",{className:"flex items-baseline justify-center gap-2",children:[(0,s.jsxs)("span",{className:"text-6xl font-bold",children:["â‚¬",j.total.toFixed(2)]}),(0,s.jsx)("span",{className:"text-2xl text-purple-100",children:"/month"})]}),(0,s.jsxs)("p",{className:"text-purple-100 text-sm mt-3",children:["ðŸ’¡ ",f?"Recalculating...":"Adjust resources below to see price updates"]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-100 text-sm",children:"Application"}),(0,s.jsxs)("p",{className:"text-2xl font-bold",children:["â‚¬",j.application.toFixed(2)]}),(0,s.jsxs)("p",{className:"text-purple-200 text-xs mt-1",children:[T," app",T>1?"s":""]})]}),(0,s.jsx)("div",{className:"text-3xl",children:"ðŸš€"})]})}),void 0!==j.database&&(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-100 text-sm",children:"Database"}),(0,s.jsxs)("p",{className:"text-2xl font-bold",children:["â‚¬",j.database.toFixed(2)]})]}),(0,s.jsx)("div",{className:"text-3xl",children:"ðŸ˜"})]})}),void 0!==j.cache&&j.cache>0&&(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-100 text-sm",children:"Cache"}),(0,s.jsxs)("p",{className:"text-2xl font-bold",children:["â‚¬",j.cache.toFixed(2)]})]}),(0,s.jsx)("div",{className:"text-3xl",children:"âš¡"})]})}),(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-100 text-sm",children:"Load Balancer & SSL"}),(0,s.jsxs)("p",{className:"text-2xl font-bold",children:["â‚¬",j.loadBalancer.toFixed(2)]})]}),(0,s.jsx)("div",{className:"text-3xl",children:"âš–ï¸"})]})})]})]}),(0,s.jsx)("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:y.applications.map((e,l)=>{let t=F(e);return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"ðŸš€"}),(0,s.jsx)("span",{children:e.name})]}),(0,s.jsx)("button",{onClick:()=>{window.confirm('Remove application "'.concat(e.name,'"?'))&&x(e.id)},className:"text-xs text-red-600 hover:text-red-700 font-medium border border-red-200 px-2 py-1 rounded hover:bg-red-50 transition",children:"Remove"})]}),"public"===e.exposure&&(0,s.jsx)("div",{className:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-blue-600 text-lg",children:"â„¹ï¸"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-blue-900",children:"Public Endpoint Available"}),(0,s.jsx)("p",{className:"text-xs text-blue-700 mt-1",children:"A secure public domain will be automatically provisioned after deployment"})]})]})}),(0,s.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-600",children:"CPU"}),(0,s.jsxs)("select",{value:e.resources.cpu,onChange:s=>{o(e.id,{resources:{...e.resources,cpu:s.target.value}}),A()},disabled:f,className:"text-slate-900 font-semibold px-2 py-1 border border-slate-200 rounded hover:border-purple-300 focus:border-purple-500 focus:ring-1 focus:ring-purple-500 outline-none bg-white disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)("option",{value:"0.25",children:"0.25 vCPU"}),(0,s.jsx)("option",{value:"0.5",children:"0.5 vCPU"}),(0,s.jsx)("option",{value:"1",children:"1 vCPU"}),(0,s.jsx)("option",{value:"2",children:"2 vCPU"}),(0,s.jsx)("option",{value:"4",children:"4 vCPU"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-600",children:"Memory"}),(0,s.jsxs)("select",{value:e.resources.memory,onChange:s=>{o(e.id,{resources:{...e.resources,memory:s.target.value}}),A()},disabled:f,className:"text-slate-900 font-semibold px-2 py-1 border border-slate-200 rounded hover:border-purple-300 focus:border-purple-500 focus:ring-1 focus:ring-purple-500 outline-none bg-white disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)("option",{value:"0.5GB",children:"0.5GB"}),(0,s.jsx)("option",{value:"1GB",children:"1GB"}),(0,s.jsx)("option",{value:"2GB",children:"2GB"}),(0,s.jsx)("option",{value:"4GB",children:"4GB"}),(0,s.jsx)("option",{value:"8GB",children:"8GB"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-600",children:"Replicas"}),(0,s.jsx)("input",{type:"number",min:"1",max:"10",value:e.resources.replicas.min,onChange:s=>{let l=parseInt(s.target.value)||1;l>0&&l<=10&&(o(e.id,{resources:{...e.resources,replicas:{...e.resources.replicas,min:l}}}),A())},disabled:f,className:"w-16 px-2 py-1 border border-slate-200 rounded text-center text-sm font-semibold hover:border-purple-300 focus:border-purple-500 focus:ring-1 focus:ring-purple-500 outline-none disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.volume&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"border-t border-slate-200 my-3 pt-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-1 mb-2",children:[(0,s.jsx)("span",{children:"ðŸ’¾"}),(0,s.jsx)("span",{className:"text-slate-700 font-semibold text-xs",children:"Persistent Volume"})]})}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-600",children:"Size"}),(0,s.jsxs)("select",{value:e.volume.sizeGB,onChange:s=>{o(e.id,{volume:{...e.volume,sizeGB:parseInt(s.target.value)}}),A()},disabled:f,className:"text-slate-900 font-semibold px-2 py-1 border border-slate-200 rounded hover:border-purple-300 focus:border-purple-500 focus:ring-1 focus:ring-purple-500 outline-none bg-white disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)("option",{value:10,children:"10GB"}),(0,s.jsx)("option",{value:20,children:"20GB"}),(0,s.jsx)("option",{value:50,children:"50GB"}),(0,s.jsx)("option",{value:100,children:"100GB"}),(0,s.jsx)("option",{value:250,children:"250GB"}),(0,s.jsx)("option",{value:500,children:"500GB"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-600",children:"Mount path"}),(0,s.jsx)("code",{className:"text-slate-900 font-mono text-xs bg-slate-100 px-2 py-1 rounded",children:e.volume.mountPath})]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-600",children:"Exposure"}),(0,s.jsx)("span",{className:"font-semibold",children:"public"===e.exposure?"ðŸŒ Public":"ðŸ”’ Private"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-600",children:"Port"}),(0,s.jsx)("code",{className:"bg-slate-100 px-2 py-1 rounded text-slate-900 font-mono text-xs",children:e.port})]}),(0,s.jsx)("div",{className:"pt-2 border-t border-slate-200",children:(0,s.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,s.jsx)("span",{className:"text-purple-600",children:"App Cost:"}),(0,s.jsxs)("span",{className:"text-purple-900",children:["â‚¬",t.toFixed(2),"/mo"]})]})})]})]},e.id)})}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-6",children:[(0,s.jsxs)("h3",{className:"text-2xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"âœ¨"}),(0,s.jsx)("span",{children:"Benefit from these built-in unhazzle features"})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-slate-900 mb-3",children:"Infrastructure"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-slate-600",children:[(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-green-600",children:"âœ“"}),(0,s.jsx)("span",{children:"Hetzner enterprise servers (Germany)"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-green-600",children:"âœ“"}),(0,s.jsx)("span",{children:"NVMe SSD storage (RAID 10)"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-green-600",children:"âœ“"}),(0,s.jsx)("span",{children:"10 Gbit/s network"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-green-600",children:"âœ“"}),(0,s.jsx)("span",{children:"20 TB bandwidth included"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-slate-900 mb-3",children:"High Availability"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-slate-600",children:[(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-green-600",children:"âœ“"}),(0,s.jsx)("span",{children:"Auto-scaling (min-max replicas)"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-green-600",children:"âœ“"}),(0,s.jsx)("span",{children:"Zero-downtime deployments"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-green-600",children:"âœ“"}),(0,s.jsx)("span",{children:"Health check monitoring"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-green-600",children:"âœ“"}),(0,s.jsx)("span",{children:"Automatic failover"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-slate-900 mb-3",children:"Security & Compliance"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-slate-600",children:[(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-green-600",children:"âœ“"}),(0,s.jsx)("span",{children:"Free SSL certificates"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-green-600",children:"âœ“"}),(0,s.jsx)("span",{children:"DDoS protection"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-green-600",children:"âœ“"}),(0,s.jsx)("span",{children:"Secrets encryption (AES-256)"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-green-600",children:"âœ“"}),(0,s.jsx)("span",{children:"GDPR compliant (EU data)"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 mb-8",children:[(0,s.jsxs)("h4",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"ðŸ’°"}),(0,s.jsx)("span",{children:"Transparent pricing"})]}),(0,s.jsx)("p",{className:"text-sm text-blue-800 mb-3",children:"This estimate is based on your current configuration. Your actual costs may vary based on:"}),(0,s.jsxs)("ul",{className:"space-y-1 text-sm text-blue-800",children:[(0,s.jsxs)("li",{children:["â€¢ ",(0,s.jsx)("strong",{children:"Infrastructure costs:"})," Powered by Hetzner Cloud (Germany)"]}),(0,s.jsxs)("li",{children:["â€¢ ",(0,s.jsx)("strong",{children:"Margin included:"})," Total price includes our 30% service margin for platform management"]}),(0,s.jsxs)("li",{children:["â€¢ ",(0,s.jsx)("strong",{children:"Auto-scaling:"})," Costs increase only when traffic demands more replicas"]}),(0,s.jsxs)("li",{children:["â€¢ ",(0,s.jsx)("strong",{children:"Bandwidth:"})," First 20 TB included, then â‚¬1.00/TB in EU"]}),(0,s.jsxs)("li",{children:["â€¢ ",(0,s.jsx)("strong",{children:"Storage:"})," Database and volumes billed at â‚¬0.044/GB/month"]}),(0,s.jsxs)("li",{children:["â€¢ ",(0,s.jsx)("strong",{children:"No hidden fees:"})," What you see is what you pay"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"px-6 py-3 text-slate-600 hover:text-slate-900 font-medium transition",children:"â† Back to Dashboard"}),(0,s.jsx)("button",{onClick:"deploy"===r?()=>{y&&(v(!0),p(y.id),setTimeout(()=>{e.push("/deploying?mode=deploy")},500))}:()=>{y&&(v(!0),h(y.id),setTimeout(()=>{e.push("/deploying?mode=changes")},500))},disabled:g,className:"inline-flex items-center gap-3 font-bold px-10 py-4 rounded-lg transition-all transform hover:scale-105 shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none text-lg ".concat("deploy"===r?"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white":"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 text-white"),children:g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{children:"deploy"===r?"Deploying...":"Applying..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"deploy"===r?"ðŸš€":"âš¡"}),(0,s.jsx)("span",{children:"deploy"===r?"Deploy Now":"Apply Changes"})]})})]})]})})}function n(){return(0,s.jsx)(l.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:(0,s.jsx)(r,{})})}}]);