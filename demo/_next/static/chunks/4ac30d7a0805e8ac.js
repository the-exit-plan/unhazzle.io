(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78928,e=>{"use strict";e.s(["default",()=>D],78928);var s=e.i(43476),t=e.i(71645),a=e.i(18566),l=e.i(23312),r=e.i(23876);function n(e){let{project:a,selected:l,onSelect:r}=e,[n,i]=(0,t.useState)(null);(0,t.useEffect)(()=>{"environment"===l.kind&&l.envId&&i(l.envId)},[l]);let[,d]=(0,t.useState)(0);(0,t.useEffect)(()=>{let e=setInterval(()=>{d(e=>e+1)},6e4);return()=>clearInterval(e)},[]);let c=e=>(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 bg-green-600 rounded-full"}),"Live"]}),o=a.environments.filter(e=>"standard"===e.type||"non-prod"===e.type||"prod"===e.type),x=a.environments.filter(e=>"pr"===e.type);return(0,s.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl p-4 space-y-4 sticky top-4 border border-slate-200",children:[(0,s.jsxs)("button",{onClick:()=>r({kind:"project-settings"}),className:"w-full bg-white rounded-lg p-4 shadow-sm border border-slate-200 hover:bg-slate-50 transition text-left ".concat("project-settings"===l.kind?"ring-2 ring-purple-500":""),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"ðŸ“¦"}),(0,s.jsx)("h3",{className:"font-bold text-slate-900 text-lg",children:a.name}),(0,s.jsx)("span",{className:"ml-auto",children:(0,s.jsxs)("svg",{className:"w-4 h-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),(0,s.jsxs)("div",{className:"text-xs text-slate-600 space-y-1",children:[(0,s.jsxs)("div",{children:[a.environments.length," environment",1!==a.environments.length?"s":""]}),x.length>0&&(0,s.jsxs)("div",{className:"text-blue-600 font-medium",children:[x.length,"/",a.prEnvs.maxEnvs," PR environments"]})]})]}),o.map(e=>{var t,a;let d=e.applications||[],o=!!e.database,x="environment"===l.kind&&l.envId===e.id,m=n===e.id;return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>{m?i(null):i(e.id),r({kind:"environment",envId:e.id})},className:"w-full bg-gradient-to-r from-purple-50 to-blue-50 px-4 py-3 hover:from-purple-100 hover:to-blue-100 transition text-left ".concat(x?"ring-2 ring-purple-500 ring-inset":""," ").concat(m?"border-b border-slate-200":"border-b-0"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-slate-500 transition-transform ".concat(m?"rotate-90":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,s.jsx)("span",{className:"text-lg",children:"ðŸ”§"}),(0,s.jsx)("span",{className:"font-bold text-slate-900",children:e.name}),"prod"===e.type&&(0,s.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-orange-100 text-orange-700 text-xs rounded font-medium",children:"PROD"}),"non-prod"===e.type&&(0,s.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded font-medium",children:"DEV"})]}),c(e)]}),(0,s.jsx)("div",{className:"text-xs text-slate-600 ml-6",children:e.baseDomain})]}),m&&(0,s.jsxs)("div",{className:"p-3 space-y-3 border-t border-slate-200",children:[d.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-xs font-semibold text-slate-600 mb-2 flex items-center gap-1",children:[(0,s.jsx)("span",{children:"ðŸš€"}),(0,s.jsxs)("span",{children:["Applications (",d.length,")"]})]}),(0,s.jsx)("div",{className:"space-y-1",children:d.map((t,a)=>{var n;let i=t.name||(null==(n=t.imageUrl.split("/").pop())?void 0:n.split(":")[0])||"app-".concat(a+1),d="application"===l.kind&&l.id===t.id;return(0,s.jsxs)("button",{onClick:()=>r({kind:"application",id:t.id,envId:e.id}),className:"w-full text-left px-3 py-2 rounded-lg border transition ".concat(d?"border-purple-400 bg-purple-50 shadow-sm":"border-slate-200 hover:border-purple-300 hover:bg-slate-50"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-900 truncate",children:i}),"paused"===t.status&&(0,s.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 bg-amber-100 text-amber-700 rounded-full font-medium",children:"Paused"})]}),"public"===t.exposure&&(0,s.jsx)("div",{className:"text-xs text-slate-500",children:"Public"})]},t.id)})})]}),o&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-xs font-semibold text-slate-600 mb-2 flex items-center gap-1",children:[(0,s.jsx)("span",{children:"ðŸ’¾"}),(0,s.jsx)("span",{children:"Database"})]}),(0,s.jsx)("button",{onClick:()=>r({kind:"database",envId:e.id}),className:"w-full text-left px-3 py-2 rounded-lg border transition ".concat("database"===l.kind&&l.envId===e.id?"border-green-400 bg-green-50 shadow-sm":"border-slate-200 hover:border-green-300 hover:bg-slate-50"),children:(0,s.jsx)("div",{className:"text-sm font-medium text-slate-900",children:(null==(t=e.database)?void 0:t.engine)==="postgres"?"PostgreSQL":null==(a=e.database)?void 0:a.engine})})]}),(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-slate-200",children:(0,s.jsxs)("button",{onClick:()=>r({kind:"add-application",envId:e.id}),className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-300 hover:border-blue-400 hover:bg-blue-50 bg-white transition text-xs font-medium text-slate-700 hover:text-blue-700",children:[(0,s.jsx)("span",{className:"text-sm",children:"ðŸ“¦"}),(0,s.jsx)("span",{children:"Add Application"})]})})]})]},e.id)}),x.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"text-xs font-semibold text-slate-600 px-2 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"âš¡"}),(0,s.jsx)("span",{children:"PR Environments"})]}),x.map(e=>{let t="environment"===l.kind&&l.envId===e.id,a=n===e.id,d=(e=>{if(!e)return"";let s=new Date().getTime(),t=new Date(e).getTime()-s;if(t<=0)return"Expired";let a=Math.floor(t/36e5),l=Math.floor(t%36e5/6e4);return a>0?"".concat(a,"h ").concat(l,"m"):"".concat(l,"m")})(e.expiresAt);return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>{a?i(null):i(e.id),r({kind:"environment",envId:e.id})},className:"w-full text-left p-3 hover:bg-blue-50 transition ".concat(t?"ring-2 ring-blue-500 ring-inset bg-blue-50":""),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-slate-500 transition-transform flex-shrink-0 ".concat(a?"rotate-90":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,s.jsx)("span",{className:"text-sm font-medium text-slate-900 truncate",children:e.name})]}),(e=>{if("pr"===e.type){var t;return(0,s.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded font-medium",children:["PR #",(null==(t=e.prSource)?void 0:t.prNumber)||"?"]})}return null})(e)]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs ml-6",children:[c(e),e.expiresAt&&(0,s.jsxs)("span",{className:"text-slate-600",children:["â±ï¸ ",d]})]}),e.prSource&&!a&&(0,s.jsxs)("div",{className:"text-xs text-slate-600 mt-2 truncate ml-6",children:[e.prSource.repository," â€¢ ",e.prSource.branchName]})]}),a&&e.prSource&&(0,s.jsxs)("div",{className:"px-3 pb-3 space-y-2 border-t border-slate-200 pt-2",children:[(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsx)("div",{className:"text-slate-600",children:"Repository"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:e.prSource.repository})]}),(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsx)("div",{className:"text-slate-600",children:"Branch"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:e.prSource.branchName})]}),(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsx)("div",{className:"text-slate-600",children:"PR Title"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:e.prSource.prTitle})]})]})]},e.id)})]}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-200",children:(0,s.jsxs)("button",{onClick:()=>r({kind:"create-environment"}),className:"w-full flex items-center gap-2 px-4 py-2.5 rounded-lg border border-slate-300 hover:border-purple-400 hover:bg-purple-50 bg-white transition text-sm font-medium text-slate-700 hover:text-purple-700",children:[(0,s.jsx)("span",{className:"text-base",children:"ðŸŒ"}),(0,s.jsx)("span",{children:"Create Environment"})]})}),(0,s.jsx)("button",{onClick:()=>r({kind:"architecture"}),className:"w-full text-left px-4 py-3 rounded-lg border transition mt-4 ".concat("architecture"===l.kind?"border-purple-400 bg-purple-50 shadow-sm":"border-slate-200 hover:border-purple-300 hover:bg-slate-50 bg-white"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[(0,s.jsx)("span",{className:"text-xl",children:"ðŸ—ï¸"}),(0,s.jsx)("span",{children:"Architecture Diagram"})]})})]})}function i(e){var l;let{environment:n,onClone:i,onPause:d,onResume:c,onAddApplication:o}=e,[x,m]=(0,t.useState)(!1);(0,a.useRouter)();let{current:p,max:u,breakdown:h}=(0,r.calculateEnvironmentCost)(n),b="pr"===n.type,g=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-6",children:[(0,s.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold",children:n.name}),b&&(0,s.jsxs)("span",{className:"px-3 py-1 bg-white/20 backdrop-blur-sm rounded-lg text-sm font-medium",children:["PR #",null==(l=n.prSource)?void 0:l.prNumber]})]}),(0,s.jsxs)("div",{className:"text-purple-100 text-sm space-y-1",children:[(0,s.jsx)("div",{children:n.baseDomain}),n.publicApplications.length>0&&(0,s.jsxs)("div",{children:[n.publicApplications.length," public application",1!==n.publicApplications.length?"s":""]})]})]})}),(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-purple-100 text-sm mb-1",children:"Estimated Cost"}),(0,s.jsxs)("div",{className:"text-3xl font-bold",children:["â‚¬",b?"0.08":p.toFixed(2),!b&&(0,s.jsxs)("span",{className:"text-lg font-normal text-purple-200 ml-2",children:["(Max: â‚¬",u.toFixed(2),")"]}),(0,s.jsxs)("span",{className:"text-lg font-normal text-purple-100 ml-2",children:["/",b?"2 hours":"month"]})]})]}),b&&n.expiresAt&&(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-purple-100 text-sm mb-1",children:"Expires In"}),(0,s.jsx)("div",{className:"text-2xl font-bold",children:(()=>{if(!n.expiresAt)return null;let e=new Date().getTime(),s=new Date(n.expiresAt).getTime()-e;if(s<=0)return"Expired";let t=Math.floor(s/36e5),a=Math.floor(s%36e5/6e4);return t>0?"".concat(t,"h ").concat(a,"m"):"".concat(a,"m")})()})]})]})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[!b&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-3",children:(0,s.jsxs)("button",{onClick:o,className:"px-4 py-2 bg-purple-100 hover:bg-purple-200 text-purple-900 rounded-lg transition font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{children:"ðŸ“¦"}),(0,s.jsx)("span",{children:"Add Application"})]})}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsxs)("button",{onClick:d,className:"px-4 py-2 bg-amber-100 hover:bg-amber-200 text-amber-900 rounded-lg transition font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{children:"â¸ï¸"}),(0,s.jsx)("span",{children:"Pause All Apps"})]}),(0,s.jsxs)("button",{onClick:i,className:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-900 rounded-lg transition font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{children:"ðŸ“‹"}),(0,s.jsx)("span",{children:"Clone"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Environment Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Type"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:"prod"===n.type?"Production":"non-prod"===n.type?"Non-Production":"pr"===n.type?"Pull Request":"Standard"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Created"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:g(n.createdAt)})]}),b&&n.expiresAt&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Expires"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:g(n.expiresAt)})]})]})]}),b&&n.prSource&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Pull Request Details"}),(0,s.jsxs)("div",{className:"space-y-3 bg-blue-50 rounded-lg p-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Repository"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:n.prSource.repository})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"PR Title"}),(0,s.jsx)("div",{className:"font-medium text-slate-900",children:n.prSource.prTitle})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Branch"}),(0,s.jsx)("div",{className:"font-mono text-sm text-slate-900 bg-white px-2 py-1 rounded",children:n.prSource.branchName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Commit"}),(0,s.jsx)("div",{className:"font-mono text-sm text-slate-900 bg-white px-2 py-1 rounded",children:n.prSource.commitSha.substring(0,7)})]})]}),n.serviceOverride&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-600 mb-1",children:"Override"}),(0,s.jsxs)("div",{className:"font-medium text-slate-900",children:["Application ",(0,s.jsx)("code",{className:"bg-white px-2 py-0.5 rounded text-sm",children:n.serviceOverride.serviceName})," using custom image"]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Resources"}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"ðŸš€"}),(0,s.jsx)("span",{className:"font-medium text-slate-900",children:"Applications"})]}),(0,s.jsx)("span",{className:"text-slate-600",children:n.applications.length})]})})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"ðŸ’¡"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-blue-900 mb-1",children:"pr"!==n.type?"Manage Applications":"View Only"}),(0,s.jsx)("div",{className:"text-sm text-blue-700",children:"pr"!==n.type?"Click on an application in the sidebar to edit its configuration. Applications can be deployed independently.":"PR environments are read-only. To edit configuration, update the unhazzle.yaml manifest."})]})]})})]})]})}let d=e=>{let s=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,t)=>t?t.toUpperCase():s.toLowerCase());return s.charAt(0).toUpperCase()+s.slice(1)},c=function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter((e,s,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let x=(0,t.forwardRef)((e,s)=>{let{color:a="currentColor",size:l=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:d,iconNode:x,...m}=e;return(0,t.createElement)("svg",{ref:s,...o,width:l,height:l,stroke:a,strokeWidth:n?24*Number(r)/Number(l):r,className:c("lucide",i),...!d&&!(e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0})(m)&&{"aria-hidden":"true"},...m},[...x.map(e=>{let[s,a]=e;return(0,t.createElement)(s,a)}),...Array.isArray(d)?d:[d]])}),m=(e,s)=>{let a=(0,t.forwardRef)((a,l)=>{let{className:r,...n}=a;return(0,t.createElement)(x,{ref:l,iconNode:s,className:c("lucide-".concat(d(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),r),...n})});return a.displayName=d(e),a},p=m("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),u=m("github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),h=m("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),b=m("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);function g(e){var n,i,d,c,o,x,m,g,j,v,f,N,y,w;let{project:k,onSave:C,initialTab:S="general",onCreateEnvironment:A}=e,P=(0,a.useRouter)(),{getActiveEnvironment:R,setActiveEnvironment:E,deleteEnvironment:D}=(0,l.useDeployment)(),[T,M]=(0,t.useState)(k.name),[U,L]=(0,t.useState)(k.slug),[I,B]=(0,t.useState)(k.description||""),[z,G]=(0,t.useState)((null==(n=k.repository)?void 0:n.url)||""),[F,V]=(0,t.useState)((null==(i=k.repository)?void 0:i.branch)||"main"),[H,q]=(0,t.useState)((null==(d=k.repository)?void 0:d.configPath)||"unhazzle.yaml"),[O,W]=(0,t.useState)(null==(v=null==(c=k.repository)?void 0:c.autoDeployEnabled)||v),[_,Z]=(0,t.useState)(k.githubPAT||""),[J,Y]=(0,t.useState)(!!k.githubPAT),[Q,$]=(0,t.useState)(null!=(f=null==(o=k.prEnvironmentSettings)?void 0:o.enabled)&&f),[K,X]=(0,t.useState)(null==(N=null==(x=k.prEnvironmentSettings)?void 0:x.autoCreateOnPR)||N),[ee,es]=(0,t.useState)(null==(y=null==(m=k.prEnvironmentSettings)?void 0:m.autoDeleteOnMerge)||y),[et,ea]=(0,t.useState)(null!=(w=null==(g=k.prEnvironmentSettings)?void 0:g.expirationHours)?w:72),[el,er]=(0,t.useState)((null==(j=k.prEnvironmentSettings)?void 0:j.nameTemplate)||"pr-{number}"),[en,ei]=(0,t.useState)(S),[ed,ec]=(0,t.useState)(!1),[eo,ex]=(0,t.useState)(null);return(0,t.useEffect)(()=>{ei(S)},[S]),(0,s.jsxs)("div",{className:"h-full flex flex-col bg-white",children:[(0,s.jsxs)("div",{className:"flex-none border-b border-gray-200 px-6 py-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Project Settings"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Configure project details, repository integration, and PR environment behavior"})]}),(0,s.jsx)("div",{className:"flex-none border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex space-x-8 px-6",children:[(0,s.jsx)("button",{onClick:()=>ei("general"),className:"py-3 text-sm font-medium border-b-2 transition-colors ".concat("general"===en?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"General"}),(0,s.jsx)("button",{onClick:()=>ei("environments"),className:"py-3 text-sm font-medium border-b-2 transition-colors ".concat("environments"===en?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Environments"}),(0,s.jsx)("button",{onClick:()=>ei("repository"),className:"py-3 text-sm font-medium border-b-2 transition-colors ".concat("repository"===en?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Repository Integration"}),(0,s.jsx)("button",{onClick:()=>ei("registry"),className:"py-3 text-sm font-medium border-b-2 transition-colors ".concat("registry"===en?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Container Registry"}),(0,s.jsx)("button",{onClick:()=>ei("pr-environments"),className:"py-3 text-sm font-medium border-b-2 transition-colors ".concat("pr-environments"===en?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"PR Environments"}),(0,s.jsx)("button",{onClick:()=>ei("billing"),className:"py-3 text-sm font-medium border-b-2 transition-colors ".concat("billing"===en?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Billing"})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,s.jsxs)("div",{className:"px-6 py-6 max-w-4xl",children:["environments"===en&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Environments"}),(0,s.jsxs)("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:[(0,s.jsx)("span",{className:"text-base",children:"ðŸŒ"}),(0,s.jsx)("span",{children:"Create Environment"})]})]}),(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Est. Cost"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:k.environments.map(e=>{let{current:t}=(0,r.calculateEnvironmentCost)(e);return(0,s.jsxs)("tr",{onClick:()=>{E(e.id),P.push("/dashboard?selection=environment&env=".concat(e.id))},className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.baseDomain})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("prod"===e.type?"bg-purple-100 text-purple-800":"non-prod"===e.type?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:"prod"===e.type?"Production":"non-prod"===e.type?"Non-Prod":"Standard"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["â‚¬",t.toFixed(2),"/mo"]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsx)("button",{onClick:s=>{s.stopPropagation(),ex({id:e.id,name:e.name})},className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50 transition-colors",title:"Delete Environment",children:(0,s.jsx)(h,{className:"h-4 w-4"})})})]},e.id)})})]})})]}),eo&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Delete Environment?"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Are you sure you want to delete ",(0,s.jsx)("strong",{children:eo.name}),"? This action cannot be undone."]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,s.jsx)("button",{onClick:()=>ex(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{if(!eo)return;let e=k.environments.find(e=>e.id===eo.id);if((null==e?void 0:e.type)==="prod"&&!window.confirm("WARNING: You are about to delete a PRODUCTION environment (".concat(eo.name,"). This action cannot be undone. Are you sure?")))return void ex(null);D(eo.id),ex(null)},className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete"})]})]})}),"general"===en&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),(0,s.jsx)("input",{type:"text",value:T,onChange:e=>{M(e.target.value),ec(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"My Awesome App"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"A friendly name for your project"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Slug"}),(0,s.jsx)("input",{type:"text",value:U,onChange:e=>{L(e.target.value),ec(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"my-awesome-app"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Used in URLs and CLI commands (lowercase, hyphens only)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{value:I,onChange:e=>{B(e.target.value),ec(!0)},rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"A brief description of your project (optional)"})]}),(0,s.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Danger Zone"}),(0,s.jsx)("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-red-900",children:"Delete Project"}),(0,s.jsx)("p",{className:"text-xs text-red-700 mt-1",children:"Permanently delete this project and all its environments"})]}),(0,s.jsx)("button",{className:"px-3 py-1.5 text-sm font-medium text-red-700 border border-red-300 rounded hover:bg-red-100 transition-colors",children:"Delete"})]})})]})]}),"repository"===en&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Repository URL"}),(0,s.jsx)("input",{type:"text",value:z,onChange:e=>{G(e.target.value),ec(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://github.com/username/repo"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"GitHub repository URL"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Branch"}),(0,s.jsx)("input",{type:"text",value:F,onChange:e=>{V(e.target.value),ec(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"main"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Branch used for production deployments"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Config File Path"}),(0,s.jsx)("input",{type:"text",value:H,onChange:e=>{q(e.target.value),ec(!0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"unhazzle.yaml"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Path to your Unhazzle configuration file in the repository"})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("input",{type:"checkbox",id:"auto-deploy",checked:O,onChange:e=>{W(e.target.checked),ec(!0)},className:"mt-1 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"auto-deploy",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Enable Auto-Deploy"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically deploy when changes are pushed to tracked branches"})]})]}),(0,s.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Connection Status"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Connected to GitHub"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"Last synced: 2 hours ago"})]})})]}),"registry"===en&&(0,s.jsx)("div",{className:"space-y-6",children:J?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-6 space-y-4 text-center animate-in fade-in zoom-in duration-300",children:[(0,s.jsx)("div",{className:"h-12 w-12 bg-green-100 text-green-600 rounded-full flex items-center justify-center",children:(0,s.jsx)(p,{className:"h-6 w-6"})}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h3",{className:"font-medium text-lg",children:"Registry Connected"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground max-w-xs mx-auto text-gray-500",children:"Your project is now authenticated with GitHub. You can select private images when adding applications."})]}),(0,s.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,s.jsx)("button",{onClick:()=>Y(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Update Token"}),(0,s.jsx)("button",{className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",onClick:()=>{let e=R();e?(E(e.id),P.push("/dashboard?selection=environment&env=".concat(e.id))):P.push("/dashboard")},children:"Ready to deploy"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 border rounded-lg bg-muted/30",children:[(0,s.jsx)(u,{className:"h-8 w-8 text-muted-foreground"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h4",{className:"text-sm font-medium",children:"GitHub Container Registry"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Generate a Personal Access Token (Classic) with ",(0,s.jsx)("code",{children:"read:packages"})," scope."]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"pat-token",className:"block text-sm font-medium text-gray-700",children:"Personal Access Token"}),(0,s.jsx)("input",{id:"pat-token",type:"password",placeholder:"ghp_...",value:_,onChange:e=>{Z(e.target.value),ec(!0)},className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:()=>P.push("/dashboard"),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Skip for now"}),(0,s.jsx)("button",{onClick:()=>{if(!_.trim())return void alert("Please enter a GitHub Personal Access Token");C({githubPAT:_}),Y(!0),ec(!1)},disabled:!_.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Connect Registry"})]})]})}),"pr-environments"===en&&(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("span",{className:"text-2xl",children:"ðŸš€"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-blue-900 mb-2",children:"Coming Soon"}),(0,s.jsx)("p",{className:"text-blue-800 mb-4",children:"PR Environments are a high-priority feature for Unhazzle, but they won't be available in the initial MVP release."}),(0,s.jsx)("p",{className:"text-sm text-blue-700",children:"We're working on a seamless integration with GitHub Actions to automatically spin up ephemeral environments for every pull request. Stay tuned!"})]})]})}),"billing"===en&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl p-6 text-white shadow-lg",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-purple-100",children:"Total Project Cost"}),(0,s.jsxs)("div",{className:"text-4xl font-bold mt-1",children:["â‚¬",k.environments.reduce((e,s)=>e+(0,r.calculateEnvironmentCost)(s).current,0).toFixed(2),(0,s.jsxs)("span",{className:"text-lg font-normal text-purple-200 ml-2",children:["(Max: â‚¬",k.environments.reduce((e,s)=>e+(0,r.calculateEnvironmentCost)(s).max,0).toFixed(2),")"]}),(0,s.jsx)("span",{className:"text-lg font-normal text-purple-200 ml-2",children:"/month"})]})]}),(0,s.jsx)("div",{className:"p-3 bg-white/10 rounded-lg backdrop-blur-sm",children:(0,s.jsx)(b,{className:"h-8 w-8 text-white"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-white/10",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-purple-200",children:"Environments"}),(0,s.jsx)("div",{className:"text-xl font-semibold",children:k.environments.length})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-purple-200",children:"Applications"}),(0,s.jsx)("div",{className:"text-xl font-semibold",children:k.environments.reduce((e,s)=>e+s.applications.length,0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-purple-200",children:"Storage"}),(0,s.jsxs)("div",{className:"text-xl font-semibold",children:[k.environments.reduce((e,s)=>e+s.applications.reduce((e,s)=>{var t;return e+((null==(t=s.volume)?void 0:t.sizeGB)||0)},0),0)," GB"]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Cost Breakdown by Environment"}),(0,s.jsx)("div",{className:"bg-white border border-slate-200 rounded-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,s.jsx)("thead",{className:"bg-slate-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Environment"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Resources"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Monthly Cost"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:k.environments.map(e=>{var t,a;let{current:l,breakdown:n}=(0,r.calculateEnvironmentCost)(e);return(0,s.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors",children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-900",children:e.name}),(0,s.jsx)("div",{className:"text-xs text-slate-500",children:e.baseDomain})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("prod"===e.type?"bg-purple-100 text-purple-800":"non-prod"===e.type?"bg-blue-100 text-blue-800":"bg-slate-100 text-slate-800"),children:"prod"===e.type?"Production":"non-prod"===e.type?"Non-Prod":"Standard"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)("span",{children:[e.applications.length," Apps (â‚¬",n.applications.reduce((e,s)=>e+s.current,0).toFixed(2),")"]}),e.database&&(0,s.jsxs)("span",{children:["Database (â‚¬",null==(t=n.database)?void 0:t.toFixed(2),")"]}),e.cache&&(0,s.jsxs)("span",{children:["Cache (â‚¬",null==(a=n.cache)?void 0:a.toFixed(2),")"]})]})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-bold text-slate-900",children:[(0,s.jsxs)("div",{children:["â‚¬",l.toFixed(2)]}),(0,s.jsxs)("div",{className:"text-xs text-slate-500 font-normal",children:["Max: â‚¬",(0,r.calculateEnvironmentCost)(e).max.toFixed(2)]})]})]},e.id)})}),(0,s.jsx)("tfoot",{className:"bg-slate-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{colSpan:3,className:"px-6 py-4 text-right text-sm font-medium text-slate-900",children:"Total Monthly Estimate"}),(0,s.jsxs)("td",{className:"px-6 py-4 text-right text-sm font-bold text-purple-600",children:[(0,s.jsxs)("div",{children:["â‚¬",k.environments.reduce((e,s)=>e+(0,r.calculateEnvironmentCost)(s).current,0).toFixed(2)]}),(0,s.jsxs)("div",{className:"text-xs text-purple-400 font-normal",children:["Max: â‚¬",k.environments.reduce((e,s)=>e+(0,r.calculateEnvironmentCost)(s).max,0).toFixed(2)]})]})]})})]})})]}),(0,s.jsxs)("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-sm font-bold text-slate-900 mb-2",children:"Billing Information"}),(0,s.jsx)("p",{className:"text-sm text-slate-600 mb-4",children:"Unhazzle uses a transparent pricing model based on your resource usage. Costs are estimated based on current configuration and may vary with usage."}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[(0,s.jsx)("span",{children:"ðŸ’³"}),(0,s.jsxs)("span",{children:["Payment method: ",(0,s.jsx)("span",{className:"font-medium text-slate-900",children:"Visa ending in 4242"})]}),(0,s.jsx)("button",{className:"ml-2 text-blue-600 hover:text-blue-700 font-medium",children:"Update"})]})]})]})]})})]})}function j(e){let{sourceEnvironment:a,onClose:l,onConfirm:r}=e,[n,i]=(0,t.useState)("".concat(a.name,"-copy")),[d,c]=(0,t.useState)(!1),[o,x]=(0,t.useState)(!1);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-200",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Clone Environment"}),(0,s.jsx)("p",{className:"text-slate-600 mt-1",children:"Create a copy of this environment's configuration"})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-2",children:"Source Environment"}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900",children:a.name}),(0,s.jsx)("div",{className:"text-sm text-slate-600 mt-1",children:a.baseDomain})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"New Environment Name"}),(0,s.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"staging",autoFocus:!0}),(0,s.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Lowercase letters, numbers, and hyphens only. 3-63 characters."})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("input",{type:"checkbox",id:"autoDeploy",checked:d,onChange:e=>c(e.target.checked),className:"mt-1 h-4 w-4 text-purple-600 border-slate-300 rounded focus:ring-purple-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"autoDeploy",className:"text-sm font-medium text-slate-900 block",children:"Auto-deploy after cloning"}),(0,s.jsx)("p",{className:"text-xs text-slate-600 mt-1",children:"If checked, the new environment will be deployed immediately. Otherwise, it will be created in a 'provisioning' state waiting for deployment."})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-3",children:"What will be cloned:"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[(0,s.jsx)("span",{className:"text-green-600",children:"âœ“"}),(0,s.jsxs)("span",{children:[a.applications.length," application",1!==a.applications.length?"s":""," (configuration only)"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[(0,s.jsx)("span",{className:"text-green-600",children:"âœ“"}),(0,s.jsx)("span",{children:"Environment variables"})]})]})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"â„¹ï¸"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-blue-900",children:[(0,s.jsx)("strong",{children:"Note:"})," Only configuration is cloned. Runtime data, logs, and metrics are not copied."]})]})}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-4 border border-purple-200",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-1",children:"Estimated Monthly Cost"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-slate-900",children:["â‚¬169",(0,s.jsx)("span",{className:"text-lg font-normal text-slate-600",children:"/month"})]})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:l,disabled:o,className:"px-6 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{n.trim()&&(x(!0),setTimeout(()=>{r(n.trim(),d),x(!1)},1e3))},disabled:o||!n.trim(),className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"âš™ï¸"}),(0,s.jsx)("span",{children:"Cloning..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"ðŸ“‹"}),(0,s.jsx)("span",{children:"Clone Environment"})]})})]})]})})}function v(e){let{environment:a,onClose:l,onConfirm:r}=e,[n,i]=(0,t.useState)(!1),[d,c]=(0,t.useState)(""),[o,x]=(0,t.useState)(!1);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-6 border-b border-slate-200",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-3xl",children:"â¸ï¸"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Pause Environment"}),(0,s.jsxs)("p",{className:"text-slate-600 mt-1",children:['Temporarily stop "',a.name,'" to save costs']})]})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-3",children:"When paused, this environment will:"}),(0,s.jsxs)("div",{className:"space-y-2 bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,s.jsxs)("div",{className:"flex items-start gap-2 text-sm text-blue-900",children:[(0,s.jsx)("span",{className:"text-lg",children:"ðŸ“¦"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Applications:"})," Scale all replicas to 0 (no running instances)"]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2 text-sm text-blue-900",children:[(0,s.jsx)("span",{className:"text-lg",children:"ðŸŒ"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Domain:"})," Will return 503 Service Unavailable"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("input",{type:"checkbox",id:"useSchedule",checked:o,onChange:e=>x(e.target.checked),className:"h-4 w-4 text-purple-600 border-slate-300 rounded focus:ring-purple-500"}),(0,s.jsx)("label",{htmlFor:"useSchedule",className:"text-sm font-medium text-slate-900",children:"Set Pause Schedule (Cron)"})]}),o&&(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"0 18 * * 1-5",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm"}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Example: ",(0,s.jsx)("code",{children:"0 18 * * 1-5"})," (Every weekday at 6 PM)"]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-6 border-2 border-green-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-green-900",children:"Estimated Monthly Savings"}),(0,s.jsx)("span",{className:"text-4xl",children:"ðŸ’°"})]}),(0,s.jsxs)("div",{className:"text-4xl font-bold text-green-900",children:["â‚¬",169,(0,s.jsx)("span",{className:"text-lg font-normal text-green-700 ml-2",children:"/month"})]}),(0,s.jsxs)("div",{className:"text-sm text-green-700 mt-2",children:["Pay only for persistent storage (~â‚¬","8.45","/month)"]})]}),(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"ðŸ’¡"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-yellow-900 mb-1",children:"Good to know:"}),(0,s.jsxs)("ul",{className:"text-sm text-yellow-800 space-y-1 list-disc list-inside",children:[(0,s.jsx)("li",{children:"Configuration is preserved - you can resume anytime"}),(0,s.jsx)("li",{children:"Application data in volumes is safe in persistent storage"}),(0,s.jsx)("li",{children:"Environment URLs will be unavailable until resumed"}),(0,s.jsx)("li",{children:"Resume takes ~30 seconds to restore services"})]})]})]})})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:l,disabled:n,className:"px-6 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{i(!0),setTimeout(()=>{r(o?d:void 0),i(!1)},1e3)},disabled:n,className:"px-6 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"âš™ï¸"}),(0,s.jsx)("span",{children:"Pausing..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"â¸ï¸"}),(0,s.jsx)("span",{children:"Pause Environment"})]})})]})]})})}function f(e){let{environment:a,onClose:l,onConfirm:r}=e,[n,i]=(0,t.useState)(!1);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-6 border-b border-slate-200",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-3xl",children:"â–¶ï¸"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Resume Environment"}),(0,s.jsxs)("p",{className:"text-slate-600 mt-1",children:['Restore "',a.name,'" to active state']})]})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-3",children:"Resuming will:"}),(0,s.jsxs)("div",{className:"space-y-2 bg-green-50 rounded-lg p-4 border border-green-200",children:[(0,s.jsxs)("div",{className:"flex items-start gap-2 text-sm text-green-900",children:[(0,s.jsx)("span",{className:"text-lg",children:"ðŸ“¦"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Applications:"})," Scale replicas back to configured values"]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2 text-sm text-green-900",children:[(0,s.jsx)("span",{className:"text-lg",children:"ðŸŒ"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Domain:"})," Will be accessible after ~30 seconds"]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-3",children:"Resume Timeline:"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-bold text-sm",children:"1"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-slate-700",children:[(0,s.jsx)("strong",{children:"0-10s:"})," Provisioning infrastructure"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-bold text-sm",children:"2"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-slate-700",children:[(0,s.jsx)("strong",{children:"10-20s:"})," Preparing application services"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-bold text-sm",children:"3"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-slate-700",children:[(0,s.jsx)("strong",{children:"20-30s:"})," Deploying applications"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-green-600 font-bold text-sm",children:"âœ“"}),(0,s.jsx)("div",{className:"flex-1 text-sm font-medium text-green-700",children:"Environment ready!"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 rounded-lg p-4 border border-slate-200",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-slate-700 mb-1",children:"Cost Impact"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-slate-900",children:["â‚¬169",(0,s.jsx)("span",{className:"text-lg font-normal text-slate-600",children:"/month"})]}),(0,s.jsx)("div",{className:"text-sm text-slate-600 mt-1",children:"Billing resumes immediately upon starting services"})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:l,disabled:n,className:"px-6 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{i(!0),setTimeout(()=>{r(),i(!1)},1e3)},disabled:n,className:"px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"âš™ï¸"}),(0,s.jsx)("span",{children:"Resuming..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"â–¶ï¸"}),(0,s.jsx)("span",{children:"Resume Environment"})]})})]})]})})}function N(e){let{onClose:a,onConfirm:l}=e,[r,n]=(0,t.useState)(""),[i,d]=(0,t.useState)("non-prod"),[c,o]=(0,t.useState)(!1),x=r.length>=3&&r.length<=63&&/^[a-z0-9]([a-z0-9-]{1,61}[a-z0-9])$/.test(r);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-200",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Create Environment"}),(0,s.jsx)("p",{className:"text-slate-600 mt-1",children:"Add a new environment to your project"})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Environment Name *"}),(0,s.jsx)("input",{type:"text",value:r,onChange:e=>n(e.target.value.toLowerCase()),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"staging",autoFocus:!0}),r&&!x&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"3-63 characters, lowercase alphanumeric + hyphens, start/end with alphanumeric"}),(0,s.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Lowercase letters, numbers, and hyphens only."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Environment Type *"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{onClick:()=>d("non-prod"),className:"p-4 border-2 rounded-lg transition text-left ".concat("non-prod"===i?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Non-Production"}),(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"Development, testing, staging"})]}),(0,s.jsxs)("button",{onClick:()=>d("prod"),className:"p-4 border-2 rounded-lg transition text-left ".concat("prod"===i?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Production"}),(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"Live, customer-facing"})]})]})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:a,disabled:c,className:"px-6 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{x&&(o(!0),setTimeout(()=>{l(r,i),o(!1)},1e3))},disabled:c||!x,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"âš™ï¸"}),(0,s.jsx)("span",{children:"Creating..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"âœ¨"}),(0,s.jsx)("span",{children:"Create Environment"})]})})]})]})})}function y(e){let{onClose:l,onAdd:r,availableImages:n=[],githubPAT:i}=e,d=(0,a.useRouter)(),[c,o]=(0,t.useState)(""),[x,m]=(0,t.useState)(""),[p,u]=(0,t.useState)(i?"github":"public"),[h,b]=(0,t.useState)({}),g=e=>e?e.length<3||e.length>63?"Name must be 3-63 characters":/^[a-z0-9]([a-z0-9-]{1,61}[a-z0-9])?$/.test(e)?void 0:"Name must be lowercase alphanumeric with hyphens, start and end with alphanumeric":"Application name is required",j=e=>e?/^[a-z0-9\.\-\/]+:[a-z0-9\.\-]+$/i.test(e)?void 0:"Image URL must be in format: registry/image:tag or image:tag":"Image URL is required";return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-6 rounded-t-xl",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-1",children:"Add Application"}),(0,s.jsx)("p",{className:"text-purple-100 text-sm",children:"Deploy a new application from any image"})]}),(0,s.jsx)("button",{onClick:l,className:"text-white hover:bg-white/20 rounded-lg p-2 transition",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-900 mb-3",children:"Image Source"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("button",{onClick:()=>u("public"),className:"p-4 border-2 rounded-lg transition text-left ".concat("public"===p?"border-purple-600 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Public Registry"}),(0,s.jsx)("div",{className:"text-xs text-slate-600",children:"Docker Hub, Quay.io, etc."})]}),(0,s.jsxs)("button",{onClick:()=>u("github"),className:"p-4 border-2 rounded-lg transition text-left ".concat("github"===p?"border-purple-600 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Private GitHub"}),(0,s.jsx)("div",{className:"text-xs text-slate-600",children:"ghcr.io (Requires PAT)"})]})]})]}),"github"!==p||i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Image URL"}),"github"===p?(0,s.jsxs)("select",{value:x,onChange:e=>{let s=e.target.value;m(s),b(e=>({...e,imageUrl:void 0}));let t=n.find(e=>"ghcr.io/".concat(e.name,":").concat(e.tag)===s);if(t){var a;let e=(null==(a=t.name.split("/").pop())?void 0:a.split(":")[0].toLowerCase().replace(/[^a-z0-9-]/g,"-"))||"";e&&(o(e),b(e=>({...e,name:void 0})))}},className:"w-full px-4 py-3 border rounded-lg font-mono text-sm focus:ring-2 focus:ring-purple-600 focus:border-transparent ".concat(h.imageUrl?"border-red-300":"border-slate-300"),children:[(0,s.jsx)("option",{value:"",children:"Select an image..."}),n.map((e,t)=>(0,s.jsxs)("option",{value:"ghcr.io/".concat(e.name,":").concat(e.tag),children:[e.name,":",e.tag]},t))]}):(0,s.jsx)("input",{type:"text",value:x,onChange:e=>(e=>{m(e);let s=j(e);if(b(e=>({...e,imageUrl:s})),!c&&n.length>0){let s=n.find(s=>"ghcr.io/".concat(s.name,":").concat(s.tag)===e||"".concat(s.name,":").concat(s.tag)===e);if(s){var t;let e=(null==(t=s.name.split("/").pop())?void 0:t.split(":")[0].toLowerCase().replace(/[^a-z0-9-]/g,"-"))||"";e&&(o(e),b(e=>({...e,name:void 0})))}}})(e.target.value),placeholder:"nginx:alpine",className:"w-full px-4 py-3 border rounded-lg font-mono text-sm focus:ring-2 focus:ring-purple-600 focus:border-transparent ".concat(h.imageUrl?"border-red-300":"border-slate-300")}),h.imageUrl&&(0,s.jsx)("p",{className:"mt-2 text-sm text-red-600",children:h.imageUrl})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Application Name"}),(0,s.jsx)("input",{type:"text",value:c,onChange:e=>(e=>{o(e);let s=g(e);b(e=>({...e,name:s}))})(e.target.value),placeholder:"my-api-service",className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent ".concat(h.name?"border-red-300":"border-slate-300")}),h.name&&(0,s.jsx)("p",{className:"mt-2 text-sm text-red-600",children:h.name}),(0,s.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:"3-63 characters, lowercase alphanumeric with hyphens"})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"ðŸ’¡"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-blue-900 mb-1 text-sm",children:"Smart Defaults"}),(0,s.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[(0,s.jsx)("div",{children:"â€¢ Resources: 1 vCPU, 2GB RAM, 2-10 replicas"}),(0,s.jsx)("div",{children:"â€¢ Health check: HTTP on port 3000"}),(0,s.jsx)("div",{children:"â€¢ Applications are private by default (change later)"}),(0,s.jsx)("div",{children:"â€¢ Private applications accessible via internal DNS"})]})]})]})})]}):(0,s.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"text-2xl",children:"ðŸ”’"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold text-amber-900 mb-2",children:"Registry Not Connected"}),(0,s.jsx)("p",{className:"text-sm text-amber-800 mb-4",children:"You need to connect your GitHub Container Registry to access private images. You can either connect your registry or use a public image instead."}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>u("public"),className:"px-4 py-2 bg-white text-amber-900 border border-amber-300 rounded-lg text-sm font-medium hover:bg-amber-50 transition",children:"Use Public Image"}),(0,s.jsx)("button",{onClick:()=>{d.push("/dashboard?selection=project-settings&tab=registry"),l()},className:"px-4 py-2 bg-amber-600 text-white rounded-lg text-sm font-medium hover:bg-amber-700 transition",children:"Connect Registry"})]})]})]})})]}),(0,s.jsxs)("div",{className:"border-t border-slate-200 p-6 flex items-center justify-between bg-slate-50 rounded-b-xl",children:[(0,s.jsx)("button",{onClick:l,className:"px-6 py-2 text-slate-600 hover:text-slate-900 font-medium transition",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{let e=g(c),s=j(x);if(e||s)return void b({name:e,imageUrl:s});r({name:c,imageUrl:x,exposure:"private"}),l()},disabled:!!h.name||!!h.imageUrl||!c||!x||"github"===p&&!i,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Application"})]})]})})}function w(e){let{applicationName:t,onClose:a,onConfirm:l}=e;return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white p-6 rounded-t-xl",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"text-3xl",children:"ðŸ—‘ï¸"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-1",children:"Remove Application"}),(0,s.jsx)("p",{className:"text-red-100 text-sm",children:"This action cannot be undone"})]})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,s.jsxs)("p",{className:"text-slate-900",children:["Are you sure you want to remove the application ",(0,s.jsxs)("span",{className:"font-semibold text-red-700",children:['"',t,'"']}),"?"]})}),(0,s.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"âš ï¸"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-amber-900 mb-1 text-sm",children:"Warning"}),(0,s.jsxs)("div",{className:"text-xs text-amber-700 space-y-1",children:[(0,s.jsx)("div",{children:"â€¢ All application configurations will be lost"}),(0,s.jsx)("div",{children:"â€¢ Environment variables will be removed"}),(0,s.jsx)("div",{children:"â€¢ This change takes effect immediately in demo mode"})]})]})]})})]}),(0,s.jsxs)("div",{className:"border-t border-slate-200 p-6 flex items-center justify-between bg-slate-50 rounded-b-xl",children:[(0,s.jsx)("button",{onClick:a,className:"px-6 py-2 text-slate-600 hover:text-slate-900 font-medium transition",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{l(),a()},className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg font-semibold transition shadow-lg",children:"Remove Application"})]})]})})}function k(e){var a;let{application:l,availableTargets:r,onClose:n,onConfirm:i}=e,[d,c]=(0,t.useState)((null==(a=r[0])?void 0:a.id)||""),[o,x]=(0,t.useState)(!1);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-200",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Promote Application"}),(0,s.jsxs)("p",{className:"text-slate-600 mt-1",children:["Promote ",(0,s.jsx)("span",{className:"font-semibold",children:l.name})," to another environment."]})]}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Target Environment"}),0===r.length?(0,s.jsx)("div",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded-lg",children:"No other environments available. Create a new environment first."}):(0,s.jsx)("select",{value:d,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:r.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (",e.type,")"]},e.id))})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"â„¹ï¸"}),(0,s.jsx)("div",{className:"flex-1 text-sm text-blue-900",children:"This will copy the application configuration (image, resources, env vars) to the target environment."})]})})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:n,disabled:o,className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{d&&(x(!0),setTimeout(()=>{i(d),x(!1)},1e3))},disabled:o||!d,className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"âš™ï¸"}),(0,s.jsx)("span",{children:"Promoting..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"ðŸš€"}),(0,s.jsx)("span",{children:"Promote"})]})})]})]})})}function C(e){let{applicationName:a,onClose:l,onConfirm:r}=e,[n,i]=(0,t.useState)(!1),[d,c]=(0,t.useState)(""),[o,x]=(0,t.useState)(!1);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[(0,s.jsx)("div",{className:"p-6 border-b border-slate-200",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-3xl",children:"â¸ï¸"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Pause Application"}),(0,s.jsxs)("p",{className:"text-slate-600 mt-1",children:["Stop ",(0,s.jsx)("span",{className:"font-semibold",children:a})," to save resources."]})]})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsx)("div",{className:"text-sm text-blue-900",children:"This will scale the application to 0 replicas. It will not be accessible until resumed."})}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("input",{type:"checkbox",id:"useScheduleApp",checked:o,onChange:e=>x(e.target.checked),className:"h-4 w-4 text-purple-600 border-slate-300 rounded focus:ring-purple-500"}),(0,s.jsx)("label",{htmlFor:"useScheduleApp",className:"text-sm font-medium text-slate-900",children:"Set Pause Schedule (Cron)"})]}),o&&(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"0 18 * * 1-5",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm"}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Example: ",(0,s.jsx)("code",{children:"0 18 * * 1-5"})," (Every weekday at 6 PM)"]})]})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:l,disabled:n,className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition font-medium text-slate-700 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{i(!0),setTimeout(()=>{r(o?d:void 0),i(!1)},1e3)},disabled:n,className:"px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 transition font-semibold disabled:opacity-50 flex items-center gap-2",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"âš™ï¸"}),(0,s.jsx)("span",{children:"Pausing..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"â¸ï¸"}),(0,s.jsx)("span",{children:"Pause"})]})})]})]})})}function S(e){var t,a;let{state:l}=e,r=(null==(t=l.project)?void 0:t.environments.find(e=>e.id===l.activeEnvironmentId))||(null==(a=l.project)?void 0:a.environments[0]);return r?(0,s.jsx)("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-8 overflow-x-auto",children:(0,s.jsxs)("div",{className:"min-w-[600px] flex flex-col items-center gap-8",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:"â˜ï¸"}),(0,s.jsx)("div",{className:"text-sm font-bold text-slate-600",children:"Internet"}),(0,s.jsx)("div",{className:"h-8 w-0.5 bg-slate-300 my-2"})]}),(0,s.jsxs)("div",{className:"bg-white border-2 border-blue-200 rounded-lg p-4 shadow-sm w-64 text-center relative",children:[(0,s.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded-full font-medium",children:"Load Balancer"}),(0,s.jsx)("div",{className:"text-2xl mb-1",children:"âš–ï¸"}),(0,s.jsx)("div",{className:"font-mono text-xs text-slate-500 truncate",children:r.baseDomain})]}),(0,s.jsx)("div",{className:"h-8 w-0.5 bg-slate-300"}),(0,s.jsx)("div",{className:"flex gap-6 justify-center flex-wrap",children:r.applications.map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)("div",{className:"bg-white border-2 ".concat("public"===e.exposure?"border-purple-200":"border-slate-200"," rounded-lg p-4 shadow-sm w-48 text-center relative"),children:[(0,s.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 ".concat("public"===e.exposure?"bg-purple-100 text-purple-800":"bg-slate-100 text-slate-800"," text-xs px-2 py-0.5 rounded-full font-medium"),children:"public"===e.exposure?"Public App":"Private App"}),(0,s.jsx)("div",{className:"text-2xl mb-1",children:"ðŸš€"}),(0,s.jsx)("div",{className:"font-bold text-slate-900 text-sm truncate",children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[e.resources.replicas.min," replicas"]})]}),(e.serviceAccess.database||e.serviceAccess.cache)&&(0,s.jsx)("div",{className:"h-8 w-0.5 bg-slate-300 my-2"})]},e.id))}),(r.database||r.cache)&&(0,s.jsxs)("div",{className:"flex gap-6 justify-center border-t-2 border-dashed border-slate-300 pt-8 w-full",children:[r.database&&(0,s.jsxs)("div",{className:"bg-white border-2 border-green-200 rounded-lg p-4 shadow-sm w-48 text-center relative",children:[(0,s.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded-full font-medium",children:"Database"}),(0,s.jsx)("div",{className:"text-2xl mb-1",children:"ðŸ˜"}),(0,s.jsx)("div",{className:"font-bold text-slate-900 text-sm",children:"PostgreSQL"})]}),r.cache&&(0,s.jsxs)("div",{className:"bg-white border-2 border-red-200 rounded-lg p-4 shadow-sm w-48 text-center relative",children:[(0,s.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-red-100 text-red-800 text-xs px-2 py-0.5 rounded-full font-medium",children:"Cache"}),(0,s.jsx)("div",{className:"text-2xl mb-1",children:"âš¡"}),(0,s.jsx)("div",{className:"font-bold text-slate-900 text-sm",children:"Redis"})]})]})]})}):(0,s.jsx)("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-12 text-center",children:(0,s.jsx)("p",{className:"text-slate-500",children:"No environment selected to visualize."})})}function A(e){let{application:a,environmentId:r,onComplete:n}=e,{state:i,updateApplicationStatus:d}=(0,l.useDeployment)(),[c,o]=(0,t.useState)([]),[x,m]=(0,t.useState)(!0),[p,u]=(0,t.useState)(0),[h,b]=(0,t.useState)(!1),g=(0,t.useRef)(!1),j=(0,t.useRef)([]);if((0,t.useEffect)(()=>{0===c.length&&o(((e,s)=>{var t,a;let l=[];return l.push({id:"validate",label:"Validating configuration",description:"Checking application settings",duration:2,status:"pending",logs:[]}),l.push({id:"image",label:"Pulling container image",description:"Fetching from registry",duration:5,status:"pending",logs:[]}),e.serviceAccess.database&&(null==(t=s.resources)?void 0:t.database)&&l.push({id:"database",label:"Connecting to database",description:"Injecting database credentials",duration:2,status:"pending",logs:[]}),e.serviceAccess.cache&&(null==(a=s.resources)?void 0:a.cache)&&l.push({id:"cache",label:"Connecting to cache",description:"Injecting cache credentials",duration:2,status:"pending",logs:[]}),l.push({id:"deploy",label:"Starting replicas",description:"Launching ".concat(e.resources.replicas.min," instance(s)"),duration:6,status:"pending",logs:[]}),l.push({id:"health",label:"Running health checks",description:"Verifying application is responding",duration:4,status:"pending",logs:[]}),l.push({id:"complete",label:"Deployment complete",description:"Application is live!",duration:1,status:"pending",logs:[]}),l})(a,i))},[a,i,c.length]),(0,t.useEffect)(()=>{if(g.current||0===c.length||"deploying"!==a.status)return;g.current=!0;let e=[...c],s=t=>{if(t>=e.length){d(a.id,"running"),b(!0);return}let l=e[t];u(t),o(e=>e.map((e,s)=>s===t?{...e,status:"running"}:e));let r=((e,s,t)=>{var a,l;let r=(null==(a=s.imageUrl.split("/").pop())?void 0:a.split(":")[0])||"application";switch(e){case"validate":return["âœ“ Configuration validated","âœ“ Resource quotas checked","âœ“ ".concat(s.resources.replicas.min," replica(s) requested")];case"image":return["â†’ Authenticating with registry","â†’ Pulling image: ".concat(s.imageUrl),"â†’ Extracting layers","â†’ Verifying image signature","âœ“ Image ready"];case"database":return["â†’ Retrieving database credentials","â†’ Injecting DATABASE_URL","âœ“ Database connection configured"];case"cache":return["â†’ Retrieving cache credentials","â†’ Injecting CACHE_URL","âœ“ Cache connection configured"];case"deploy":let n=["â†’ Scheduling pods","â†’ Allocating resources"];for(let e=1;e<=s.resources.replicas.min;e++)n.push("â†’ Starting replica ".concat(e,"/").concat(s.resources.replicas.min));return n.push("â†’ Configuring DNS: ".concat(r,".internal")),n.push("âœ“ All replicas running"),n;case"health":return["â†’ Waiting for services to start","â†’ Checking ".concat((null==(l=s.healthCheck)?void 0:l.path)||"/health"),"â†’ Testing connectivity","âœ“ Health checks passed"];case"complete":return["ðŸŽ‰ Deployment successful!"];default:return[]}})(l.id,a,0),n=0,i=setInterval(()=>{n<r.length?(o(e=>e.map((e,s)=>s===t?{...e,logs:[...e.logs,r[n]]}:e)),n++):clearInterval(i)},Math.max(300,1e3*l.duration/(r.length+1)));j.current.push(i);let c=setTimeout(()=>{o(e=>e.map((e,s)=>s===t?{...e,status:"completed"}:e)),s(t+1)},1e3*l.duration);j.current.push(c)};return s(0),()=>{j.current.forEach(e=>clearTimeout(e)),j.current=[]}},[c.length,a.status]),(0,t.useEffect)(()=>{if(!h)return;let e=setTimeout(()=>{m(!1)},2e3),s=setTimeout(()=>{n()},5e3);return()=>{clearTimeout(e),clearTimeout(s)}},[h]),0===c.length)return null;let v=c.filter(e=>"completed"===e.status).length,f=c.length,N=v/f*100;return(0,s.jsxs)("div",{className:"border border-blue-200 rounded-lg overflow-hidden bg-blue-50",children:[(0,s.jsxs)("button",{onClick:()=>m(!x),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-blue-100 transition",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"animate-spin text-blue-600",children:"âš™ï¸"}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900",children:"Deploying Application"}),(0,s.jsxs)("div",{className:"text-sm text-slate-600",children:[v," of ",f," steps completed"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"text-sm text-slate-600",children:[Math.round(N),"%"]}),(0,s.jsx)("span",{className:"transform transition ".concat(x?"rotate-180":""),children:"â–¼"})]})]}),(0,s.jsx)("div",{className:"px-4 pb-2",children:(0,s.jsx)("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-purple-600 to-blue-600 transition-all duration-500",style:{width:"".concat(N,"%")}})})}),x&&(0,s.jsx)("div",{className:"px-4 pb-4 space-y-3 max-h-96 overflow-y-auto",children:c.map((e,t)=>(0,s.jsxs)("div",{className:"border rounded-lg transition ".concat("running"===e.status?"border-blue-400 bg-blue-50":"completed"===e.status?"border-green-300 bg-green-50":"border-slate-200 bg-white"),children:[(0,s.jsxs)("div",{className:"px-3 py-2 flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex-shrink-0",children:["completed"===e.status&&(0,s.jsx)("span",{className:"text-green-600",children:"âœ“"}),"running"===e.status&&(0,s.jsx)("span",{className:"animate-spin",children:"âš™ï¸"}),"pending"===e.status&&(0,s.jsx)("span",{className:"text-slate-400",children:"â—‹"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"font-medium text-slate-900 text-sm",children:e.label}),(0,s.jsx)("div",{className:"text-xs text-slate-600",children:e.description})]})]}),e.logs.length>0&&(0,s.jsx)("div",{className:"px-3 pb-2",children:(0,s.jsx)("div",{className:"bg-slate-900 rounded p-2 font-mono text-xs text-slate-300 space-y-1",children:e.logs.map((e,t)=>(0,s.jsx)("div",{className:"animate-fadeIn",children:e},t))})})]},e.id))})]})}function P(e){let{user:r}=e,[n,i]=(0,t.useState)(!1),d=(0,t.useRef)(null),c=(0,a.useRouter)(),{resetState:o}=(0,l.useDeployment)();return(0,t.useEffect)(()=>{function e(e){d.current&&!d.current.contains(e.target)&&i(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.jsxs)("div",{className:"relative",ref:d,children:[(0,s.jsxs)("button",{onClick:()=>i(!n),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-slate-100 transition text-slate-700",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:r.name.charAt(0).toUpperCase()}),(0,s.jsx)("span",{className:"font-medium text-sm hidden sm:block",children:r.name}),(0,s.jsx)("svg",{className:"w-4 h-4 text-slate-400 transition-transform ".concat(n?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-slate-200 py-1 z-50 animate-in fade-in zoom-in-95 duration-100",children:[(0,s.jsxs)("div",{className:"px-4 py-2 border-b border-slate-100",children:[(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Signed in as"}),(0,s.jsx)("p",{className:"text-sm font-semibold text-slate-900 truncate",children:r.name})]}),(0,s.jsxs)("button",{onClick:()=>{alert("Preferences clicked (Mocked)"),i(!1)},className:"w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50 transition flex items-center gap-2",children:[(0,s.jsxs)("svg",{className:"w-4 h-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Preferences"]}),(0,s.jsx)("div",{className:"border-t border-slate-100 my-1"}),(0,s.jsxs)("button",{onClick:()=>{o(),c.push("/")},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign out"]})]})]})}function R(){let{state:e,createEnvironment:r,setActiveEnvironment:n}=(0,l.useDeployment)(),i=(0,a.useRouter)(),[d,c]=(0,t.useState)(""),[o,x]=(0,t.useState)("non-prod"),[m,p]=(0,t.useState)(!1),u=d.length>=3&&d.length<=63&&/^[a-z0-9]([a-z0-9-]{1,61}[a-z0-9])$/.test(d);return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-8 px-4",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Create Your First Environment"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Environments isolate your deployments. Start with development, staging, or production."})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Environment Name *"}),(0,s.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value.toLowerCase()),placeholder:"development",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),d&&!u&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"3-63 characters, lowercase alphanumeric + hyphens, start/end with alphanumeric"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Environment Type *"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{onClick:()=>x("non-prod"),className:"p-4 border-2 rounded-lg transition ".concat("non-prod"===o?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Non-Production"}),(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"Development, testing, staging"})]}),(0,s.jsxs)("button",{onClick:()=>x("prod"),className:"p-4 border-2 rounded-lg transition ".concat("prod"===o?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300"),children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 mb-1",children:"Production"}),(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"Live, customer-facing"})]})]})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"ðŸ’¡"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-blue-900",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"Naming Recommendation"}),(0,s.jsx)("p",{children:'Use descriptive names like "production", "staging", "development", or "test". Environment type helps Unhazzle apply appropriate safeguards (e.g., extra confirmations for production changes).'})]})]})}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:()=>{if(!u||!e.project)return;p(!0);let s=r({name:d,type:o,deployed:!1,pendingChanges:!1});setTimeout(()=>{p(!1),n(s.id),i.push("/dashboard?selection=project-settings&tab=registry")},500)},disabled:!u||m,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"âš™ï¸"}),(0,s.jsx)("span",{children:"Creating..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"Create Environment"}),(0,s.jsx)("span",{children:"â†’"})]})})})]}),e.project&&(0,s.jsxs)("div",{className:"mt-6 text-center text-sm text-slate-600",children:["Project: ",(0,s.jsx)("span",{className:"font-medium text-slate-900",children:e.project.name}),e.region&&(0,s.jsxs)("span",{className:"ml-4",children:[(0,s.jsx)("span",{role:"img","aria-label":e.region.country,children:e.region.flag})," ",e.region.label]})]})]})})}let E=[{name:"acme/ecommerce-shop",tag:"v2.1.0",size:"324 MB",lastUpdated:"2024-10-28T14:30:00Z",description:"Main e-commerce application with Next.js frontend"},{name:"acme/api-gateway",tag:"v1.5.2",size:"156 MB",lastUpdated:"2024-10-25T09:15:00Z",description:"GraphQL API gateway service"},{name:"acme/payment-processor",tag:"v3.0.1",size:"89 MB",lastUpdated:"2024-10-30T16:45:00Z",description:"Payment processing microservice"},{name:"acme/notification-service",tag:"v2.3.0",size:"112 MB",lastUpdated:"2024-10-29T11:20:00Z",description:"Email and SMS notification handler"},{name:"acme/background-worker",tag:"v1.8.4",size:"78 MB",lastUpdated:"2024-10-27T13:10:00Z",description:"Background job processing worker"}];function D(){var e,r,n,i,d;let c=(0,a.useRouter)(),{state:o,removeDatabase:x,removeCache:m,updateApplicationStatus:p}=(0,l.useDeployment)(),[u,h]=(0,t.useState)(99.98),[b,g]=(0,t.useState)(42),[j,v]=(0,t.useState)(58),[f,N]=(0,t.useState)(1240),[y,w]=(0,t.useState)(!1);if((0,t.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,t.useEffect)(()=>{w(!0)},[]),(0,t.useEffect)(()=>{y&&!o.user&&c.push("/")},[y,o.user,c]),(0,t.useEffect)(()=>{let e=setInterval(()=>{g(e=>Math.max(15,Math.min(80,e+(Math.random()-.5)*10))),v(e=>Math.max(30,Math.min(85,e+(Math.random()-.5)*8))),N(e=>Math.max(800,Math.min(2e3,e+(Math.random()-.5)*200))),h(99.95+.05*Math.random())},3e3);return()=>clearInterval(e)},[]),!y)return null;if(!o.project)return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-8 px-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Dashboard"}),(0,s.jsxs)("p",{className:"text-slate-600",children:["Welcome, ",null==(d=o.user)?void 0:d.name,"!"]})]})})}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-12",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-100 to-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)("svg",{className:"w-12 h-12 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"No Projects Yet"}),(0,s.jsx)("p",{className:"text-slate-600 mb-8 leading-relaxed",children:"Get started by creating your first project. Answer 5 quick questions about your workload, and we'll automatically configure production-ready infrastructure for you."}),(0,s.jsxs)("button",{onClick:()=>c.push("/questionnaire"),className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold shadow-lg inline-flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:"+"}),(0,s.jsx)("span",{children:"Create Your First Project"})]})]})})]})});if(o.project&&0===o.project.environments.length)return(0,s.jsx)(R,{});let k=(null==(e=o.project)?void 0:e.environments.find(e=>e.id===o.activeEnvironmentId))||(null==(r=o.project)?void 0:r.environments[0]);return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-8 px-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Dashboard"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(null==(n=o.domain)?void 0:n.defaultSubdomain)&&(0,s.jsxs)("span",{className:"text-sm text-slate-600",children:["Deployed to: ",(0,s.jsx)("code",{className:"bg-white px-2 py-1 rounded text-xs font-mono",children:o.domain.defaultSubdomain})]}),o.region&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 bg-slate-100 text-slate-700 px-3 py-1 rounded-full text-sm",children:[(0,s.jsx)("span",{role:"img","aria-label":o.region.country,children:o.region.flag}),(0,s.jsx)("span",{children:o.region.label})]}),o.deployed&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"}),"Live"]})]})]}),k&&((null==(i=k.applications)?void 0:i.length)||0)>0&&(0,s.jsx)("div",{className:"ml-6"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[!o.project&&(0,s.jsxs)("button",{onClick:()=>c.push("/questionnaire"),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold shadow-lg flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"+"}),(0,s.jsx)("span",{children:"Create Project"})]}),o.user&&(0,s.jsx)(P,{user:o.user})]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden p-6",children:(0,s.jsx)(T,{project:o.project,state:o})})]})})}function T(e){var r,d,c,o;let{project:x,state:m}=e,p=(0,a.useRouter)(),u=(0,a.useSearchParams)(),{updateApplicationConfig:h,updateResources:b,removeDatabase:A,removeCache:P,removeApplication:R,cloneEnvironment:D,promoteEnvironment:T,deleteEnvironment:U,pauseEnvironment:B,resumeEnvironment:z,updateProject:G,createAppsFromImages:F,getActiveEnvironment:V,updateEnvironmentConfig:H,createEnvironment:q,promoteApplication:O,pauseApplication:W,updateApplicationStatus:_}=(0,l.useDeployment)(),[Z,J]=(0,t.useState)({kind:"project-settings"}),Y=u.get("tab"),[Q,$]=(0,t.useState)(!1),[K,X]=(0,t.useState)(!1),[ee,es]=(0,t.useState)(!1),[et,ea]=(0,t.useState)(!1),[el,er]=(0,t.useState)(!1),[en,ei]=(0,t.useState)(!1),[ed,ec]=(0,t.useState)(!1),[eo,ex]=(0,t.useState)(!1),[em,ep]=(0,t.useState)(null),[eu,eh]=(0,t.useState)(null),[eb,eg]=(0,t.useState)(null),[ej,ev]=(0,t.useState)(null),[ef,eN]=(0,t.useState)(null),[ey,ew]=(0,t.useState)(null),[ek,eC]=(0,t.useState)(!1),[eS,eA]=(0,t.useState)(!1),[eP,eR]=(0,t.useState)(!1),[eE,eD]=(0,t.useState)((null==(r=m.project)?void 0:r.githubPAT)||""),[eT,eM]=(0,t.useState)(!1),[eU,eL]=(0,t.useState)([]),[eI,eB]=(0,t.useState)(!1),[ez,eG]=(0,t.useState)({}),eF=()=>{if(!(null==x?void 0:x.environments))return null;if("application"===Z.kind)for(let s of x.environments){var e;let t=null==(e=s.applications)?void 0:e.find(e=>e.id===Z.id);if(t)return{type:"application",data:t,env:s}}else if("database"===Z.kind){let e=x.environments.find(e=>e.id===Z.envId);if(null==e?void 0:e.database)return{type:"database",data:e.database,env:e}}return null},eV=eF();return((0,t.useEffect)(()=>{let e=u.get("selection"),s=u.get("env"),t=u.get("id");"project-settings"===e?J({kind:"project-settings"}):"application"===e&&t&&s?J({kind:"application",id:t,envId:s}):"environment"===e&&s&&J({kind:"environment",envId:s})},[u]),(0,t.useEffect)(()=>{let e=eF();if("application"===Z.kind&&(null==e?void 0:e.data)){let s=JSON.parse(JSON.stringify(e.data));Array.isArray(s.environmentVariables)||(s.environmentVariables=[]),ev(s)}else if("database"===Z.kind&&(null==e?void 0:e.data)){let s=JSON.parse(JSON.stringify(e.data));s.type||(s.type="container"),eN(s),ev(null)}else ev(null),eN(null),ew(null)},[Z,x]),x)?(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,s.jsx)("div",{className:"col-span-12 lg:col-span-4 xl:col-span-3",children:(0,s.jsx)(n,{project:x,selected:Z,onSelect:e=>"add-application"===e.kind?void ea(!0):"create-environment"===e.kind?void er(!0):void J(e)})}),(0,s.jsxs)("div",{className:"col-span-12 lg:col-span-8 xl:col-span-9",children:["project-settings"===Z.kind&&(0,s.jsx)(g,{project:x,initialTab:"registry"===Y||"repository"===Y||"pr-environments"===Y||"general"===Y?Y:"general",onSave:e=>{G(e)},onCreateEnvironment:()=>{er(!0)}}),"environment"===Z.kind&&Z.envId&&(()=>{var e;let t=null==(e=x.environments)?void 0:e.find(e=>e.id===Z.envId);return t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i,{environment:t,onClone:()=>$(!0),onPause:()=>X(!0),onResume:()=>es(!0),onAddApplication:()=>{J({kind:"add-application",envId:t.id}),ea(!0)}}),Q&&(0,s.jsx)(j,{sourceEnvironment:t,onClose:()=>$(!1),onConfirm:(e,s)=>{D(t.id,e,s),$(!1)}}),K&&(0,s.jsx)(v,{environment:t,onClose:()=>X(!1),onConfirm:e=>{B(t.id,e),X(!1)}}),ee&&(0,s.jsx)(f,{environment:t,onClose:()=>es(!1),onConfirm:()=>{z(t.id),es(!1)}})]}):null})(),et&&Z.envId&&(0,s.jsx)(y,{onClose:()=>ea(!1),availableImages:(null==(d=m.project)?void 0:d.githubPAT)?E:[],githubPAT:null==(c=m.project)?void 0:c.githubPAT,onAdd:e=>{var s;let{name:t,imageUrl:a,exposure:l}=e,r=V();if(!r)return;let n="app-".concat(Date.now(),"-0");F(r.id,[{name:(null==(s=a.split("/").pop())?void 0:s.split(":")[0])||t,url:a,autoName:t,tag:a.split(":").pop()||"latest",description:"".concat(t," application"),exposure:l}]),ea(!1),setTimeout(()=>{p.push("/dashboard?selection=application&id=".concat(n,"&env=").concat(r.id))},150)}}),en&&em&&(0,s.jsx)(w,{applicationName:em.name,onClose:()=>{ei(!1),ep(null)},onConfirm:()=>{R(em.id,em.envId),ei(!1),ep(null),p.push("/dashboard?selection=environment&env=".concat(em.envId))}}),el&&(0,s.jsx)(N,{onClose:()=>er(!1),onConfirm:(e,s)=>{let t=q({name:e,type:s,deployed:!1,pendingChanges:!1});er(!1),p.push("/dashboard?selection=environment&env=".concat(t.id))}}),ed&&eu&&(0,s.jsx)(k,{application:eu,availableTargets:(null==(o=x.environments)?void 0:o.filter(e=>e.id!==eu.envId&&"deleted"!==e.status))||[],onClose:()=>{ec(!1),eh(null)},onConfirm:e=>{O(eu.id,e),ec(!1),eh(null),p.push("/dashboard?selection=environment&env=".concat(e))}}),eo&&eb&&(0,s.jsx)(C,{applicationName:eb.name,onClose:()=>{ex(!1),eg(null)},onConfirm:e=>{W(eb.id,e),ex(!1),eg(null)}}),"application"===Z.kind&&eV&&ej&&(0,s.jsx)(M,{application:eV.data,environment:eV.env,draftApplication:ej,setDraftApplication:ev,hasChanges:!!(null==eV?void 0:eV.data)&&!!ej&&"application"===Z.kind&&("stopped"===eV.data.status||JSON.stringify({name:ej.name,imageUrl:ej.imageUrl,resources:ej.resources,healthCheck:ej.healthCheck,exposure:ej.exposure,serviceAccess:ej.serviceAccess,environmentVariables:ej.environmentVariables})!==JSON.stringify({name:eV.data.name,imageUrl:eV.data.imageUrl,resources:eV.data.resources,healthCheck:eV.data.healthCheck,exposure:eV.data.exposure,serviceAccess:eV.data.serviceAccess,environmentVariables:eV.data.environmentVariables})),showChanges:ek,setShowChanges:eC,onApply:()=>eA(!0),isApplying:eP,state:m,onRequestRemove:(e,s,t)=>{ep({id:e,name:s,envId:t}),ei(!0)},onPromote:(e,s,t)=>{eh({id:e,name:s,envId:t}),ec(!0)},onPause:(e,s)=>{eg({id:e,name:s}),ex(!0)}}),"database"===Z.kind&&eV&&ef&&(0,s.jsx)(L,{database:eV.data,environment:eV.env,draftDatabase:ef,setDraftDatabase:eN,hasChanges:!!(null==eV?void 0:eV.data)&&!!ef&&"database"===Z.kind&&JSON.stringify(ef)!==JSON.stringify(eV.data),showChanges:ek,setShowChanges:eC,onApply:()=>eA(!0),isApplying:eP,state:m,onRemove:A}),"architecture"===Z.kind&&(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"ðŸ—ï¸"}),(0,s.jsx)("span",{children:"Architecture Diagram"})]}),(0,s.jsx)("p",{className:"text-slate-600 mb-6",children:"Visual representation of your deployed infrastructure, including application connections and internal DNS."})]}),(0,s.jsx)(S,{state:m})]})]}),eS&&(0,s.jsx)(I,{selected:Z,selectedResource:eV,draftApplication:ej,draftDatabase:ef,draftCache:ey,onCancel:()=>eA(!1),onConfirm:()=>{"application"===Z.kind?(null==eV?void 0:eV.data)&&ej&&(eA(!1),h(eV.data.id,{name:ej.name,imageUrl:ej.imageUrl,resources:ej.resources,healthCheck:ej.healthCheck,exposure:ej.exposure,serviceAccess:ej.serviceAccess,environmentVariables:ej.environmentVariables}),_(eV.data.id,"deploying")):"database"===Z.kind&&(()=>{if(!ef||!m.resources)return;let e=m.resources;eA(!1),eR(!0),setTimeout(()=>{b({replicas:e.replicas,cpu:e.cpu,memory:e.memory,database:ef,cache:e.cache}),eR(!1)},800)})()}})]}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ“¦"}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"No Projects Yet"}),(0,s.jsx)("p",{className:"text-slate-600 mb-6",children:"Create your first project to get started with Unhazzle"}),(0,s.jsx)("button",{onClick:()=>window.location.href="/questionnaire",className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition font-semibold",children:"Create Project"})]})}function M(e){var a,l,n,i,d,c,o,x;let{application:m,environment:p,draftApplication:u,setDraftApplication:h,hasChanges:b,showChanges:g,setShowChanges:j,onApply:v,isApplying:f,state:N,onRequestRemove:y,onPromote:w,onPause:k}=e,[C,S]=(0,t.useState)(!1),[P,R]=(0,t.useState)(!1);(0,t.useEffect)(()=>{"deploying"===m.status&&R(!0)},[m.status]);let[E,D]=(0,t.useState)("configuration"),[T,M]=(0,t.useState)({deployments:!0,k8sEvents:!1}),[L,I]=(0,t.useState)(!1),B=(0,t.useCallback)(()=>{R(!1)},[]);return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex-1 mr-4",children:(0,s.jsx)("input",{type:"text",value:u.name,onChange:e=>h({...u,name:e.target.value}),className:"text-xl font-bold text-slate-900 border-b border-transparent hover:border-slate-300 focus:border-purple-500 focus:outline-none bg-transparent w-full",placeholder:"Application Name"})}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>I(!L),className:"px-4 py-2 rounded-lg text-sm font-medium border border-slate-300 text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"ðŸ’°"}),(0,s.jsxs)("span",{children:["â‚¬",(0,r.calculateApplicationCostRange)(u.resources.replicas,u.resources.cpu,u.resources.memory).min.toFixed(2)]}),(0,s.jsx)("span",{className:"text-xs",children:"â–¼"})]}),L&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>I(!1)}),(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-slate-200 z-20 overflow-hidden p-4",children:[(0,s.jsx)("h4",{className:"text-sm font-bold text-slate-900 mb-3",children:"Estimated Monthly Cost"}),(()=>{let e=(0,r.calculateApplicationCostRange)(u.resources.replicas,u.resources.cpu,u.resources.memory);return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-slate-600",children:"Baseline (Min Replicas)"}),(0,s.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:["â‚¬",e.min.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-slate-600",children:"Max Scaled (Max Replicas)"}),(0,s.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:["â‚¬",e.max.toFixed(2)]})]}),(0,s.jsx)("div",{className:"pt-3 border-t border-slate-100",children:(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Costs are estimated based on instance types and replica counts. Actual usage may vary."})})]})})()]})]})]}),(0,s.jsx)("button",{onClick:v,disabled:!b||f||"deploying"===m.status,className:"px-4 py-2 rounded-lg text-sm font-semibold bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-50",children:f?"Applyingâ€¦":"Apply"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>S(!C),className:"px-4 py-2 rounded-lg text-sm font-medium border border-slate-300 text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"Actions"}),(0,s.jsx)("span",{className:"text-xs",children:"â–¼"})]}),C&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>S(!1)}),(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-slate-200 z-20 overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>{w(m.id,m.name||"application",p.id),S(!1)},className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"ðŸš€"}),(0,s.jsx)("span",{children:"Promote"})]}),(0,s.jsxs)("button",{onClick:()=>{k(m.id,m.name||"application"),S(!1)},className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"â¸ï¸"}),(0,s.jsx)("span",{children:"Pause"})]}),(0,s.jsxs)("button",{onClick:()=>{alert("Restarting ".concat(m.name||"application","...\n\nThis will perform a rolling restart of all replicas with zero downtime.")),S(!1)},className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"ðŸ”„"}),(0,s.jsx)("span",{children:"Restart"})]}),(0,s.jsx)("div",{className:"border-t border-slate-100 my-1"}),(0,s.jsxs)("button",{onClick:()=>{y(m.id,m.name||"application",p.id),S(!1)},className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"ðŸ—‘ï¸"}),(0,s.jsx)("span",{children:"Delete"})]})]})]})]})]})]}),(0,s.jsx)("div",{className:"border-b border-slate-200 flex gap-6",children:["configuration","logs","metrics","events","integrations"].map(e=>(0,s.jsx)("button",{onClick:()=>D(e),className:"pb-3 text-sm font-medium transition border-b-2 ".concat(E===e?"border-purple-600 text-purple-600":"border-transparent text-slate-500 hover:text-slate-800"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),P&&(0,s.jsx)(A,{application:m,environmentId:p.id,onComplete:B}),"configuration"===E&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Application Image"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Image URL"}),(0,s.jsx)("input",{type:"text",value:u.imageUrl,onChange:e=>h({...u,imageUrl:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono",placeholder:"ghcr.io/username/image:tag"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Resources"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"CPU"}),(0,s.jsxs)("select",{value:u.resources.cpu,onChange:e=>h({...u,resources:{...u.resources,cpu:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"0.5",children:"0.5"}),(0,s.jsx)("option",{value:"1",children:"1"}),(0,s.jsx)("option",{value:"2",children:"2"}),(0,s.jsx)("option",{value:"4",children:"4"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Memory"}),(0,s.jsxs)("select",{value:u.resources.memory,onChange:e=>h({...u,resources:{...u.resources,memory:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"512Mi",children:"512MB"}),(0,s.jsx)("option",{value:"1Gi",children:"1GB"}),(0,s.jsx)("option",{value:"2Gi",children:"2GB"}),(0,s.jsx)("option",{value:"4Gi",children:"4GB"}),(0,s.jsx)("option",{value:"8Gi",children:"8GB"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Replicas (min)"}),(0,s.jsx)("input",{type:"number",min:1,value:u.resources.replicas.min,onChange:e=>{let s=Math.max(1,parseInt(e.target.value)||1),t=u.resources.replicas.max;h({...u,resources:{...u.resources,replicas:{...u.resources.replicas,min:s,max:Math.max(s,t)}}})},className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Replicas (max)"}),(0,s.jsx)("input",{type:"number",min:u.resources.replicas.min,value:u.resources.replicas.max,onChange:e=>{let s=Math.max(u.resources.replicas.min,parseInt(e.target.value)||1);h({...u,resources:{...u.resources,replicas:{...u.resources.replicas,max:s}}})},className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Storage"}),(0,s.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:!!u.volume,onChange:e=>{if(e.target.checked)h({...u,volume:{mountPath:"/data",sizeGB:10,autoScale:!0,backupFrequency:"daily",deleteWithContainer:!1}});else{let{volume:e,...s}=u;h(s)}}}),(0,s.jsx)("span",{className:"font-medium text-slate-900",children:"Add Persistent Volume"})]}),u.volume&&(0,s.jsxs)("div",{className:"ml-6 mt-3 space-y-4",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Mount Path"}),(0,s.jsx)("input",{type:"text",value:u.volume.mountPath,onChange:e=>h({...u,volume:{...u.volume,mountPath:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono",placeholder:"/data"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Size"}),(0,s.jsxs)("select",{value:u.volume.sizeGB,onChange:e=>h({...u,volume:{...u.volume,sizeGB:parseInt(e.target.value)}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"1",children:"1 GB"}),(0,s.jsx)("option",{value:"5",children:"5 GB"}),(0,s.jsx)("option",{value:"10",children:"10 GB"}),(0,s.jsx)("option",{value:"20",children:"20 GB"}),(0,s.jsx)("option",{value:"50",children:"50 GB"}),(0,s.jsx)("option",{value:"100",children:"100 GB"})]})]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Backups"}),(0,s.jsxs)("select",{value:u.volume.backupFrequency,onChange:e=>h({...u,volume:{...u.volume,backupFrequency:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"disabled",children:"Disabled"}),(0,s.jsx)("option",{value:"hourly",children:"Hourly"}),(0,s.jsx)("option",{value:"daily",children:"Daily"}),(0,s.jsx)("option",{value:"weekly",children:"Weekly"})]})]}),(0,s.jsx)("div",{className:"flex items-center pt-5",children:(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:u.volume.autoScale,onChange:e=>h({...u,volume:{...u.volume,autoScale:e.target.checked}})}),(0,s.jsx)("span",{className:"text-sm text-slate-700",children:"Auto-scale size"})]})})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Persistent volumes retain data even if the container crashes or restarts."})]})]})]}),(null==p||null==(a=p.applications)?void 0:a.length)>=1&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Dependencies"}),(0,s.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,s.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:(null==(l=u.externalDatabase)?void 0:l.enabled)||!1,onChange:e=>{var s,t;let a=e.target.checked,l="DATABASE_URL",r=[...u.environmentVariables];a?r.some(e=>e.key===l)||r.push({key:l,value:(null==(t=u.externalDatabase)?void 0:t.connectionString)||"",masked:!0}):r=r.filter(e=>e.key!==l),h({...u,externalDatabase:{enabled:a,connectionString:(null==(s=u.externalDatabase)?void 0:s.connectionString)||""},environmentVariables:r})}}),(0,s.jsx)("span",{className:"font-medium text-slate-900",children:"Connect to External Database"})]}),(null==(n=u.externalDatabase)?void 0:n.enabled)&&(0,s.jsx)("div",{className:"ml-6 mt-2 space-y-2",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Connection String"}),(0,s.jsx)("input",{type:"password",value:u.externalDatabase.connectionString,onChange:e=>{let s=e.target.value,t=u.environmentVariables.map(e=>"DATABASE_URL"===e.key?{...e,value:s}:e);h({...u,externalDatabase:{...u.externalDatabase,connectionString:s},environmentVariables:t})},placeholder:"postgres://user:pass@host:5432/db",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono"}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Injected as ",(0,s.jsx)("code",{children:"DATABASE_URL"})]})]})})]}),((null==(i=N.resources)?void 0:i.database)||(null==(d=N.resources)?void 0:d.cache))&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h5",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Platform Resources"}),(null==(c=N.resources)?void 0:c.database)&&(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:u.serviceAccess.database,onChange:e=>{let s=e.target.checked,t="UNHAZZLE_POSTGRES_URL",a=[...u.environmentVariables];s?a.some(e=>e.key===t)||a.push({key:t,value:"",masked:!1}):a=a.filter(e=>e.key!==t),h({...u,serviceAccess:{...u.serviceAccess,database:s},environmentVariables:a})}}),(0,s.jsx)("span",{className:"text-slate-900",children:"Managed PostgreSQL (Platform)"})]}),(null==(o=N.resources)?void 0:o.cache)&&(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:u.serviceAccess.cache,onChange:e=>{let s=e.target.checked,t="UNHAZZLE_REDIS_URL",a=[...u.environmentVariables];s?a.some(e=>e.key===t)||a.push({key:t,value:"",masked:!1}):a=a.filter(e=>e.key!==t),h({...u,serviceAccess:{...u.serviceAccess,cache:s},environmentVariables:a})}}),(0,s.jsx)("span",{className:"text-slate-900",children:"Managed Redis (Platform)"})]})]}),(null==p||null==(x=p.applications)?void 0:x.length)>1&&(0,s.jsxs)("div",{className:"pt-2 mt-2 border-t border-slate-100",children:[(0,s.jsx)("h5",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"Internal Applications"}),(0,s.jsx)("div",{className:"space-y-2",children:p.applications.filter(e=>e.id!==m.id).map(e=>{let t="".concat(e.name.toUpperCase().replace(/[^A-Z0-9_]/g,"_"),"_URL"),a=e.name||e.serviceName||"app-".concat(e.id.substring(0,8)),l="http://".concat(a,".").concat(p.slug||p.name),r=(u.serviceAccess.applications||[]).includes(e.id);return(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:r,onChange:s=>{let a=s.target.checked,r=[...u.environmentVariables],n=[...u.serviceAccess.applications||[]];a?(n.includes(e.id)||n.push(e.id),r.some(e=>e.key===t)||r.push({key:t,value:l,masked:!1})):(n=n.filter(s=>s!==e.id),r=r.filter(e=>e.key!==t)),h({...u,serviceAccess:{...u.serviceAccess,applications:n},environmentVariables:r})}}),(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"text-slate-900",children:e.name})})]},e.id)})})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Connection strings are auto-injected as environment variables."})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Environment Variables"}),(0,s.jsxs)("div",{className:"space-y-3",children:[0===u.environmentVariables.length&&(0,s.jsx)("div",{className:"text-xs text-slate-500",children:"No variables defined yet."}),u.environmentVariables.map((e,t)=>(0,s.jsxs)("div",{className:"grid md:grid-cols-12 gap-3 items-start",children:[(0,s.jsxs)("div",{className:"md:col-span-4",children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Key"}),(0,s.jsx)("input",{type:"text",value:e.key,onChange:e=>{let s=[...u.environmentVariables];s[t]={...s[t],key:e.target.value},h({...u,environmentVariables:s})},placeholder:"KEY",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono"})]}),(0,s.jsxs)("div",{className:"md:col-span-6",children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Value"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:!1===e.masked?"text":"password",value:e.value,onChange:e=>{let s=[...u.environmentVariables];s[t]={...s[t],value:e.target.value},h({...u,environmentVariables:s})},placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono"}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e=[...u.environmentVariables],s=!1!==e[t].masked;e[t]={...e[t],masked:!s},h({...u,environmentVariables:e})},className:"p-2 rounded-lg border border-slate-300 hover:bg-slate-200 transition text-sm","aria-label":!1===e.masked?"Hide value":"Show value",title:!1===e.masked?"Hide value":"Show value",children:!1===e.masked?(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("ellipse",{cx:"12",cy:"12",rx:"9",ry:"6"}),(0,s.jsx)("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",stroke:"none"}),(0,s.jsx)("line",{x1:"4",y1:"20",x2:"20",y2:"4"})]}):(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("ellipse",{cx:"12",cy:"12",rx:"9",ry:"6"}),(0,s.jsx)("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",stroke:"none"})]})})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs mb-1 invisible",children:"Action"}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e=u.environmentVariables.filter((e,s)=>s!==t);h({...u,environmentVariables:e})},className:"w-full md:w-auto px-3 py-2 text-xs rounded-lg border border-red-300 text-red-700 hover:bg-red-50",children:"Remove"})]})]},t)),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"ðŸ”"}),(0,s.jsx)("span",{children:"Values are masked by default and stored encrypted."})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e=[...u.environmentVariables,{key:"",value:"",masked:!0}];h({...u,environmentVariables:e})},className:"px-3 py-2 text-xs rounded-lg border border-slate-300 hover:bg-slate-50 text-slate-900",children:"+ Add variable"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Networking"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Visibility"}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,s.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",checked:"public"===u.exposure,onChange:()=>h({...u,exposure:"public"})}),(0,s.jsx)("span",{className:"text-slate-900",children:"Public"})]}),(0,s.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",checked:"private"===u.exposure,onChange:()=>h({...u,exposure:"private"})}),(0,s.jsx)("span",{className:"text-slate-900",children:"Private"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Domain"}),(0,s.jsx)("div",{className:"text-sm text-slate-900",children:"http://".concat(u.name,".").concat(p.slug||p.name)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Port"}),(0,s.jsx)("div",{className:"text-sm font-mono text-slate-900",children:u.port})]})]})]}),"public"===m.exposure&&(()=>{var e;let t=(null==(e=m.imageUrl.split("/").pop())?void 0:e.split(":")[0])||"app",a=m.id.substring(0,6),l="".concat(t,"-").concat(a,".unhazzle.app");return(0,s.jsx)("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Public Endpoint"}),(0,s.jsx)("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded-full",children:"Live"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("code",{className:"text-sm text-purple-600 font-mono",children:["https://",l]}),(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText("https://".concat(l))},className:"p-1 hover:bg-slate-200 rounded transition text-sm",title:"Copy to clipboard",children:"ðŸ“‹"})]}),(0,s.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["Port ",m.port," â€¢ SSL Enabled â€¢ CDN Cached"]})]})})})})(),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Health Check"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Protocol"}),(0,s.jsxs)("select",{value:u.healthCheck.protocol,onChange:e=>h({...u,healthCheck:{...u.healthCheck,protocol:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"HTTP",children:"HTTP"}),(0,s.jsx)("option",{value:"TCP",children:"TCP"}),(0,s.jsx)("option",{value:"gRPC",children:"gRPC"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Port"}),(0,s.jsx)("input",{type:"number",value:u.healthCheck.port,onChange:e=>h({...u,healthCheck:{...u.healthCheck,port:parseInt(e.target.value)||u.port}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Path"}),(0,s.jsx)("input",{type:"text",value:u.healthCheck.path||"",onChange:e=>h({...u,healthCheck:{...u.healthCheck,path:e.target.value}}),placeholder:"/health",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 mt-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Interval"}),(0,s.jsx)("input",{type:"text",value:u.healthCheck.interval,onChange:e=>h({...u,healthCheck:{...u.healthCheck,interval:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Timeout"}),(0,s.jsx)("input",{type:"text",value:u.healthCheck.timeout,onChange:e=>h({...u,healthCheck:{...u.healthCheck,timeout:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Retries"}),(0,s.jsx)("input",{type:"number",min:0,value:u.healthCheck.retries,onChange:e=>h({...u,healthCheck:{...u.healthCheck,retries:Math.max(0,parseInt(e.target.value)||0)}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Using recommended values."})]}),g&&b&&(0,s.jsx)(U,{current:m,draft:u,onClose:()=>j(!1)})]}),"logs"===E&&(0,s.jsx)("div",{className:"bg-slate-900 rounded-lg p-4 font-mono text-sm text-green-400 space-y-1 max-h-96 overflow-y-auto",children:(()=>{var e,t;let a=[];return a.push({application:m.name,message:"[2025-11-02 14:32:15] Application started successfully"},{application:m.name,message:"[2025-11-02 14:32:17] â†’ HTTP server listening on port ".concat(m.port)},{application:m.name,message:"[2025-11-02 14:32:18] âœ“ Health check passed"},{application:m.name,message:"[2025-11-02 14:32:19] â†’ Replica 1 reporting healthy"},{application:m.name,message:"[2025-11-02 14:32:20] â†’ Replica 2 reporting healthy"}),(null==(e=m.serviceAccess)?void 0:e.database)&&a.push({application:m.name,message:"[2025-11-02 14:32:16] âœ“ Database connection established"}),(null==(t=m.serviceAccess)?void 0:t.cache)&&a.push({application:m.name,message:"[2025-11-02 14:32:16] âœ“ Redis cache connected"}),"public"===m.exposure?a.push({application:m.name,message:"[2025-11-02 14:35:42] GET /api/products 200 45ms"},{application:m.name,message:"[2025-11-02 14:35:43] POST /api/cart 201 52ms"},{application:m.name,message:"[2025-11-02 14:35:44] GET /api/checkout 200 38ms"},{application:m.name,message:"[2025-11-02 14:35:45] POST /api/orders 201 127ms"},{application:m.name,message:"[2025-11-02 14:35:46] GET / 200 15ms (cached)"}):a.push({application:m.name,message:"[2025-11-02 14:35:42] Processing background job #1234"},{application:m.name,message:"[2025-11-02 14:35:43] â†’ Job completed in 89ms"},{application:m.name,message:"[2025-11-02 14:35:44] Handling internal API call"}),a.map((e,t)=>(0,s.jsx)("div",{children:e.message},t))})()}),"metrics"===E&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-3 uppercase tracking-wide",children:"Tier 1: Instance Status"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[(0,s.jsx)("p",{className:"text-xs text-slate-600 mb-2",children:"Running Instances"}),(0,s.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,s.jsx)("span",{className:"text-3xl font-bold text-green-600",children:m.resources.replicas.min}),(0,s.jsx)("span",{className:"text-lg text-slate-400",children:"/"}),(0,s.jsx)("span",{className:"text-lg text-slate-600",children:m.resources.replicas.min})]}),(0,s.jsxs)("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-green-600 rounded-full"}),"All instances healthy"]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[(0,s.jsx)("p",{className:"text-xs text-slate-600 mb-2",children:"Restart Count (24h)"}),(0,s.jsx)("div",{className:"text-3xl font-bold text-slate-900",children:"0"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"No restarts detected"})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[(0,s.jsx)("p",{className:"text-xs text-slate-600 mb-2",children:"OOM Killed (24h)"}),(0,s.jsx)("div",{className:"text-3xl font-bold text-green-600",children:"0"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"No memory issues"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-slate-900 mb-3 uppercase tracking-wide",children:"Tier 2: Performance Metrics"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[(0,s.jsx)("p",{className:"text-xs text-slate-600 mb-2",children:"Request Rate"}),(0,s.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:"1.2k"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"requests/min"})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[(0,s.jsx)("p",{className:"text-xs text-slate-600 mb-2",children:"Error Rate"}),(0,s.jsx)("div",{className:"text-3xl font-bold text-green-600",children:"0.02%"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Excellent reliability"})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[(0,s.jsx)("p",{className:"text-xs text-slate-600 mb-2",children:"CPU Utilization"}),(0,s.jsx)("div",{className:"flex items-baseline gap-2 mb-2",children:(0,s.jsx)("span",{className:"text-3xl font-bold text-blue-600",children:"42%"})}),(0,s.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"42%"}})}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["of ",m.resources.cpu," cores"]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[(0,s.jsx)("p",{className:"text-xs text-slate-600 mb-2",children:"Memory Utilization"}),(0,s.jsx)("div",{className:"flex items-baseline gap-2 mb-2",children:(0,s.jsx)("span",{className:"text-3xl font-bold text-amber-600",children:"58%"})}),(0,s.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-amber-600 h-2 rounded-full",style:{width:"58%"}})}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["of ",m.resources.memory]})]})]})]})]}),"events"===E&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>M(e=>({...e,deployments:!e.deployments})),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 transition",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-slate-900 uppercase tracking-wide",children:"Deployment History (Last 5)"}),(0,s.jsx)("span",{className:"text-slate-600 text-lg",children:T.deployments?"â–¼":"â–¶"})]}),T.deployments&&(0,s.jsxs)("div",{className:"p-4 space-y-2 bg-white",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,s.jsx)("span",{className:"text-lg",children:"âœ…"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"font-medium text-green-900 text-sm",children:"v1.2.3"}),(0,s.jsx)("span",{className:"px-2 py-0.5 bg-green-600 text-white text-xs rounded-full",children:"Current"})]}),(0,s.jsx)("p",{className:"text-xs text-green-700 mt-0.5",children:"Deployed successfully â€¢ 2 hours ago"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("span",{className:"text-lg",children:"âœ…"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900 text-sm",children:"v1.2.2"}),(0,s.jsx)("p",{className:"text-xs text-slate-600 mt-0.5",children:"Deployed successfully â€¢ 1 day ago"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("span",{className:"text-lg",children:"âœ…"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900 text-sm",children:"v1.2.1"}),(0,s.jsx)("p",{className:"text-xs text-slate-600 mt-0.5",children:"Deployed successfully â€¢ 3 days ago"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("span",{className:"text-lg",children:"âœ…"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900 text-sm",children:"v1.2.0"}),(0,s.jsx)("p",{className:"text-xs text-slate-600 mt-0.5",children:"Deployed successfully â€¢ 1 week ago"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-amber-50 rounded-lg border border-amber-200",children:[(0,s.jsx)("span",{className:"text-lg",children:"âš ï¸"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-amber-900 text-sm",children:"v1.1.9"}),(0,s.jsx)("p",{className:"text-xs text-amber-700 mt-0.5",children:"Rolled back due to errors â€¢ 2 weeks ago"})]})]})]})]}),(0,s.jsxs)("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>M(e=>({...e,k8sEvents:!e.k8sEvents})),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 transition",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-slate-900 uppercase tracking-wide",children:"Infrastructure Events (Last 10)"}),(0,s.jsx)("span",{className:"text-slate-600 text-lg",children:T.k8sEvents?"â–¼":"â–¶"})]}),T.k8sEvents&&(0,s.jsxs)("div",{className:"p-4 space-y-2 bg-white",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("span",{className:"text-sm text-slate-500 mt-0.5",children:"2m ago"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-slate-900 font-mono",children:"Scaled"}),(0,s.jsx)("p",{className:"text-xs text-slate-600 mt-0.5",children:"Scaled up replica set to 2"})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("span",{className:"text-sm text-slate-500 mt-0.5",children:"5m ago"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-slate-900 font-mono",children:"Pulled"}),(0,s.jsxs)("p",{className:"text-xs text-slate-600 mt-0.5",children:['Successfully pulled image "',m.imageUrl,'"']})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("span",{className:"text-sm text-slate-500 mt-0.5",children:"5m ago"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-slate-900 font-mono",children:"Pulling"}),(0,s.jsxs)("p",{className:"text-xs text-slate-600 mt-0.5",children:['Pulling image "',m.imageUrl,'"']})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,s.jsx)("span",{className:"text-sm text-green-600 mt-0.5",children:"6m ago"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-green-900 font-mono",children:"Started"}),(0,s.jsxs)("p",{className:"text-xs text-green-700 mt-0.5",children:["Started container ",m.name]})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("span",{className:"text-sm text-slate-500 mt-0.5",children:"6m ago"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-slate-900 font-mono",children:"Created"}),(0,s.jsxs)("p",{className:"text-xs text-slate-600 mt-0.5",children:["Created container ",m.name]})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("span",{className:"text-sm text-slate-500 mt-0.5",children:"15m ago"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-slate-900 font-mono",children:"Scheduled"}),(0,s.jsx)("p",{className:"text-xs text-slate-600 mt-0.5",children:"Successfully assigned container to node"})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,s.jsx)("span",{className:"text-sm text-blue-600 mt-0.5",children:"1h ago"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-blue-900 font-mono",children:"SuccessfulCreate"}),(0,s.jsxs)("p",{className:"text-xs text-blue-700 mt-0.5",children:["Created container: ",m.name,"-",Math.random().toString(36).substring(7)]})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("span",{className:"text-sm text-slate-500 mt-0.5",children:"2h ago"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-slate-900 font-mono",children:"ScalingReplicaSet"}),(0,s.jsx)("p",{className:"text-xs text-slate-600 mt-0.5",children:"Scaled up replica set to 2 from 1"})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,s.jsx)("span",{className:"text-sm text-green-600 mt-0.5",children:"2h ago"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-green-900 font-mono",children:"SuccessfulRollout"}),(0,s.jsx)("p",{className:"text-xs text-green-700 mt-0.5",children:"Deployment has successfully progressed"})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[(0,s.jsx)("span",{className:"text-sm text-slate-500 mt-0.5",children:"3h ago"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-slate-900 font-mono",children:"BackOff"}),(0,s.jsx)("p",{className:"text-xs text-slate-600 mt-0.5",children:"Back-off restarting failed container (resolved)"})]})]})]})]})]}),"integrations"===E&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"â„¹ï¸"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-blue-900",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"External Monitoring Integrations"}),(0,s.jsx)("p",{children:"Connect your application to external monitoring and observability platforms. Metrics and logs will be automatically forwarded to your configured endpoints."})]})]})}),(0,s.jsxs)("div",{className:"border border-slate-200 rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xl",children:"ðŸ“Š"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"Datadog"}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Application performance monitoring and analytics"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),(0,s.jsxs)("div",{className:"space-y-4 pl-13",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"API Endpoint URL"}),(0,s.jsx)("input",{type:"url",placeholder:"https://api.datadoghq.com",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"API Key"}),(0,s.jsx)("input",{type:"password",placeholder:"Enter your Datadog API key",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm font-mono"})]})]})]}),(0,s.jsxs)("div",{className:"border border-slate-200 rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xl",children:"ðŸ”"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"Splunk"}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Log management and security analytics"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),(0,s.jsxs)("div",{className:"space-y-4 pl-13",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"HEC Endpoint URL"}),(0,s.jsx)("input",{type:"url",placeholder:"https://your-instance.splunkcloud.com:8088",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"HEC Token"}),(0,s.jsx)("input",{type:"password",placeholder:"Enter your Splunk HEC token",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm font-mono"})]})]})]}),(0,s.jsxs)("div",{className:"border border-slate-200 rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xl",children:"ðŸ“ˆ"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"Dynatrace"}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Full-stack observability platform"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),(0,s.jsxs)("div",{className:"space-y-4 pl-13",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Environment URL"}),(0,s.jsx)("input",{type:"url",placeholder:"https://{your-environment-id}.live.dynatrace.com",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"API Token"}),(0,s.jsx)("input",{type:"password",placeholder:"Enter your Dynatrace API token",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm font-mono"})]})]})]})]})]})}function U(e){let{current:t,draft:a,onClose:l}=e,n=(0,r.calculateApplicationCostImpact)(t.resources.cpu,t.resources.memory,t.resources.replicas,a.resources.cpu,a.resources.memory,a.resources.replicas);return(0,s.jsxs)("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h5",{className:"font-semibold text-amber-900",children:"ðŸ“ Pending Changes"}),(0,s.jsx)("button",{onClick:l,className:"text-xs text-amber-700 underline",children:"Hide"})]}),(0,s.jsxs)("ul",{className:"text-sm text-amber-900 list-disc ml-5 space-y-1",children:[t.resources.cpu!==a.resources.cpu&&(0,s.jsxs)("li",{children:["CPU: ",t.resources.cpu," â†’ ",a.resources.cpu]}),t.resources.memory!==a.resources.memory&&(0,s.jsxs)("li",{children:["Memory: ",t.resources.memory," â†’ ",a.resources.memory]}),t.resources.replicas.min!==a.resources.replicas.min&&(0,s.jsxs)("li",{children:["Replicas (min): ",t.resources.replicas.min," â†’ ",a.resources.replicas.min]}),t.exposure!==a.exposure&&(0,s.jsxs)("li",{children:["Visibility: ",t.exposure," â†’ ",a.exposure]}),JSON.stringify(t.environmentVariables)!==JSON.stringify(a.environmentVariables)&&(0,s.jsx)("li",{children:"Environment variables updated"})]}),(0,s.jsxs)("div",{className:"text-xs text-amber-800 mt-3",children:["Impact: CPU/RAM changes require rolling restart. Estimated duration: ~2 minutes. Zero-downtime ensured.",0!==n&&(0,s.jsxs)("div",{className:"font-semibold mt-1",children:["ðŸ’° Cost impact: ",n>0?"+":"","$",Math.abs(n).toFixed(2),"/month"]})]})]})}function L(e){var t,a,l,r,n,i,d,c,o,x;let{database:m,environment:p,draftDatabase:u,setDraftDatabase:h,hasChanges:b,showChanges:g,setShowChanges:j,onApply:v,isApplying:f,state:N,onRemove:y}=e,w=()=>{if((N.applications||[]).some(e=>{var s;return null==(s=e.serviceAccess)?void 0:s.database}))return void alert("Cannot remove database: one or more applications are still connected. Disable database access in application settings first.");window.confirm("Remove database from deployed configuration? This action cannot be undone in demo mode.")&&y()};return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-slate-900",children:"PostgreSQL Database"}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"external"===u.type?"External connection":"Managed ".concat(u.engine," instance")})]}),(null==p?void 0:p.deployed)&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>j(!0),disabled:!b||f,className:"px-4 py-2 rounded-lg text-sm font-medium border ".concat(b?"border-amber-300 text-amber-700 bg-amber-50":"border-slate-200 text-slate-400"," disabled:opacity-50"),children:"Show Changes"}),(0,s.jsx)("button",{onClick:v,disabled:!b||f,className:"px-4 py-2 rounded-lg text-sm font-semibold bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-50",children:f?"Applyingâ€¦":"Apply"}),(0,s.jsx)("button",{onClick:w,disabled:f,className:"px-4 py-2 rounded-lg text-sm font-medium border border-red-300 text-red-600 hover:bg-red-50 disabled:opacity-50",children:"Remove"})]}),!(null==p?void 0:p.deployed)&&(0,s.jsx)("button",{onClick:w,className:"px-4 py-2 rounded-lg text-sm font-medium border border-red-300 text-red-600 hover:bg-red-50",children:"Remove"})]}),(0,s.jsxs)("div",{className:"flex p-1 bg-slate-100 rounded-lg",children:[(0,s.jsx)("button",{onClick:()=>h({...u,type:"container"}),className:"flex-1 py-2 text-sm font-medium rounded-md transition ".concat("external"!==u.type?"bg-white shadow text-slate-900":"text-slate-500 hover:text-slate-700"),children:"Container (DIY)"}),(0,s.jsx)("button",{onClick:()=>h({...u,type:"external"}),className:"flex-1 py-2 text-sm font-medium rounded-md transition ".concat("external"===u.type?"bg-white shadow text-slate-900":"text-slate-500 hover:text-slate-700"),children:"External Database"})]}),"external"===u.type&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"â„¹ï¸"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-blue-900",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"External Database"}),(0,s.jsx)("p",{children:"Connect to a managed database provider (e.g., Aiven, Supabase, AWS RDS). We recommend using the same region as your project for best performance."})]})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Connection String"}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{type:"password",value:u.externalUrl||"",onChange:e=>h({...u,externalUrl:e.target.value}),placeholder:"postgres://user:pass@host:5432/db",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm"})}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Must be a valid PostgreSQL connection URL."})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{className:"text-sm text-purple-600 font-medium hover:text-purple-700",children:"Test Connection"})})]}),"external"!==u.type&&(0,s.jsxs)(s.Fragment,{children:[(null==p?void 0:p.type)==="prod"&&(0,s.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:"âš ï¸"}),(0,s.jsxs)("div",{className:"flex-1 text-sm text-amber-900",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"Not Recommended for Production"}),(0,s.jsx)("p",{children:"Running a database in a container is risky for production data. We strongly recommend using a managed database provider."})]})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Connection URL"}),(0,s.jsxs)("div",{className:"bg-slate-900 rounded-lg p-4 font-mono text-xs text-green-400 flex items-center justify-between",children:[(0,s.jsxs)("code",{className:"break-all",children:["postgres://unhazzle_user:***@db-prod-",(null==(t=N.domain)?void 0:t.defaultSubdomain)||"app",".internal:5432/main"]}),(0,s.jsx)("button",{onClick:()=>{var e;navigator.clipboard.writeText("postgres://unhazzle_user:secret@db-prod-".concat((null==(e=N.domain)?void 0:e.defaultSubdomain)||"app",".internal:5432/main")),alert("Connection URL copied to clipboard!")},className:"ml-3 px-3 py-1 bg-purple-600 text-white text-xs rounded hover:bg-purple-700 transition",children:"Copy"})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Injected as DATABASE_URL environment variable."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Resources"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"CPU"}),(0,s.jsxs)("select",{value:u.cpu,onChange:e=>h({...u,cpu:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"0.5",children:"0.5"}),(0,s.jsx)("option",{value:"1",children:"1"}),(0,s.jsx)("option",{value:"2",children:"2"}),(0,s.jsx)("option",{value:"4",children:"4"}),(0,s.jsx)("option",{value:"8",children:"8"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Memory"}),(0,s.jsxs)("select",{value:u.memory,onChange:e=>h({...u,memory:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"1GB",children:"1GB"}),(0,s.jsx)("option",{value:"2GB",children:"2GB"}),(0,s.jsx)("option",{value:"4GB",children:"4GB"}),(0,s.jsx)("option",{value:"8GB",children:"8GB"}),(0,s.jsx)("option",{value:"16GB",children:"16GB"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Storage"}),(0,s.jsxs)("select",{value:u.storage,onChange:e=>h({...u,storage:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"10GB",children:"10GB"}),(0,s.jsx)("option",{value:"20GB",children:"20GB"}),(0,s.jsx)("option",{value:"50GB",children:"50GB"}),(0,s.jsx)("option",{value:"100GB",children:"100GB"}),(0,s.jsx)("option",{value:"200GB",children:"200GB"}),(0,s.jsx)("option",{value:"500GB",children:"500GB"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Backups"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Frequency"}),(0,s.jsxs)("select",{value:u.backups.frequency,onChange:e=>h({...u,backups:{...u.backups,frequency:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"hourly",children:"Hourly"}),(0,s.jsx)("option",{value:"daily",children:"Daily"}),(0,s.jsx)("option",{value:"weekly",children:"Weekly"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Retention"}),(0,s.jsxs)("select",{value:u.backups.retention,onChange:e=>h({...u,backups:{...u.backups,retention:e.target.value}}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"7 days",children:"7 days"}),(0,s.jsx)("option",{value:"14 days",children:"14 days"}),(0,s.jsx)("option",{value:"30 days",children:"30 days"}),(0,s.jsx)("option",{value:"90 days",children:"90 days"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Enabled"}),(0,s.jsxs)("label",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:u.backups.enabled,onChange:e=>h({...u,backups:{...u.backups,enabled:e.target.checked}})}),(0,s.jsx)("span",{className:"text-sm text-slate-900",children:"Automatic backups"})]})]})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Point-in-time recovery available for all plans."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"High Availability"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-slate-600 mb-1",children:"Replicas"}),(0,s.jsxs)("select",{value:u.replicas,onChange:e=>h({...u,replicas:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"none",children:"None (Single instance)"}),(0,s.jsx)("option",{value:"1",children:"1 Standby Replica"}),(0,s.jsx)("option",{value:"2",children:"2 Standby Replicas"})]})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)("div",{className:"text-xs text-slate-600",children:(0,s.jsx)("span",{className:"inline-block px-2 py-1 bg-green-100 text-green-800 rounded",children:"âœ“ Connection pooling enabled"})})})]})]})]}),g&&b&&(0,s.jsxs)("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h5",{className:"font-semibold text-amber-900",children:"ðŸ“ Pending Changes"}),(0,s.jsx)("button",{onClick:()=>j(!1),className:"text-xs text-amber-700 underline",children:"Hide"})]}),(0,s.jsxs)("ul",{className:"text-sm text-amber-900 list-disc ml-5 space-y-1",children:[(null==(a=N.resources)?void 0:a.database)&&u.type!==(N.resources.database.type||"container")&&(0,s.jsxs)("li",{children:["Type: ",N.resources.database.type||"container"," â†’ ",u.type]}),"external"===u.type&&(null==(r=N.resources)||null==(l=r.database)?void 0:l.externalUrl)!==u.externalUrl&&(0,s.jsx)("li",{children:"Connection URL: Updated"}),"external"!==u.type&&(null==(n=N.resources)?void 0:n.database)&&u.cpu!==N.resources.database.cpu&&(0,s.jsxs)("li",{children:["CPU: ",N.resources.database.cpu," â†’ ",u.cpu]}),"external"!==u.type&&(null==(i=N.resources)?void 0:i.database)&&u.memory!==N.resources.database.memory&&(0,s.jsxs)("li",{children:["Memory: ",N.resources.database.memory," â†’ ",u.memory]}),"external"!==u.type&&(null==(d=N.resources)?void 0:d.database)&&u.storage!==N.resources.database.storage&&(0,s.jsxs)("li",{children:["Storage: ",N.resources.database.storage," â†’ ",u.storage]}),"external"!==u.type&&(null==(c=N.resources)?void 0:c.database)&&u.backups.frequency!==N.resources.database.backups.frequency&&(0,s.jsxs)("li",{children:["Backup frequency: ",N.resources.database.backups.frequency," â†’ ",u.backups.frequency]}),"external"!==u.type&&(null==(o=N.resources)?void 0:o.database)&&u.backups.retention!==N.resources.database.backups.retention&&(0,s.jsxs)("li",{children:["Backup retention: ",N.resources.database.backups.retention," â†’ ",u.backups.retention]}),"external"!==u.type&&(null==(x=N.resources)?void 0:x.database)&&u.replicas!==N.resources.database.replicas&&(0,s.jsxs)("li",{children:["Replicas: ",N.resources.database.replicas," â†’ ",u.replicas]})]}),(0,s.jsx)("div",{className:"text-xs text-amber-800 mt-3",children:"Impact: Storage changes are instant. CPU/Memory changes require brief maintenance window (~3 min). Zero data loss guaranteed."})]})]})}function I(e){var t;let{selected:a,selectedResource:l,draftApplication:n,draftDatabase:i,draftCache:d,onCancel:c,onConfirm:o}=e;return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:"âš ï¸"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Apply Configuration Changes?"}),"application"===a.kind&&l&&n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-slate-700 mb-4",children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Summary:"}),(0,s.jsxs)("p",{className:"text-slate-600",children:["Application: ",(0,s.jsx)("span",{className:"font-mono",children:l.data.name||(null==(t=l.data.imageUrl.split("/").pop())?void 0:t.split(":")[0])})]}),(0,s.jsxs)("ul",{className:"list-disc ml-5 mt-2 space-y-1 text-slate-600",children:[l.data.resources.cpu!==n.resources.cpu&&(0,s.jsxs)("li",{children:["CPU: ",l.data.resources.cpu," â†’ ",n.resources.cpu," cores"]}),l.data.resources.memory!==n.resources.memory&&(0,s.jsxs)("li",{children:["Memory: ",l.data.resources.memory," â†’ ",n.resources.memory]}),l.data.resources.replicas.min!==n.resources.replicas.min&&(0,s.jsxs)("li",{children:["Min replicas: ",l.data.resources.replicas.min," â†’ ",n.resources.replicas.min]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2 text-sm",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Impact Assessment:"}),(0,s.jsx)("p",{className:"text-slate-600",children:"âš ï¸ Rolling restart required"}),(0,s.jsx)("p",{className:"text-slate-600",children:"â±ï¸ Estimated time: ~2 minutes"}),(0,s.jsx)("p",{className:"text-slate-600",children:"âœ… No expected traffic disruption"}),(()=>{let e=(0,r.calculateApplicationCostImpact)(l.data.resources.cpu,l.data.resources.memory,l.data.resources.replicas,n.resources.cpu,n.resources.memory,n.resources.replicas);return 0!==e?(0,s.jsxs)("p",{className:"text-slate-600 font-medium",children:["ðŸ’° Cost impact: ",e>0?"+":"","â‚¬",Math.abs(e).toFixed(2),"/month"]}):null})()]})]}),"database"===a.kind&&l&&i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-slate-700 mb-4",children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Summary:"}),(0,s.jsxs)("p",{className:"text-slate-600",children:["Resource: ",(0,s.jsx)("span",{className:"font-mono",children:"PostgreSQL Database"})]}),(0,s.jsxs)("ul",{className:"list-disc ml-5 mt-2 space-y-1 text-slate-600",children:[l.data.cpu!==i.cpu&&(0,s.jsxs)("li",{children:["CPU: ",l.data.cpu," â†’ ",i.cpu," cores"]}),l.data.memory!==i.memory&&(0,s.jsxs)("li",{children:["Memory: ",l.data.memory," â†’ ",i.memory]}),l.data.storage!==i.storage&&(0,s.jsxs)("li",{children:["Storage: ",l.data.storage," â†’ ",i.storage]}),l.data.replicas.min!==i.replicas.min&&(0,s.jsxs)("li",{children:["Replicas (min): ",l.data.replicas.min," â†’ ",i.replicas.min]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2 text-sm",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Impact Assessment:"}),(0,s.jsx)("p",{className:"text-slate-600",children:"âš ï¸ Maintenance window required for CPU/Memory changes"}),(0,s.jsx)("p",{className:"text-slate-600",children:"â±ï¸ Estimated time: ~3 minutes"}),(0,s.jsx)("p",{className:"text-slate-600",children:"âœ… Zero data loss guaranteed"}),(()=>{let e=(0,r.calculateDatabaseCostImpact)(l.data,i);return 0!==e?(0,s.jsxs)("p",{className:"text-slate-600 font-medium",children:["ðŸ’° Cost impact: ",e>0?"+":"","â‚¬",Math.abs(e).toFixed(2),"/month"]}):null})()]})]}),"cache"===a.kind&&l&&d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-slate-700 mb-4",children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Summary:"}),(0,s.jsxs)("p",{className:"text-slate-600",children:["Resource: ",(0,s.jsx)("span",{className:"font-mono",children:"Redis Cache"})]}),(0,s.jsxs)("ul",{className:"list-disc ml-5 mt-2 space-y-1 text-slate-600",children:[l.data.memory!==d.memory&&(0,s.jsxs)("li",{children:["Memory: ",l.data.memory," â†’ ",d.memory]}),l.data.version!==d.version&&(0,s.jsxs)("li",{children:["Version: ",l.data.version," â†’ ",d.version]}),l.data.evictionPolicy!==d.evictionPolicy&&(0,s.jsxs)("li",{children:["Eviction Policy: ",l.data.evictionPolicy," â†’ ",d.evictionPolicy]}),l.data.persistence!==d.persistence&&(0,s.jsxs)("li",{children:["Persistence: ",l.data.persistence," â†’ ",d.persistence]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2 text-sm",children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:"Impact Assessment:"}),(0,s.jsx)("p",{className:"text-slate-600",children:"âš ï¸ Restart required (~30 seconds)"}),(0,s.jsx)("p",{className:"text-slate-600",children:"âœ… Data persisted if AOF/RDB enabled"}),(()=>{let e=(0,r.calculateCacheCostImpact)(l.data.memory,d.memory);return 0!==e?(0,s.jsxs)("p",{className:"text-slate-600 font-medium",children:["ðŸ’° Cost impact: ",e>0?"+":"","â‚¬",Math.abs(e).toFixed(2),"/month"]}):null})()]})]}),(0,s.jsx)("p",{className:"text-sm text-slate-600 mt-4",children:"Are you sure you want to apply these changes?"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[(0,s.jsx)("button",{onClick:c,className:"px-5 py-2 rounded-lg border border-slate-300 text-slate-700 hover:bg-slate-50 font-medium",children:"Cancel"}),(0,s.jsx)("button",{onClick:o,className:"px-5 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 font-medium",children:"Apply Changes"})]})]})})}}]);