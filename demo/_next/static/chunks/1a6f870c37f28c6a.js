(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23312,e=>{"use strict";e.s(["DeploymentProvider",()=>o,"useDeployment",()=>i]);var t=e.i(43476),n=e.i(71645);let r=(0,n.createContext)(void 0),a={user:null,questionnaire:null,application:null,applications:[],resources:null,environment:null,domain:null,cost:null,deployed:!1,project:null,activeEnvironmentId:null,projectName:void 0,region:void 0,smartQuestionnaire:null,recommendations:null};function o(e){let{children:o}=e,[i,p]=(0,n.useState)(()=>{{let a=localStorage.getItem("unhazzle-deployment-state");if(a)try{let o=JSON.parse(a),i=o.applications||o.containers||[],p=o.project;if(o.deployed&&!p&&i.length>0){var e,t,n,r;let a=new Date().toISOString(),l=(null==(e=o.questionnaire)?void 0:e.appType)?"".concat(o.questionnaire.appType.toLowerCase(),"-app"):"my-app",s=i.filter(e=>"public"===e.exposure).map(e=>e.name);p={id:"proj-"+Date.now(),name:(null==(t=o.questionnaire)?void 0:t.appType)?"".concat(o.questionnaire.appType," Application"):"My Application",slug:l,createdAt:a,updatedAt:a,prEnvs:{enabled:!0,maxEnvs:3,lifetimeHours:2,autoDeleteOnPRClose:!0},environments:[{id:"env-dev-"+Date.now(),name:"dev",slug:"dev",type:"standard",createdAt:a,baseDomain:"dev.".concat(l,".demo.unhazzle.io"),publicApplications:s,applications:i,database:null==(n=o.resources)?void 0:n.database,cache:null==(r=o.resources)?void 0:r.cache}],envCount:1,prEnvCount:0,standardEnvCount:1}}return p&&p.environments&&(p.environments=p.environments.map(e=>({...e,applications:e.applications||e.containers||[],containers:void 0}))),{...o,applications:i,containers:void 0,project:p}}catch(e){console.error("Failed to parse saved state:",e)}}return a}),l=e=>{if(!i.project)throw Error("Cannot create environment without a project");let t=new Date().toISOString(),n=e.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),r=(e.applications||[]).filter(e=>"public"===e.exposure).map(e=>e.name),a={id:"env-".concat(n,"-").concat(Date.now()),slug:n,type:e.type||"standard",deployed:e.deployed||!1,deployedAt:e.deployedAt,pendingChanges:e.pendingChanges||!1,createdAt:t,baseDomain:"".concat(n,".").concat(i.project.slug,".demo.unhazzle.io"),publicApplications:r,applications:e.applications||[],database:e.database,cache:e.cache,...e,name:e.name};return p(e=>{if(!e.project)return e;let n=[...e.project.environments,a],r=n.filter(e=>"pr"===e.type).length,o=n.filter(e=>"standard"===e.type).length,i={...e.project,environments:n,envCount:n.length,prEnvCount:r,standardEnvCount:o,updatedAt:t},p={...e,project:i,activeEnvironmentId:a.id};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(p)),p}),a},s=(e,t)=>{p(n=>{if(!n.project)return n;let r=n.project.environments.map(n=>{if(n.id===e){let e={...n,...t};return t.applications&&(e.publicApplications=t.applications.filter(e=>"public"===e.exposure).map(e=>e.name)),e}return n}),a={...n.project,environments:r,updatedAt:new Date().toISOString()},o={...n,project:a};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(o)),o})};return(0,t.jsx)(r.Provider,{value:{state:i,updateState:e=>{p(t=>{let n={...t,...e};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(n)),n})},updateUser:e=>{p(t=>{let n={...t,user:e};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(n)),n})},updateQuestionnaire:e=>{p(t=>{let n={...t,questionnaire:e};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(n)),n})},updateApplication:e=>{p(t=>{let n={...t,application:e};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(n)),n})},addApplication:e=>{p(t=>{let n=t.applications||[],r={...t,applications:[...n,e]};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(r)),r})},clearApplications:()=>{p(e=>{let t={...e,applications:[]};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(t)),t})},updateApplicationConfig:(e,t)=>{p(n=>{var r;let a=(n.applications||[]).map(n=>n.id===e?{...n,...t}:n),o=n.project;(null==(r=n.project)?void 0:r.environments)&&(o={...n.project,environments:n.project.environments.map(n=>{if(n.applications.some(t=>t.id===e)){let r=n.applications.map(n=>n.id===e?{...n,...t}:n);return{...n,applications:r,publicApplications:t.name?n.publicApplications.map(r=>{let a=n.applications.find(t=>t.id===e);return a&&a.name===r?t.name:r}):n.publicApplications}}return n})});let i={...n,applications:a,project:o};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(i)),i})},removeApplication:(e,t)=>{p(n=>{var r;let a=(n.applications||[]).filter(t=>t.id!==e),o=n.project;(null==(r=n.project)?void 0:r.environments)&&(o={...n.project,environments:n.project.environments.map(n=>{if(t&&n.id!==t)return n;let r=n.applications||[],a=r.find(t=>t.id===e),o=r.filter(t=>t.id!==e);return{...n,applications:o,publicApplications:a?n.publicApplications.filter(e=>e!==a.name):n.publicApplications}})});let i={...n,applications:a,project:o};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(i)),i})},updateResources:e=>{p(t=>{var n,r;let a=t.project;(null==(r=t.project)||null==(n=r.environments)?void 0:n[0])&&(a={...t.project,environments:t.project.environments.map((t,n)=>0===n?{...t,database:e.database,cache:e.cache}:t)});let o={...t,resources:e,project:a};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(o)),o})},updateEnvironment:e=>{p(t=>{let n={...t,environment:e};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(n)),n})},updateDomain:e=>{p(t=>{let n={...t,domain:e};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(n)),n})},updateCost:e=>{p(t=>{let n={...t,cost:e};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(n)),n})},markDeployed:()=>{p(e=>{var t,n,r,a;let o=new Date().toISOString(),i=Date.now(),p=null==(t=e.projectName)?void 0:t.trim(),l=p&&p.length>0?p:"Project ".concat(i.toString().slice(-6)),s=p&&p.length>0?p.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):"project-".concat(i.toString().slice(-6)),c=(e.applications||[]).filter(e=>"public"===e.exposure).map(e=>e.name),d={id:"env-dev-"+i,name:"dev",slug:"dev",type:"standard",deployed:!0,deployedAt:o,pendingChanges:!1,createdAt:o,baseDomain:"dev.".concat(s,".demo.unhazzle.io"),publicApplications:c,applications:e.applications||[],database:null==(n=e.resources)?void 0:n.database,cache:null==(r=e.resources)?void 0:r.cache},u={id:"proj-"+i,name:l,slug:s,description:"A production-ready application deployed with Unhazzle",createdAt:o,updatedAt:o,repository:{url:"https://github.com/".concat((null==(a=e.user)?void 0:a.githubUsername)||"username","/").concat(s),branch:"main",autoDeployEnabled:!0,configPath:"unhazzle.yaml"},prEnvironmentSettings:{enabled:!1,autoCreateOnPR:!0,autoDeleteOnMerge:!0,expirationHours:72,nameTemplate:"pr-{number}"},prEnvs:{enabled:!1,maxEnvs:3,lifetimeHours:2,autoDeleteOnPRClose:!0},environments:[d],envCount:1,prEnvCount:0,standardEnvCount:1},m={...e,deployed:!0,project:u};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(m)),m})},resetState:()=>{p(a),localStorage.removeItem("unhazzle-deployment-state")},removeDatabase:()=>{p(e=>{var t,n,r;let a=(e.applications||[]).map(e=>{var t;if(!(null==(t=e.serviceAccess)?void 0:t.database))return e;let n=(e.environmentVariables||[]).filter(e=>"UNHAZZLE_POSTGRES_URL"!==e.key&&"DATABASE_URL"!==e.key);return{...e,serviceAccess:{...e.serviceAccess,database:!1},environmentVariables:n}}),o=e.resources?{...e.resources,database:void 0}:e.resources,i=e.environment;(null==(t=e.environment)?void 0:t.autoGenerated)&&(i={...e.environment,autoGenerated:e.environment.autoGenerated.filter(e=>"DATABASE_URL"!==e.key)});let p=e.project;(null==(r=e.project)||null==(n=r.environments)?void 0:n[0])&&(p={...e.project,environments:e.project.environments.map((e,t)=>0===t?{...e,applications:a,database:void 0}:e)});let l={...e,applications:a,resources:o,environment:i,project:p};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(l)),l})},removeCache:()=>{p(e=>{var t,n,r;let a=(e.applications||[]).map(e=>{var t;if(!(null==(t=e.serviceAccess)?void 0:t.cache))return e;let n=(e.environmentVariables||[]).filter(e=>"UNHAZZLE_REDIS_URL"!==e.key&&"REDIS_URL"!==e.key);return{...e,serviceAccess:{...e.serviceAccess,cache:!1},environmentVariables:n}}),o=e.resources?{...e.resources,cache:void 0}:e.resources,i=e.environment;(null==(t=e.environment)?void 0:t.autoGenerated)&&(i={...e.environment,autoGenerated:e.environment.autoGenerated.filter(e=>"REDIS_URL"!==e.key)});let p=e.project;(null==(r=e.project)||null==(n=r.environments)?void 0:n[0])&&(p={...e.project,environments:e.project.environments.map((e,t)=>0===t?{...e,applications:a,cache:void 0}:e)});let l={...e,applications:a,resources:o,environment:i,project:p};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(l)),l})},updateProject:e=>{p(t=>{if(!t.project)return t;let n={...t.project,...e,updatedAt:new Date().toISOString()},r={...t,project:n};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(r)),r})},createEnvironment:l,updateEnvironmentConfig:s,deleteEnvironment:e=>{p(t=>{if(!t.project)return t;let n=new Date().toISOString(),r=t.project.environments.filter(t=>t.id!==e),a=r.filter(e=>"pr"===e.type).length,o=r.filter(e=>"standard"===e.type).length,i={...t.project,environments:r,envCount:a+o,prEnvCount:a,standardEnvCount:o,updatedAt:n},p=t.activeEnvironmentId===e?null:t.activeEnvironmentId,l={...t,project:i,activeEnvironmentId:p};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(l)),l})},cloneEnvironment:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!i.project)throw Error("Cannot clone environment without a project");let r=i.project.environments.find(t=>t.id===e);if(!r)throw Error("Source environment not found");return l({name:t,type:"standard",deployed:n,deployedAt:n?new Date().toISOString():void 0,applications:JSON.parse(JSON.stringify(r.applications)),database:r.database?JSON.parse(JSON.stringify(r.database)):void 0,cache:r.cache?JSON.parse(JSON.stringify(r.cache)):void 0})},promoteEnvironment:(e,t)=>{if(!i.project)throw Error("Cannot promote without a project");let n=i.project.environments.find(t=>t.id===e),r=i.project.environments.find(e=>e.id===t);if(!n||!r)throw Error("Source or target environment not found");s(t,{applications:JSON.parse(JSON.stringify(n.applications)),database:n.database?JSON.parse(JSON.stringify(n.database)):void 0,cache:n.cache?JSON.parse(JSON.stringify(n.cache)):void 0})},pauseEnvironment:(e,t)=>{p(n=>{if(!n.project)return n;let r=n.project.environments.map(n=>{if(n.id===e){let e=n.applications.map(e=>({...e,status:"paused",pauseSchedule:t,resources:{...e.resources,replicas:{...e.resources.replicas,min:0,max:0}}}));return{...n,applications:e}}return n}),a={...n.project,environments:r,updatedAt:new Date().toISOString()},o={...n,project:a};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(o)),o})},resumeEnvironment:e=>{p(t=>{if(!t.project)return t;let n=t.project.environments.map(t=>t.id===e?{...t}:t),r={...t.project,environments:n,updatedAt:new Date().toISOString()},a={...t,project:r};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(a)),setTimeout(()=>{p(t=>{if(!t.project)return t;let n=t.project.environments.map(t=>t.id===e?{...t}:t),r={...t.project,environments:n,updatedAt:new Date().toISOString()},a={...t,project:r};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(a)),a})},2e3),a})},setActiveEnvironment:e=>{p(t=>{let n={...t,activeEnvironmentId:e};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(n)),n})},getActiveEnvironment:()=>i.project&&i.activeEnvironmentId&&i.project.environments.find(e=>e.id===i.activeEnvironmentId)||null,createAppsFromImages:(e,t)=>{p(n=>{if(!n.project||!n.project.environments.find(t=>t.id===e))return n;let r=t.map((e,t)=>{var r,a,o,i,p;return{id:"app-".concat(Date.now(),"-").concat(t),name:e.autoName,imageUrl:e.url,registryToken:e.url.startsWith("ghcr.io")?null==(r=n.project)?void 0:r.githubPAT:void 0,port:3e3,healthCheck:{protocol:"HTTP",port:3e3,path:"/health",interval:"30s",timeout:"5s",retries:3},exposure:e.exposure||"private",resources:{cpu:(null==(a=n.recommendations)?void 0:a.cpuPerReplica)||"1 vCPU",memory:(null==(o=n.recommendations)?void 0:o.memoryPerReplica)||"2GB",replicas:{min:(null==(i=n.recommendations)?void 0:i.hpaMin)||2,max:(null==(p=n.recommendations)?void 0:p.hpaMax)||10}},serviceAccess:{database:!1,cache:!1},environmentVariables:[],status:"stopped",isDirty:!1}}),a=n.project.environments.map(t=>t.id===e?{...t,applications:[...t.applications,...r],publicApplications:[...t.publicApplications,...r.filter(e=>"public"===e.exposure).map(e=>e.name)]}:t),o={...n.project,environments:a,updatedAt:new Date().toISOString()},i={...n,project:o};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(i)),i})},markEnvironmentChanged:e=>{p(t=>{if(!t.project)return t;let n=t.project.environments.find(t=>t.id===e);if(!n||!n.deployed)return t;let r=t.project.environments.map(t=>t.id===e?{...t,pendingChanges:!0}:t),a={...t.project,environments:r,updatedAt:new Date().toISOString()},o={...t,project:a};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(o)),o})},deployEnvironment:e=>{p(t=>{if(!t.project)return t;let n=t.project.environments.map(t=>t.id===e?{...t,deployed:!0,deployedAt:new Date().toISOString(),pendingChanges:!1}:t),r={...t.project,environments:n,updatedAt:new Date().toISOString()},a={...t,project:r,deployed:!0};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(a)),a})},applyEnvironmentChanges:e=>{p(t=>{if(!t.project)return t;let n=t.project.environments.map(t=>t.id===e?{...t,pendingChanges:!1,deployedAt:new Date().toISOString()}:t),r={...t.project,environments:n,updatedAt:new Date().toISOString()},a={...t,project:r};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(a)),a})},updateApplicationStatus:(e,t)=>{p(n=>{if(!n.project)return n;let r=n.project.environments.map(n=>{if(n.applications.some(t=>t.id===e)){let r=n.applications.map(n=>n.id===e?{...n,status:t}:n);return{...n,applications:r}}return n}),a={...n.project,environments:r,updatedAt:new Date().toISOString()},o={...n,project:a};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(o)),o})},promoteApplication:(e,t)=>{p(n=>{let r;if(!n.project)return n;for(let t of n.project.environments){let n=t.applications.find(t=>t.id===e);if(n){r=n;break}}if(!r||!n.project.environments.find(e=>e.id===t))return n;let a={...r,id:"app-".concat(Date.now()),status:"stopped",isDirty:!1,deployedAt:void 0},o=n.project.environments.map(e=>e.id===t?{...e,applications:[...e.applications,a],publicApplications:"public"===a.exposure?[...e.publicApplications,a.name]:e.publicApplications}:e),i={...n.project,environments:o,updatedAt:new Date().toISOString()},p={...n,project:i};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(p)),p})},pauseApplication:(e,t)=>{p(n=>{if(!n.project)return n;let r=n.project.environments.map(n=>{if(n.applications.some(t=>t.id===e)){let r=n.applications.map(n=>n.id===e?{...n,status:"paused",pauseSchedule:t,resources:{...n.resources,replicas:{...n.resources.replicas,min:0,max:0}}}:n);return{...n,applications:r}}return n}),a={...n.project,environments:r,updatedAt:new Date().toISOString()},o={...n,project:a};return localStorage.setItem("unhazzle-deployment-state",JSON.stringify(o)),o})}},children:o})}function i(){let e=(0,n.useContext)(r);if(void 0===e)throw Error("useDeployment must be used within a DeploymentProvider");return e}},18566,(e,t,n)=>{t.exports=e.r(76562)},11337,e=>{"use strict";e.s(["default",()=>r]);var t=e.i(43476),n=e.i(18566);function r(){return(0,n.useRouter)(),(0,t.jsxs)("div",{className:"fixed top-0 left-0 right-0 bg-gradient-to-r from-purple-600 to-purple-800 text-white py-3 px-4 flex items-center justify-center gap-4 text-sm font-medium z-50 shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"mr-2",children:"ðŸŽ¬"}),(0,t.jsx)("strong",{children:"Demo Mode:"}),"Â Experience unhazzle with a sample e-commerce application"]}),(0,t.jsx)("button",{onClick:()=>{confirm("Are you sure you want to clear all data and reset the demo?")&&(localStorage.clear(),window.location.href="/unhazzle.io/demo")},className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-xs transition border border-white/30",title:"Clear local storage and restart",children:"Reset Demo"})]})}}]);